<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css?vsn=d">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg?vsn=d" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3a0ae72b2f6bdc4476f1fcb63396e717?s=50"></div><header><strong>Troubleshooting libdispatch build failure</strong> from <string>Jean-Pierre Simard</string> &lt;jp at jpsim.com&gt;<p>July  6, 2016 at 04:00:00pm</p></header><div class="content"><p>Up until a few days ago, running &#39;util/build-script --libdispatch&#39;<br>completed successfully.<br></p><p>Now it fails, generating the following errors. Any ideas on how to resolve<br>these? Or other ways people are using to build libdispatch at the moment?<br>Thanks!<br></p><p>/bin/bash ../libtool  --tag=CXX   --mode=compile<br>/build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++ -DHAVE_CONFIG_H -I.<br>-I//swift-corelibs-libdispatch/src -I../config  -I..<br>-I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>-DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include -Wall<br>-fvisibility=hidden -momit-leaf-frame-pointer  -I/usr/include/kqueue<br>-isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>-fno-exceptions -g -O2 -c -o swift/libdispatch_la-DispatchStubs.lo `test -f<br>&#39;swift/DispatchStubs.cc&#39; || echo<br>&#39;//swift-corelibs-libdispatch/src/&#39;`swift/DispatchStubs.cc<br>libtool: compile:  /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++<br>-DHAVE_CONFIG_H -I. -I//swift-corelibs-libdispatch/src -I../config -I..<br>-I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>-DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include -Wall<br>-fvisibility=hidden -momit-leaf-frame-pointer -I/usr/include/kqueue<br>-isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>-fno-exceptions -g -O2 -c<br>//swift-corelibs-libdispatch/src/swift/DispatchStubs.cc  -fPIC -DPIC -o<br>swift/.libs/libdispatch_la-DispatchStubs.o<br>/build/Ninja-DebugAssert/swift-linux-x86_64/bin/swiftc -frontend -c<br>//swift-corelibs-libdispatch/src/swift/Block.swift<br>//swift-corelibs-libdispatch/src/swift/Data.swift<br>//swift-corelibs-libdispatch/src/swift/Dispatch.swift<br>//swift-corelibs-libdispatch/src/swift/IO.swift<br>//swift-corelibs-libdispatch/src/swift/Private.swift<br>//swift-corelibs-libdispatch/src/swift/Queue.swift<br>//swift-corelibs-libdispatch/src/swift/Source.swift<br>//swift-corelibs-libdispatch/src/swift/Time.swift<br>//swift-corelibs-libdispatch/src/swift/Wrapper.swift -primary-file<br>//swift-corelibs-libdispatch/src/swift/Block.swift \<br>-Xcc<br>-fmodule-map-file=//swift-corelibs-libdispatch/dispatch/module.modulemap<br>-I//swift-corelibs-libdispatch -Xcc -fblocks -module-name Dispatch<br>-module-link-name dispatch \<br>-o /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o<br>-emit-module-path<br>/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftmodule<br>\<br>-emit-module-doc-path<br>/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftdoc<br>-emit-dependencies-path<br>/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.d \<br>-emit-reference-dependencies-path<br>/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.swiftdeps<br>\<br>-module-cache-path ..<br>&lt;module-includes&gt;:1:10: note: in file included from &lt;module-includes&gt;:1:<br>#include &quot;dispatch.h&quot;<br>         ^<br>//swift-corelibs-libdispatch/dispatch/dispatch.h:99:10: error:<br>&#39;os/object.h&#39; file not found<br>#include &lt;os/object.h&gt;<br>         ^<br>//swift-corelibs-libdispatch/src/swift/Block.swift:13:8: error: could not<br>build Objective-C module &#39;CDispatch&#39;<br>import CDispatch<br>       ^<br>Makefile:956: recipe for target<br>&#39;/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o&#39; failed<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/70c75f69/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/2ddf7419fbdd69635522af227c08327c?s=50"></div><header><strong>Troubleshooting libdispatch build failure</strong> from <string>David P Grove</string> &lt;groved at us.ibm.com&gt;<p>July  6, 2016 at 04:00:00pm</p></header><div class="content"><p>Hi,<br></p><p>	There has been some churn over the last few days, but I am<br>successfully using util/build-script to build libdispatch with the current<br>tip of the master branch of libdispatch (and a swift checkout of the master<br>branch from yesterday morning).  Maybe updating the checkout of libdispatch<br>would help?<br></p><p>--dave<br></p><p><br></p><p>From:	Jean-Pierre Simard &lt;jp at jpsim.com&gt;<br>To:	swift-corelibs-dev at swift.org<br>Cc:	David P Grove/Watson/IBM at IBMUS<br>Date:	07/06/2016 04:28 PM<br>Subject:	Troubleshooting libdispatch build failure<br></p><p><br></p><p>Up until a few days ago, running &#39;util/build-script --libdispatch&#39;<br>completed successfully.<br></p><p>Now it fails, generating the following errors. Any ideas on how to resolve<br>these? Or other ways people are using to build libdispatch at the moment?<br>Thanks!<br></p><p>/bin/bash ../libtool  --tag=CXX<br>--mode=compile /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++<br>-DHAVE_CONFIG_H -I. -I//swift-corelibs-libdispatch/src -I../config  -I..<br>-I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>-DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include -Wall<br>-fvisibility=hidden -momit-leaf-frame-pointer  -I/usr/include/kqueue<br>-isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>-fno-exceptions -g -O2 -c -o swift/libdispatch_la-DispatchStubs.lo `test -f<br>&#39;swift/DispatchStubs.cc&#39; || echo<br>&#39;//swift-corelibs-libdispatch/src/&#39;`swift/DispatchStubs.cc<br>libtool: compile:  /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++<br>-DHAVE_CONFIG_H -I. -I//swift-corelibs-libdispatch/src -I../config -I..<br>-I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>-DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include -Wall<br>-fvisibility=hidden -momit-leaf-frame-pointer -I/usr/include/kqueue<br>-isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>-fno-exceptions -g -O2<br>-c //swift-corelibs-libdispatch/src/swift/DispatchStubs.cc  -fPIC -DPIC -o<br>swift/.libs/libdispatch_la-DispatchStubs.o<br>/build/Ninja-DebugAssert/swift-linux-x86_64/bin/swiftc -frontend<br>-c //swift-corelibs-libdispatch/src/swift/Block.swift //swift-corelibs-libdispatch/src/swift/Data.swift //swift-corelibs-libdispatch/src/swift/Dispatch.swift //swift-corelibs-libdispatch/src/swift/IO.swift //swift-corelibs-libdispatch/src/swift/Private.swift //swift-corelibs-libdispatch/src/swift/Queue.swift //swift-corelibs-libdispatch/src/swift/Source.swift //swift-corelibs-libdispatch/src/swift/Time.swift //swift-corelibs-libdispatch/src/swift/Wrapper.swift<br> -primary-file //swift-corelibs-libdispatch/src/swift/Block.swift \<br>-Xcc<br>-fmodule-map-file=//swift-corelibs-libdispatch/dispatch/module.modulemap<br>-I//swift-corelibs-libdispatch -Xcc -fblocks -module-name Dispatch<br>-module-link-name dispatch \<br>-o /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o<br>-emit-module-path /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftmodule<br> \<br>-emit-module-doc-path /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftdoc<br></p><p>-emit-dependencies-path /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.d<br> \<br>-emit-reference-dependencies-path /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.swiftdeps<br> \<br>-module-cache-path ..<br>&lt;module-includes&gt;:1:10: note: in file included from &lt;module-includes&gt;:1:<br>#include &quot;dispatch.h&quot;<br>         ^<br>//swift-corelibs-libdispatch/dispatch/dispatch.h:99:10: error:<br>&#39;os/object.h&#39; file not found<br>#include &lt;os/object.h&gt;<br>         ^<br>//swift-corelibs-libdispatch/src/swift/Block.swift:13:8: error: could not<br>build Objective-C module &#39;CDispatch&#39;<br>import CDispatch<br>       ^<br>Makefile:956: recipe for target<br>&#39;/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o&#39;<br>failed<br></p><p><br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/1f9acfe6/attachment.html&gt;<br>-------------- next part --------------<br>A non-text attachment was scrubbed...<br>Name: graycol.gif<br>Type: image/gif<br>Size: 105 bytes<br>Desc: not available<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/1f9acfe6/attachment.gif&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3a0ae72b2f6bdc4476f1fcb63396e717?s=50"></div><header><strong>Troubleshooting libdispatch build failure</strong> from <string>Jean-Pierre Simard</string> &lt;jp at jpsim.com&gt;<p>July  6, 2016 at 06:00:00pm</p></header><div class="content"><p>Thanks for getting back to me so quickly Dave.<br></p><p>This worked last week, but didn&#39;t yesterday when I tried again. My &quot;last<br>few days&quot; guess might actually just be since yesterday morning. Maybe<br>something&#39;s changed since your last checkouts from yesterday morning?<br>Running these commands on a fresh Ubuntu 16.04 machine (i.e. no build<br>cache) gives me the output I shared above.<br></p><p>apt-get update &amp;&amp; \<br>    apt-get install -y \<br>      autoconf \<br>      clang \<br>      cmake \<br>      git \<br>      icu-devtools \<br>      libblocksruntime-dev \<br>      libbsd-dev \<br>      libedit-dev \<br>      libicu-dev \<br>      libkqueue-dev \<br>      libncurses5-dev \<br>      libpython-dev \<br>      libsqlite3-dev \<br>      libtool \<br>      libxml2-dev \<br>      ninja-build \<br>      pkg-config \<br>      python \<br>      swig \<br>      uuid-dev<br>git clone https://github.com/apple/swift.git<br>cd swift<br>utils/update-checkout --clone<br>utils/build-script --libdispatch<br></p><p>I suspect that the Xcode 8 beta 2 set of changes that landed yesterday may<br>have caused this. There were patches on all sorts of repos (swift-llvm,<br>swift-clang, swift, etc).<br></p><p>On Wed, Jul 6, 2016 at 4:52 PM, David P Grove &lt;groved at us.ibm.com&gt; wrote:<br></p><p>&gt; Hi,<br>&gt;<br>&gt; There has been some churn over the last few days, but I am successfully<br>&gt; using util/build-script to build libdispatch with the current tip of the<br>&gt; master branch of libdispatch (and a swift checkout of the master branch<br>&gt; from yesterday morning). Maybe updating the checkout of libdispatch would<br>&gt; help?<br>&gt;<br>&gt; --dave<br>&gt;<br>&gt; [image: Inactive hide details for Jean-Pierre Simard ---07/06/2016<br>&gt; 04:28:46 PM---Up until a few days ago, running &#39;util/build-script --]Jean-Pierre<br>&gt; Simard ---07/06/2016 04:28:46 PM---Up until a few days ago, running<br>&gt; &#39;util/build-script --libdispatch&#39; completed successfully.<br>&gt;<br>&gt; From: Jean-Pierre Simard &lt;jp at jpsim.com&gt;<br>&gt; To: swift-corelibs-dev at swift.org<br>&gt; Cc: David P Grove/Watson/IBM at IBMUS<br>&gt; Date: 07/06/2016 04:28 PM<br>&gt; Subject: Troubleshooting libdispatch build failure<br>&gt; ------------------------------<br>&gt;<br>&gt;<br>&gt;<br>&gt; Up until a few days ago, running &#39;util/build-script --libdispatch&#39;<br>&gt; completed successfully.<br>&gt;<br>&gt; Now it fails, generating the following errors. Any ideas on how to resolve<br>&gt; these? Or other ways people are using to build libdispatch at the moment?<br>&gt; Thanks!<br>&gt;<br>&gt; /bin/bash ../libtool  --tag=CXX   --mode=compile<br>&gt; /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++ -DHAVE_CONFIG_H -I.<br>&gt; -I//swift-corelibs-libdispatch/src -I../config  -I..<br>&gt; -I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>&gt; -DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include -Wall<br>&gt; -fvisibility=hidden -momit-leaf-frame-pointer  -I/usr/include/kqueue<br>&gt; -isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>&gt; -fno-exceptions -g -O2 -c -o swift/libdispatch_la-DispatchStubs.lo `test -f<br>&gt; &#39;swift/DispatchStubs.cc&#39; || echo<br>&gt; &#39;//swift-corelibs-libdispatch/src/&#39;`swift/DispatchStubs.cc<br>&gt; libtool: compile:  /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++<br>&gt; -DHAVE_CONFIG_H -I. -I//swift-corelibs-libdispatch/src -I../config -I..<br>&gt; -I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>&gt; -DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include -Wall<br>&gt; -fvisibility=hidden -momit-leaf-frame-pointer -I/usr/include/kqueue<br>&gt; -isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>&gt; -fno-exceptions -g -O2 -c<br>&gt; //swift-corelibs-libdispatch/src/swift/DispatchStubs.cc  -fPIC -DPIC -o<br>&gt; swift/.libs/libdispatch_la-DispatchStubs.o<br>&gt; /build/Ninja-DebugAssert/swift-linux-x86_64/bin/swiftc -frontend -c<br>&gt; //swift-corelibs-libdispatch/src/swift/Block.swift<br>&gt; //swift-corelibs-libdispatch/src/swift/Data.swift<br>&gt; //swift-corelibs-libdispatch/src/swift/Dispatch.swift<br>&gt; //swift-corelibs-libdispatch/src/swift/IO.swift<br>&gt; //swift-corelibs-libdispatch/src/swift/Private.swift<br>&gt; //swift-corelibs-libdispatch/src/swift/Queue.swift<br>&gt; //swift-corelibs-libdispatch/src/swift/Source.swift<br>&gt; //swift-corelibs-libdispatch/src/swift/Time.swift<br>&gt; //swift-corelibs-libdispatch/src/swift/Wrapper.swift -primary-file<br>&gt; //swift-corelibs-libdispatch/src/swift/Block.swift \<br>&gt; -Xcc<br>&gt; -fmodule-map-file=//swift-corelibs-libdispatch/dispatch/module.modulemap<br>&gt; -I//swift-corelibs-libdispatch -Xcc -fblocks -module-name Dispatch<br>&gt; -module-link-name dispatch \<br>&gt; -o /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o<br>&gt; -emit-module-path<br>&gt; /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftmodule<br>&gt; \<br>&gt; -emit-module-doc-path<br>&gt; /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftdoc<br>&gt; -emit-dependencies-path<br>&gt; /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.d \<br>&gt; -emit-reference-dependencies-path<br>&gt; /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.swiftdeps<br>&gt; \<br>&gt; -module-cache-path ..<br>&gt; &lt;module-includes&gt;:1:10: note: in file included from &lt;module-includes&gt;:1:<br>&gt; #include &quot;dispatch.h&quot;<br>&gt;          ^<br>&gt; //swift-corelibs-libdispatch/dispatch/dispatch.h:99:10: error:<br>&gt; &#39;os/object.h&#39; file not found<br>&gt; #include &lt;os/object.h&gt;<br>&gt;          ^<br>&gt; //swift-corelibs-libdispatch/src/swift/Block.swift:13:8: error: could not<br>&gt; build Objective-C module &#39;CDispatch&#39;<br>&gt; import CDispatch<br>&gt;        ^<br>&gt; Makefile:956: recipe for target<br>&gt; &#39;/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o&#39; failed<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/292ab66c/attachment.html&gt;<br>-------------- next part --------------<br>A non-text attachment was scrubbed...<br>Name: graycol.gif<br>Type: image/gif<br>Size: 105 bytes<br>Desc: not available<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/292ab66c/attachment.gif&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/2ddf7419fbdd69635522af227c08327c?s=50"></div><header><strong>Troubleshooting libdispatch build failure</strong> from <string>David P Grove</string> &lt;groved at us.ibm.com&gt;<p>July  6, 2016 at 08:00:00pm</p></header><div class="content"><p>ok, thanks for the details.<br></p><p>I&#39;ll grab the latest myself tomorrow morning and see if I can reproduce.<br></p><p>--dave<br></p><p><br></p><p>From:	Jean-Pierre Simard &lt;jp at jpsim.com&gt;<br>To:	David P Grove/Watson/IBM at IBMUS<br>Cc:	swift-corelibs-dev at swift.org<br>Date:	07/06/2016 06:21 PM<br>Subject:	Re: Troubleshooting libdispatch build failure<br></p><p><br></p><p>Thanks for getting back to me so quickly Dave.<br></p><p>This worked last week, but didn&#39;t yesterday when I tried again. My &quot;last<br>few days&quot; guess might actually just be since yesterday morning. Maybe<br>something&#39;s changed since your last checkouts from yesterday morning?<br>Running these commands on a fresh Ubuntu 16.04 machine (i.e. no build<br>cache) gives me the output I shared above.<br></p><p>apt-get update &amp;&amp; \<br>    apt-get install -y \<br>      autoconf \<br>      clang \<br>      cmake \<br>      git \<br>      icu-devtools \<br>      libblocksruntime-dev \<br>      libbsd-dev \<br>      libedit-dev \<br>      libicu-dev \<br>      libkqueue-dev \<br>      libncurses5-dev \<br>      libpython-dev \<br>      libsqlite3-dev \<br>      libtool \<br>      libxml2-dev \<br>      ninja-build \<br>      pkg-config \<br>      python \<br>      swig \<br>      uuid-dev<br>git clone https://github.com/apple/swift.git<br>cd swift<br>utils/update-checkout --clone<br>utils/build-script --libdispatch<br></p><p>I suspect that the Xcode 8 beta 2 set of changes that landed yesterday may<br>have caused this. There were patches on all sorts of repos (swift-llvm,<br>swift-clang, swift, etc).<br></p><p>On Wed, Jul 6, 2016 at 4:52 PM, David P Grove &lt;groved at us.ibm.com&gt; wrote:<br>  Hi,<br></p><p>  There has been some churn over the last few days, but I am successfully<br>  using util/build-script to build libdispatch with the current tip of the<br>  master branch of libdispatch (and a swift checkout of the master branch<br>  from yesterday morning). Maybe updating the checkout of libdispatch would<br>  help?<br></p><p>  --dave<br></p><p>  Inactive hide details for Jean-Pierre Simard ---07/06/2016 04:28:46<br>  PM---Up until a few days ago, running &#39;util/build-script --Jean-Pierre<br>  Simard ---07/06/2016 04:28:46 PM---Up until a few days ago, running<br>  &#39;util/build-script --libdispatch&#39; completed successfully.<br></p><p>  From: Jean-Pierre Simard &lt;jp at jpsim.com&gt;<br>  To: swift-corelibs-dev at swift.org<br>  Cc: David P Grove/Watson/IBM at IBMUS<br>  Date: 07/06/2016 04:28 PM<br>  Subject: Troubleshooting libdispatch build failure<br></p><p><br></p><p><br>  Up until a few days ago, running &#39;util/build-script --libdispatch&#39;<br>  completed successfully.<br></p><p>  Now it fails, generating the following errors. Any ideas on how to<br>  resolve these? Or other ways people are using to build libdispatch at the<br>  moment? Thanks!<br></p><p>  /bin/bash ../libtool  --tag=CXX<br>  --mode=compile /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++<br>  -DHAVE_CONFIG_H -I. -I//swift-corelibs-libdispatch/src -I../config  -I..<br>  -I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>  -DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include<br>  -Wall -fvisibility=hidden -momit-leaf-frame-pointer<br>  -I/usr/include/kqueue -isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks<br>  -std=gnu++11 -fno-exceptions -g -O2 -c -o<br>  swift/libdispatch_la-DispatchStubs.lo `test -f &#39;swift/DispatchStubs.cc&#39;<br>  || echo &#39;//swift-corelibs-libdispatch/src/&#39;`swift/DispatchStubs.cc<br>  libtool: compile:  /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++<br>  -DHAVE_CONFIG_H -I. -I//swift-corelibs-libdispatch/src -I../config -I..<br>  -I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>  -DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include<br>  -Wall -fvisibility=hidden -momit-leaf-frame-pointer -I/usr/include/kqueue<br>  -isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>  -fno-exceptions -g -O2<br>  -c //swift-corelibs-libdispatch/src/swift/DispatchStubs.cc  -fPIC -DPIC<br>  -o swift/.libs/libdispatch_la-DispatchStubs.o<br>  /build/Ninja-DebugAssert/swift-linux-x86_64/bin/swiftc -frontend<br>  -c //swift-corelibs-libdispatch/src/swift/Block.swift //swift-corelibs-libdispatch/src/swift/Data.swift //swift-corelibs-libdispatch/src/swift/Dispatch.swift //swift-corelibs-libdispatch/src/swift/IO.swift //swift-corelibs-libdispatch/src/swift/Private.swift //swift-corelibs-libdispatch/src/swift/Queue.swift //swift-corelibs-libdispatch/src/swift/Source.swift //swift-corelibs-libdispatch/src/swift/Time.swift //swift-corelibs-libdispatch/src/swift/Wrapper.swift<br> -primary-file //swift-corelibs-libdispatch/src/swift/Block.swift \<br>  -Xcc<br>  -fmodule-map-file=//swift-corelibs-libdispatch/dispatch/module.modulemap<br>  -I//swift-corelibs-libdispatch -Xcc -fblocks -module-name Dispatch<br>  -module-link-name dispatch \<br>  -o /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o<br>  -emit-module-path /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftmodule<br> \<br>  -emit-module-doc-path /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftdoc<br> -emit-dependencies-path /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.d<br> \<br>  -emit-reference-dependencies-path /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.swiftdeps<br> \<br>  -module-cache-path ..<br>  &lt;module-includes&gt;:1:10: note: in file included from &lt;module-includes&gt;:1:<br>  #include &quot;dispatch.h&quot;<br>           ^<br>  //swift-corelibs-libdispatch/dispatch/dispatch.h:99:10: error:<br>  &#39;os/object.h&#39; file not found<br>  #include &lt;os/object.h&gt;<br>           ^<br>  //swift-corelibs-libdispatch/src/swift/Block.swift:13:8: error: could not<br>  build Objective-C module &#39;CDispatch&#39;<br>  import CDispatch<br>         ^<br>  Makefile:956: recipe for target<br>  &#39;/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o&#39;<br>  failed<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/f618ab1b/attachment.html&gt;<br>-------------- next part --------------<br>A non-text attachment was scrubbed...<br>Name: graycol.gif<br>Type: image/gif<br>Size: 105 bytes<br>Desc: not available<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/f618ab1b/attachment.gif&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3a0ae72b2f6bdc4476f1fcb63396e717?s=50"></div><header><strong>Troubleshooting libdispatch build failure</strong> from <string>Jean-Pierre Simard</string> &lt;jp at jpsim.com&gt;<p>July  6, 2016 at 10:00:00pm</p></header><div class="content"><p>That&#39;s it. I managed to build things again by checking out everything at<br>the state it was yesterday morning:<br></p><p>for dir in */; do<br>  cd $dir; git checkout `git rev-list -n 1 --before=&quot;2016-07-05 08:00&quot;<br>master`; cd ..;<br>done<br></p><p>Still don&#39;t know which change(s) are responsible though.<br></p><p>On Wed, Jul 6, 2016 at 8:09 PM, David P Grove &lt;groved at us.ibm.com&gt; wrote:<br></p><p>&gt; ok, thanks for the details.<br>&gt;<br>&gt; I&#39;ll grab the latest myself tomorrow morning and see if I can reproduce.<br>&gt;<br>&gt; --dave<br>&gt;<br>&gt; [image: Inactive hide details for Jean-Pierre Simard ---07/06/2016<br>&gt; 06:21:03 PM---Thanks for getting back to me so quickly Dave. This wo]Jean-Pierre<br>&gt; Simard ---07/06/2016 06:21:03 PM---Thanks for getting back to me so quickly<br>&gt; Dave. This worked last week, but didn&#39;t yesterday when I tr<br>&gt;<br>&gt; From: Jean-Pierre Simard &lt;jp at jpsim.com&gt;<br>&gt; To: David P Grove/Watson/IBM at IBMUS<br>&gt; Cc: swift-corelibs-dev at swift.org<br>&gt; Date: 07/06/2016 06:21 PM<br>&gt; Subject: Re: Troubleshooting libdispatch build failure<br>&gt;<br>&gt; ------------------------------<br>&gt;<br>&gt;<br>&gt;<br>&gt; Thanks for getting back to me so quickly Dave.<br>&gt;<br>&gt; This worked last week, but didn&#39;t yesterday when I tried again. My &quot;last<br>&gt; few days&quot; guess might actually just be since yesterday morning. Maybe<br>&gt; something&#39;s changed since your last checkouts from yesterday morning?<br>&gt; Running these commands on a fresh Ubuntu 16.04 machine (i.e. no build<br>&gt; cache) gives me the output I shared above.<br>&gt;<br>&gt; apt-get update &amp;&amp; \<br>&gt;     apt-get install -y \<br>&gt;       autoconf \<br>&gt;       clang \<br>&gt;       cmake \<br>&gt;       git \<br>&gt;       icu-devtools \<br>&gt;       libblocksruntime-dev \<br>&gt;       libbsd-dev \<br>&gt;       libedit-dev \<br>&gt;       libicu-dev \<br>&gt;       libkqueue-dev \<br>&gt;       libncurses5-dev \<br>&gt;       libpython-dev \<br>&gt;       libsqlite3-dev \<br>&gt;       libtool \<br>&gt;       libxml2-dev \<br>&gt;       ninja-build \<br>&gt;       pkg-config \<br>&gt;       python \<br>&gt;       swig \<br>&gt;       uuid-dev<br>&gt; git clone *https://github.com/apple/swift.git*<br>&gt; &lt;https://github.com/apple/swift.git&gt;<br>&gt; cd swift<br>&gt; utils/update-checkout --clone<br>&gt; utils/build-script --libdispatch<br>&gt;<br>&gt; I suspect that the Xcode 8 beta 2 set of changes that landed yesterday may<br>&gt; have caused this. There were patches on all sorts of repos (swift-llvm,<br>&gt; swift-clang, swift, etc).<br>&gt;<br>&gt; On Wed, Jul 6, 2016 at 4:52 PM, David P Grove &lt;*groved at us.ibm.com*<br>&gt; &lt;groved at us.ibm.com&gt;&gt; wrote:<br>&gt;<br>&gt;    Hi,<br>&gt;<br>&gt;    There has been some churn over the last few days, but I am<br>&gt;    successfully using util/build-script to build libdispatch with the current<br>&gt;    tip of the master branch of libdispatch (and a swift checkout of the master<br>&gt;    branch from yesterday morning). Maybe updating the checkout of libdispatch<br>&gt;    would help?<br>&gt;<br>&gt;    --dave<br>&gt;<br>&gt;    [image: Inactive hide details for Jean-Pierre Simard ---07/06/2016<br>&gt;    04:28:46 PM---Up until a few days ago, running &#39;util/build-script --]Jean-Pierre<br>&gt;    Simard ---07/06/2016 04:28:46 PM---Up until a few days ago, running<br>&gt;    &#39;util/build-script --libdispatch&#39; completed successfully.<br>&gt;<br>&gt;    From: Jean-Pierre Simard &lt;*jp at jpsim.com* &lt;jp at jpsim.com&gt;&gt;<br>&gt;    To: *swift-corelibs-dev at swift.org* &lt;swift-corelibs-dev at swift.org&gt;<br>&gt;    Cc: David P Grove/Watson/IBM at IBMUS<br>&gt;    Date: 07/06/2016 04:28 PM<br>&gt;    Subject: Troubleshooting libdispatch build failure<br>&gt;    ------------------------------<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;    Up until a few days ago, running &#39;util/build-script --libdispatch&#39;<br>&gt;    completed successfully.<br>&gt;<br>&gt;    Now it fails, generating the following errors. Any ideas on how to<br>&gt;    resolve these? Or other ways people are using to build libdispatch at the<br>&gt;    moment? Thanks!<br>&gt;<br>&gt;    /bin/bash ../libtool  --tag=CXX   --mode=compile<br>&gt;    /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++ -DHAVE_CONFIG_H -I.<br>&gt;    -I//swift-corelibs-libdispatch/src -I../config  -I..<br>&gt;    -I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>&gt;    -DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include -Wall<br>&gt;    -fvisibility=hidden -momit-leaf-frame-pointer  -I/usr/include/kqueue<br>&gt;    -isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>&gt;    -fno-exceptions -g -O2 -c -o swift/libdispatch_la-DispatchStubs.lo `test -f<br>&gt;    &#39;swift/DispatchStubs.cc&#39; || echo<br>&gt;    &#39;//swift-corelibs-libdispatch/src/&#39;`swift/DispatchStubs.cc<br>&gt;    libtool: compile:<br>&gt;     /build/Ninja-DebugAssert/llvm-linux-x86_64/bin/clang++ -DHAVE_CONFIG_H -I.<br>&gt;    -I//swift-corelibs-libdispatch/src -I../config -I..<br>&gt;    -I//swift-corelibs-libdispatch -I//swift-corelibs-libdispatch/private<br>&gt;    -DDISPATCH_USE_DTRACE=0 -I//swift-corelibs-libdispatch/libpwq/include -Wall<br>&gt;    -fvisibility=hidden -momit-leaf-frame-pointer -I/usr/include/kqueue<br>&gt;    -isystem /usr/include/bsd -DLIBBSD_OVERLAY -fblocks -std=gnu++11<br>&gt;    -fno-exceptions -g -O2 -c<br>&gt;    //swift-corelibs-libdispatch/src/swift/DispatchStubs.cc  -fPIC -DPIC -o<br>&gt;    swift/.libs/libdispatch_la-DispatchStubs.o<br>&gt;    /build/Ninja-DebugAssert/swift-linux-x86_64/bin/swiftc -frontend -c<br>&gt;    //swift-corelibs-libdispatch/src/swift/Block.swift<br>&gt;    //swift-corelibs-libdispatch/src/swift/Data.swift<br>&gt;    //swift-corelibs-libdispatch/src/swift/Dispatch.swift<br>&gt;    //swift-corelibs-libdispatch/src/swift/IO.swift<br>&gt;    //swift-corelibs-libdispatch/src/swift/Private.swift<br>&gt;    //swift-corelibs-libdispatch/src/swift/Queue.swift<br>&gt;    //swift-corelibs-libdispatch/src/swift/Source.swift<br>&gt;    //swift-corelibs-libdispatch/src/swift/Time.swift<br>&gt;    //swift-corelibs-libdispatch/src/swift/Wrapper.swift -primary-file<br>&gt;    //swift-corelibs-libdispatch/src/swift/Block.swift \<br>&gt;    -Xcc<br>&gt;    -fmodule-map-file=//swift-corelibs-libdispatch/dispatch/module.modulemap<br>&gt;    -I//swift-corelibs-libdispatch -Xcc -fblocks -module-name Dispatch<br>&gt;    -module-link-name dispatch \<br>&gt;    -o /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o<br>&gt;    -emit-module-path<br>&gt;    /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftmodule<br>&gt;    \<br>&gt;    -emit-module-doc-path<br>&gt;    /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.~partial.swiftdoc<br>&gt;    -emit-dependencies-path<br>&gt;    /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.d \<br>&gt;    -emit-reference-dependencies-path<br>&gt;    /build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o.swiftdeps<br>&gt;    \<br>&gt;    -module-cache-path ..<br>&gt;    &lt;module-includes&gt;:1:10: note: in file included from<br>&gt;    &lt;module-includes&gt;:1:<br>&gt;    #include &quot;dispatch.h&quot;<br>&gt;             ^<br>&gt;    //swift-corelibs-libdispatch/dispatch/dispatch.h:99:10: error:<br>&gt;    &#39;os/object.h&#39; file not found<br>&gt;    #include &lt;os/object.h&gt;<br>&gt;             ^<br>&gt;    //swift-corelibs-libdispatch/src/swift/Block.swift:13:8: error: could<br>&gt;    not build Objective-C module &#39;CDispatch&#39;<br>&gt;    import CDispatch<br>&gt;           ^<br>&gt;    Makefile:956: recipe for target<br>&gt;    &#39;/build/Ninja-DebugAssert/libdispatch-linux-x86_64/src/swift/Block.o&#39; failed<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/8f794e47/attachment.html&gt;<br>-------------- next part --------------<br>A non-text attachment was scrubbed...<br>Name: graycol.gif<br>Type: image/gif<br>Size: 105 bytes<br>Desc: not available<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/8f794e47/attachment.gif&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js?vsn=d"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
