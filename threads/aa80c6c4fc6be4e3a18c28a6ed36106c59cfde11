<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css?vsn=d">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg?vsn=d" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>May 29, 2016 at 06:00:00pm</p></header><div class="content"><p>Hi All,<br></p><p>I am new to this forum.<br></p><p>I am trying to build the xctest project. I followed the instructions at<br>https://github.com/apple/swift-corelibs-xctest<br></p><p>I am able to successfully build via the build scripts. But, if I build<br>XCTest using xcode using the SwiftXCTest scheme I am getting a few errors.<br></p><p>1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error:<br>cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>            let unmanaged = Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br></p><p>2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error: cannot<br>convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>    let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br></p><p>etc.<br></p><p>My dev environment,<br>OS: Mac OSX El Capitan 10.11.4 (15E65).<br>Xcode Version: Version 7.3.1 (7D1014)<br>XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br></p><p>Any help is appreciated.<br></p><p>Regards,<br>Madhu<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160529/aa80de11/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/f921fa5d507b31ef6984fd3d77ae710c?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Gesiak</string> &lt;modocache at gmail.com&gt;<p>May 29, 2016 at 02:00:00pm</p></header><div class="content"><p>Madhu,<br>Thanks for the report!<br>The main difference between the build scripts (which use xcodebuild) and using Xcode itself is the version of Swift that is used. The build scripts build a Swift 3.0 compiler, then use that to build XCTest. When using Xcode directly, you need to select a recent Swift toolchain yourself.<br>Which Swift toolchain are you using to compile XCTest in Xcode?<br>Our tests only make sure apple/swift master works. If the latest Swift toolchain from http://swift.org doesn&#39;t work, you may have to built your own toolchain. You can do so using the `utils/build-toolchain` script in the Swift repository.<br>Once you figure out your Swift toolchain version, let us know! You should be able to find out in the preferences pane in Xcode.<br>- Brian Gesiak<br></p><p><br></p><p><br></p><p>On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br>Hi All,<br>I am new to this forum. <br>I am trying to build the xctest project. I followed the instructions at https://github.com/apple/swift-corelibs-xctest<br>I am able to successfully build via the build scripts. But, if I build XCTest using xcode using the SwiftXCTest scheme I am getting a few errors. <br>1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;            let unmanaged = Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;    let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>etc.<br>My dev environment, OS: Mac OSX El Capitan 10.11.4 (15E65).Xcode Version: Version 7.3.1 (7D1014)XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>Any help is appreciated.<br>Regards,Madhu<br></p><p><br></p><p><br></p><p><br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160529/fd3a022c/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/f921fa5d507b31ef6984fd3d77ae710c?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Gesiak</string> &lt;modocache at gmail.com&gt;<p>May 29, 2016 at 02:00:00pm</p></header><div class="content"><p>Madhu,<br>Oy, my bad -- I only just noticed you put the toolchain version at the bottom of your original email.<br>It&#39;s possible the May 9th toolchain is already too old to build XCTest. I&#39;ll double-check myself. In the meantime, you may want to try building your own toolchain and using that.<br>- Brian Gesiak<br></p><p><br></p><p><br></p><p><br>On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;modocache at gmail.com&gt; wrote:<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br>Madhu,<br>Thanks for the report!<br>The main difference between the build scripts (which use xcodebuild) and using Xcode itself is the version of Swift that is used. The build scripts build a Swift 3.0 compiler, then use that to build XCTest. When using Xcode directly, you need to select a recent Swift toolchain yourself.<br>Which Swift toolchain are you using to compile XCTest in Xcode?<br>Our tests only make sure apple/swift master works. If the latest Swift toolchain from http://swift.org doesn&#39;t work, you may have to built your own toolchain. You can do so using the `utils/build-toolchain` script in the Swift repository.<br>Once you figure out your Swift toolchain version, let us know! You should be able to find out in the preferences pane in Xcode.<br>- Brian Gesiak<br></p><p><br></p><p><br></p><p>On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br>Hi All,<br>I am new to this forum. <br>I am trying to build the xctest project. I followed the instructions at https://github.com/apple/swift-corelibs-xctest<br>I am able to successfully build via the build scripts. But, if I build XCTest using xcode using the SwiftXCTest scheme I am getting a few errors. <br>1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;            let unmanaged = Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;    let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>etc.<br>My dev environment, OS: Mac OSX El Capitan 10.11.4 (15E65).Xcode Version: Version 7.3.1 (7D1014)XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>Any help is appreciated.<br>Regards,Madhu<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160529/289edaee/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3eb0623e24ffb4072ad81b19959d192f?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Croom</string> &lt;brian.s.croom at gmail.com&gt;<p>May 29, 2016 at 11:00:00am</p></header><div class="content"><p>That&#39;s right, breaking changes have been made to Swift since the latest<br>toolchain snapshot was released, and Corelibs Foundation has been updated<br>accordingly.<br></p><p>Until the next snapshot, an alternative to building your own toolchain<br>would be to check out an older commit of Foundation which still builds with<br>the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend on any<br>of the more recent Foundation changes. I&#39;ve had success using this commit:<br>https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br></p><p><br>--Brian<br></p><p>söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>swift-corelibs-dev at swift.org&gt;:<br></p><p>&gt; Madhu,<br>&gt;<br>&gt; Oy, my bad -- I only just noticed you put the toolchain version at the<br>&gt; bottom of your original email.<br>&gt;<br>&gt; It&#39;s possible the May 9th toolchain is already too old to build XCTest.<br>&gt; I&#39;ll double-check myself. In the meantime, you may want to try building<br>&gt; your own toolchain and using that.<br>&gt;<br>&gt; - Brian Gesiak<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;modocache at gmail.com<br>&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;modocache at gmail.com&#39;);&gt;&gt; wrote:<br>&gt;<br>&gt; Madhu,<br>&gt;&gt;<br>&gt;&gt; Thanks for the report!<br>&gt;&gt;<br>&gt;&gt; The main difference between the build scripts (which use xcodebuild) and<br>&gt;&gt; using Xcode itself is the version of Swift that is used. The build scripts<br>&gt;&gt; build a Swift 3.0 compiler, then use that to build XCTest. When using Xcode<br>&gt;&gt; directly, you need to select a recent Swift toolchain yourself.<br>&gt;&gt;<br>&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;<br>&gt;&gt; Our tests only make sure apple/swift master works. If the latest Swift<br>&gt;&gt; toolchain from http://swift.org doesn&#39;t work, you may have to built your<br>&gt;&gt; own toolchain. You can do so using the `utils/build-toolchain` script in<br>&gt;&gt; the Swift repository.<br>&gt;&gt;<br>&gt;&gt; Once you figure out your Swift toolchain version, let us know! You should<br>&gt;&gt; be able to find out in the preferences pane in Xcode.<br>&gt;&gt;<br>&gt;&gt; - Brian Gesiak<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org<br>&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;swift-corelibs-dev at swift.org&#39;);&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt; Hi All,<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; I am trying to build the xctest project. I followed the instructions at<br>&gt;&gt;&gt; https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I build<br>&gt;&gt;&gt; XCTest using xcode using the SwiftXCTest scheme I am getting a few errors.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; 1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64:<br>&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error:<br>&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;     let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160529/c7637c6c/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>May 30, 2016 at 08:00:00am</p></header><div class="content"><p>Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br></p><p>My first quick attempt using build-toolchain script to build my own tool<br>chain failed. Anyway I will give it another try and let you know the status.<br></p><p>On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>wrote:<br></p><p>&gt; That&#39;s right, breaking changes have been made to Swift since the latest<br>&gt; toolchain snapshot was released, and Corelibs Foundation has been updated<br>&gt; accordingly.<br>&gt;<br>&gt; Until the next snapshot, an alternative to building your own toolchain<br>&gt; would be to check out an older commit of Foundation which still builds with<br>&gt; the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend on<br>&gt; any of the more recent Foundation changes. I&#39;ve had success using this<br>&gt; commit:<br>&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;<br>&gt;<br>&gt; --Brian<br>&gt;<br>&gt;<br>&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;<br>&gt;&gt; Madhu,<br>&gt;&gt;<br>&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at the<br>&gt;&gt; bottom of your original email.<br>&gt;&gt;<br>&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build XCTest.<br>&gt;&gt; I&#39;ll double-check myself. In the meantime, you may want to try building<br>&gt;&gt; your own toolchain and using that.<br>&gt;&gt;<br>&gt;&gt; - Brian Gesiak<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;<br>&gt;&gt; Madhu,<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; The main difference between the build scripts (which use xcodebuild) and<br>&gt;&gt;&gt; using Xcode itself is the version of Swift that is used. The build scripts<br>&gt;&gt;&gt; build a Swift 3.0 compiler, then use that to build XCTest. When using Xcode<br>&gt;&gt;&gt; directly, you need to select a recent Swift toolchain yourself.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest Swift<br>&gt;&gt;&gt; toolchain from http://swift.org doesn&#39;t work, you may have to built<br>&gt;&gt;&gt; your own toolchain. You can do so using the `utils/build-toolchain` script<br>&gt;&gt;&gt; in the Swift repository.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know! You<br>&gt;&gt;&gt; should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the instructions at<br>&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I build<br>&gt;&gt;&gt;&gt; XCTest using xcode using the SwiftXCTest scheme I am getting a few errors.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; 1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64:<br>&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error:<br>&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;     let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160530/0c64d0f4/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>June 21, 2016 at 12:00:00pm</p></header><div class="content"><p>So after spending almost a week trying to build swift and core libraries<br>(mainly xctest) during the end of May un-successfully, I made up my mind to<br>give another attempt today.<br></p><p>I checkout the latest code from swift repo. Since the xctest documentation<br>says, &quot;Confirm you&#39;re able to build the Swift project using<br>utils/build-script -R&quot;, that&#39;s where I started.<br></p><p>Unfortunately, build-script -R gives the below error.<br></p><p>&lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br></p><p><br>My active developer directory is<br>&#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>The toolchain is &#39;Xode 8.0&#39;<br></p><p>The build is taken in Mac OSX El Capitan 10.11.4<br></p><p>Let me know whether I miss anything? I assume getting the build working for<br>the first time is the hardest, but there I am!<br></p><p>Any help is appreciated!<br></p><p>Regards,<br>Madhu<br></p><p>On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br></p><p>&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br>&gt;<br>&gt; My first quick attempt using build-toolchain script to build my own tool<br>&gt; chain failed. Anyway I will give it another try and let you know the status.<br>&gt;<br>&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt; wrote:<br>&gt;<br>&gt;&gt; That&#39;s right, breaking changes have been made to Swift since the latest<br>&gt;&gt; toolchain snapshot was released, and Corelibs Foundation has been updated<br>&gt;&gt; accordingly.<br>&gt;&gt;<br>&gt;&gt; Until the next snapshot, an alternative to building your own toolchain<br>&gt;&gt; would be to check out an older commit of Foundation which still builds with<br>&gt;&gt; the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend on<br>&gt;&gt; any of the more recent Foundation changes. I&#39;ve had success using this<br>&gt;&gt; commit:<br>&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; --Brian<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;<br>&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at the<br>&gt;&gt;&gt; bottom of your original email.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build XCTest.<br>&gt;&gt;&gt; I&#39;ll double-check myself. In the meantime, you may want to try building<br>&gt;&gt;&gt; your own toolchain and using that.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; The main difference between the build scripts (which use xcodebuild)<br>&gt;&gt;&gt;&gt; and using Xcode itself is the version of Swift that is used. The build<br>&gt;&gt;&gt;&gt; scripts build a Swift 3.0 compiler, then use that to build XCTest. When<br>&gt;&gt;&gt;&gt; using Xcode directly, you need to select a recent Swift toolchain yourself.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest Swift<br>&gt;&gt;&gt;&gt; toolchain from http://swift.org doesn&#39;t work, you may have to built<br>&gt;&gt;&gt;&gt; your own toolchain. You can do so using the `utils/build-toolchain` script<br>&gt;&gt;&gt;&gt; in the Swift repository.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know! You<br>&gt;&gt;&gt;&gt; should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the instructions<br>&gt;&gt;&gt;&gt;&gt; at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I build<br>&gt;&gt;&gt;&gt;&gt; XCTest using xcode using the SwiftXCTest scheme I am getting a few errors.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; 1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64:<br>&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error:<br>&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;     let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160621/51cba729/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3eb0623e24ffb4072ad81b19959d192f?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Croom</string> &lt;brian.s.croom at gmail.com&gt;<p>June 20, 2016 at 10:00:00pm</p></header><div class="content"><p>Hmm, have you tried deleting your `build/swift-macosx-x86_64/` directory? I<br>wonder if cached CMake values could cause that issue.<br></p><p>(By the way, I can confirm that getting the build going for the first time<br>is the most challenging! I hope we can get things going for you soon.)<br></p><p>2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br></p><p>&gt; So after spending almost a week trying to build swift and core libraries<br>&gt; (mainly xctest) during the end of May un-successfully, I made up my mind to<br>&gt; give another attempt today.<br>&gt;<br>&gt; I checkout the latest code from swift repo. Since the xctest documentation<br>&gt; says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;<br>&gt; Unfortunately, build-script -R gives the below error.<br>&gt;<br>&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;<br>&gt;<br>&gt; My active developer directory is<br>&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;<br>&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;<br>&gt; Let me know whether I miss anything? I assume getting the build working<br>&gt; for the first time is the hardest, but there I am!<br>&gt;<br>&gt; Any help is appreciated!<br>&gt;<br>&gt; Regards,<br>&gt; Madhu<br>&gt;<br>&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt; wrote:<br>&gt;<br>&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br>&gt;&gt;<br>&gt;&gt; My first quick attempt using build-toolchain script to build my own tool<br>&gt;&gt; chain failed. Anyway I will give it another try and let you know the status.<br>&gt;&gt;<br>&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since the latest<br>&gt;&gt;&gt; toolchain snapshot was released, and Corelibs Foundation has been updated<br>&gt;&gt;&gt; accordingly.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Until the next snapshot, an alternative to building your own toolchain<br>&gt;&gt;&gt; would be to check out an older commit of Foundation which still builds with<br>&gt;&gt;&gt; the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend on<br>&gt;&gt;&gt; any of the more recent Foundation changes. I&#39;ve had success using this<br>&gt;&gt;&gt; commit:<br>&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at the<br>&gt;&gt;&gt;&gt; bottom of your original email.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build XCTest.<br>&gt;&gt;&gt;&gt; I&#39;ll double-check myself. In the meantime, you may want to try building<br>&gt;&gt;&gt;&gt; your own toolchain and using that.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use xcodebuild)<br>&gt;&gt;&gt;&gt;&gt; and using Xcode itself is the version of Swift that is used. The build<br>&gt;&gt;&gt;&gt;&gt; scripts build a Swift 3.0 compiler, then use that to build XCTest. When<br>&gt;&gt;&gt;&gt;&gt; using Xcode directly, you need to select a recent Swift toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest Swift<br>&gt;&gt;&gt;&gt;&gt; toolchain from http://swift.org doesn&#39;t work, you may have to built<br>&gt;&gt;&gt;&gt;&gt; your own toolchain. You can do so using the `utils/build-toolchain` script<br>&gt;&gt;&gt;&gt;&gt; in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know! You<br>&gt;&gt;&gt;&gt;&gt; should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the instructions<br>&gt;&gt;&gt;&gt;&gt;&gt; at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I<br>&gt;&gt;&gt;&gt;&gt;&gt; build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; 1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64:<br>&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error:<br>&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;     let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160620/133a3845/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>June 21, 2016 at 12:00:00pm</p></header><div class="content"><p>Hi Brian Croom,<br></p><p>Thanks for the quick response. I deleted the entire build directory now.<br>Initiated a new build. Fingers crossed...<br></p><p>Will update the status as soon as the build finishes.<br></p><p>On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>wrote:<br></p><p>&gt; Hmm, have you tried deleting your `build/swift-macosx-x86_64/` directory?<br>&gt; I wonder if cached CMake values could cause that issue.<br>&gt;<br>&gt; (By the way, I can confirm that getting the build going for the first time<br>&gt; is the most challenging! I hope we can get things going for you soon.)<br>&gt;<br>&gt; 2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br>&gt;<br>&gt;&gt; So after spending almost a week trying to build swift and core libraries<br>&gt;&gt; (mainly xctest) during the end of May un-successfully, I made up my mind to<br>&gt;&gt; give another attempt today.<br>&gt;&gt;<br>&gt;&gt; I checkout the latest code from swift repo. Since the xctest<br>&gt;&gt; documentation says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt;&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;&gt;<br>&gt;&gt; Unfortunately, build-script -R gives the below error.<br>&gt;&gt;<br>&gt;&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; My active developer directory is<br>&gt;&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt;&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;&gt;<br>&gt;&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;&gt;<br>&gt;&gt; Let me know whether I miss anything? I assume getting the build working<br>&gt;&gt; for the first time is the hardest, but there I am!<br>&gt;&gt;<br>&gt;&gt; Any help is appreciated!<br>&gt;&gt;<br>&gt;&gt; Regards,<br>&gt;&gt; Madhu<br>&gt;&gt;<br>&gt;&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; My first quick attempt using build-toolchain script to build my own tool<br>&gt;&gt;&gt; chain failed. Anyway I will give it another try and let you know the status.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since the latest<br>&gt;&gt;&gt;&gt; toolchain snapshot was released, and Corelibs Foundation has been updated<br>&gt;&gt;&gt;&gt; accordingly.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Until the next snapshot, an alternative to building your own toolchain<br>&gt;&gt;&gt;&gt; would be to check out an older commit of Foundation which still builds with<br>&gt;&gt;&gt;&gt; the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend on<br>&gt;&gt;&gt;&gt; any of the more recent Foundation changes. I&#39;ve had success using this<br>&gt;&gt;&gt;&gt; commit:<br>&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at the<br>&gt;&gt;&gt;&gt;&gt; bottom of your original email.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build<br>&gt;&gt;&gt;&gt;&gt; XCTest. I&#39;ll double-check myself. In the meantime, you may want to try<br>&gt;&gt;&gt;&gt;&gt; building your own toolchain and using that.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use xcodebuild)<br>&gt;&gt;&gt;&gt;&gt;&gt; and using Xcode itself is the version of Swift that is used. The build<br>&gt;&gt;&gt;&gt;&gt;&gt; scripts build a Swift 3.0 compiler, then use that to build XCTest. When<br>&gt;&gt;&gt;&gt;&gt;&gt; using Xcode directly, you need to select a recent Swift toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest<br>&gt;&gt;&gt;&gt;&gt;&gt; Swift toolchain from http://swift.org doesn&#39;t work, you may have to<br>&gt;&gt;&gt;&gt;&gt;&gt; built your own toolchain. You can do so using the `utils/build-toolchain`<br>&gt;&gt;&gt;&gt;&gt;&gt; script in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know! You<br>&gt;&gt;&gt;&gt;&gt;&gt; should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the instructions<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;     let t =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160621/4e305dc3/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>June 21, 2016 at 02:00:00pm</p></header><div class="content"><p>Wow, the swift build is a success. Though there are a few warnings at the<br>end. I guess the issue was with cached values in the build directory.<br></p><p>But, in the next step to build xctest using &quot;/utils/build-script --preset<br>corelibs-xctest&quot;, the build fails. The build error log is given below.<br></p><p>------------------------<br></p><p>CompileSwift normal x86_64<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>....<br>....<br></p><p>&lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>invocation)<br>** BUILD FAILED **<br></p><p><br>The following build commands failed:<br>CompileSwift normal x86_64<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>(2 failures)<br>Traceback (most recent call last):<br>  File<br>&quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>445, in &lt;module&gt;<br>    main()<br>  File<br>&quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>441, in main<br>    parsed_args.func(parsed_args)<br>  File<br>&quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>64, in build<br>    source_dir=SOURCE_DIR))<br>  File<br>&quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>30, in run<br>    subprocess.check_call(command, shell=True)<br>  File<br>&quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>line 540, in check_call<br>    raise CalledProcessError(retcode, cmd)<br>subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>-scheme SwiftXCTest<br>SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>SWIFT_LINK_OBJC_RUNTIME=YES<br>SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>returned non-zero exit status 65<br>../swift/utils/build-script: fatal error: command terminated with a<br>non-zero exit status 1, aborting<br>../swift/utils/build-script: fatal error: command terminated with a<br>non-zero exit status 1, aborting<br></p><p><br></p><p>On Tue, Jun 21, 2016 at 12:35 PM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>wrote:<br></p><p>&gt; Hi Brian Croom,<br>&gt;<br>&gt; Thanks for the quick response. I deleted the entire build directory now.<br>&gt; Initiated a new build. Fingers crossed...<br>&gt;<br>&gt; Will update the status as soon as the build finishes.<br>&gt;<br>&gt; On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt; wrote:<br>&gt;<br>&gt;&gt; Hmm, have you tried deleting your `build/swift-macosx-x86_64/` directory?<br>&gt;&gt; I wonder if cached CMake values could cause that issue.<br>&gt;&gt;<br>&gt;&gt; (By the way, I can confirm that getting the build going for the first<br>&gt;&gt; time is the most challenging! I hope we can get things going for you soon.)<br>&gt;&gt;<br>&gt;&gt; 2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br>&gt;&gt;<br>&gt;&gt;&gt; So after spending almost a week trying to build swift and core libraries<br>&gt;&gt;&gt; (mainly xctest) during the end of May un-successfully, I made up my mind to<br>&gt;&gt;&gt; give another attempt today.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; I checkout the latest code from swift repo. Since the xctest<br>&gt;&gt;&gt; documentation says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt;&gt;&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Unfortunately, build-script -R gives the below error.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; My active developer directory is<br>&gt;&gt;&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt;&gt;&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Let me know whether I miss anything? I assume getting the build working<br>&gt;&gt;&gt; for the first time is the hardest, but there I am!<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Any help is appreciated!<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; My first quick attempt using build-toolchain script to build my own<br>&gt;&gt;&gt;&gt; tool chain failed. Anyway I will give it another try and let you know the<br>&gt;&gt;&gt;&gt; status.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since<br>&gt;&gt;&gt;&gt;&gt; the latest toolchain snapshot was released, and Corelibs Foundation has<br>&gt;&gt;&gt;&gt;&gt; been updated accordingly.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Until the next snapshot, an alternative to building your own toolchain<br>&gt;&gt;&gt;&gt;&gt; would be to check out an older commit of Foundation which still builds with<br>&gt;&gt;&gt;&gt;&gt; the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend<br>&gt;&gt;&gt;&gt;&gt; on any of the more recent Foundation changes. I&#39;ve had success using this<br>&gt;&gt;&gt;&gt;&gt; commit:<br>&gt;&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at<br>&gt;&gt;&gt;&gt;&gt;&gt; the bottom of your original email.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build<br>&gt;&gt;&gt;&gt;&gt;&gt; XCTest. I&#39;ll double-check myself. In the meantime, you may want to try<br>&gt;&gt;&gt;&gt;&gt;&gt; building your own toolchain and using that.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use xcodebuild)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; and using Xcode itself is the version of Swift that is used. The build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; scripts build a Swift 3.0 compiler, then use that to build XCTest. When<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; using Xcode directly, you need to select a recent Swift toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Swift toolchain from http://swift.org doesn&#39;t work, you may have to<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; built your own toolchain. You can do so using the `utils/build-toolchain`<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; script in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know! You<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; instructions at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;     let t =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160621/a3423b52/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/f921fa5d507b31ef6984fd3d77ae710c?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Gesiak</string> &lt;modocache at gmail.com&gt;<p>June 30, 2016 at 09:00:00am</p></header><div class="content"><p>Madhu,<br></p><p>Sorry for the late reply to this -- I obviously need to update my email<br>settings! :(<br></p><p>Could you pull down the latest changes to Swift, and let me know if you&#39;re<br>still experiencing difficulties compiling corelibs-xctest?<br></p><p>- Brian Gesiak<br></p><p><br>On Tue, Jun 21, 2016 at 12:03 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>wrote:<br></p><p>&gt; Wow, the swift build is a success. Though there are a few warnings at the<br>&gt; end. I guess the issue was with cached values in the build directory.<br>&gt;<br>&gt; But, in the next step to build xctest using &quot;/utils/build-script --preset<br>&gt; corelibs-xctest&quot;, the build fails. The build error log is given below.<br>&gt;<br>&gt; ------------------------<br>&gt;<br>&gt; CompileSwift normal x86_64<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt; ....<br>&gt; ....<br>&gt;<br>&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>&gt; invocation)<br>&gt; ** BUILD FAILED **<br>&gt;<br>&gt;<br>&gt; The following build commands failed:<br>&gt; CompileSwift normal x86_64<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt; (2 failures)<br>&gt; Traceback (most recent call last):<br>&gt;   File<br>&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt; 445, in &lt;module&gt;<br>&gt;     main()<br>&gt;   File<br>&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt; 441, in main<br>&gt;     parsed_args.func(parsed_args)<br>&gt;   File<br>&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt; 64, in build<br>&gt;     source_dir=SOURCE_DIR))<br>&gt;   File<br>&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt; 30, in run<br>&gt;     subprocess.check_call(command, shell=True)<br>&gt;   File<br>&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt; line 540, in check_call<br>&gt;     raise CalledProcessError(retcode, cmd)<br>&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt; -scheme SwiftXCTest<br>&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt; returned non-zero exit status 65<br>&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt; non-zero exit status 1, aborting<br>&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt; non-zero exit status 1, aborting<br>&gt;<br>&gt;<br>&gt;<br>&gt; On Tue, Jun 21, 2016 at 12:35 PM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt; wrote:<br>&gt;<br>&gt;&gt; Hi Brian Croom,<br>&gt;&gt;<br>&gt;&gt; Thanks for the quick response. I deleted the entire build directory now.<br>&gt;&gt; Initiated a new build. Fingers crossed...<br>&gt;&gt;<br>&gt;&gt; Will update the status as soon as the build finishes.<br>&gt;&gt;<br>&gt;&gt; On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; Hmm, have you tried deleting your `build/swift-macosx-x86_64/`<br>&gt;&gt;&gt; directory? I wonder if cached CMake values could cause that issue.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; (By the way, I can confirm that getting the build going for the first<br>&gt;&gt;&gt; time is the most challenging! I hope we can get things going for you soon.)<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; 2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; So after spending almost a week trying to build swift and core<br>&gt;&gt;&gt;&gt; libraries (mainly xctest) during the end of May un-successfully, I made up<br>&gt;&gt;&gt;&gt; my mind to give another attempt today.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; I checkout the latest code from swift repo. Since the xctest<br>&gt;&gt;&gt;&gt; documentation says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt;&gt;&gt;&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Unfortunately, build-script -R gives the below error.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; My active developer directory is<br>&gt;&gt;&gt;&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt;&gt;&gt;&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Let me know whether I miss anything? I assume getting the build working<br>&gt;&gt;&gt;&gt; for the first time is the hardest, but there I am!<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Any help is appreciated!<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; My first quick attempt using build-toolchain script to build my own<br>&gt;&gt;&gt;&gt;&gt; tool chain failed. Anyway I will give it another try and let you know the<br>&gt;&gt;&gt;&gt;&gt; status.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt;&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since<br>&gt;&gt;&gt;&gt;&gt;&gt; the latest toolchain snapshot was released, and Corelibs Foundation has<br>&gt;&gt;&gt;&gt;&gt;&gt; been updated accordingly.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Until the next snapshot, an alternative to building your own<br>&gt;&gt;&gt;&gt;&gt;&gt; toolchain would be to check out an older commit of Foundation which still<br>&gt;&gt;&gt;&gt;&gt;&gt; builds with the compiler in the snapshot toolchain, since XCTest<br>&gt;&gt;&gt;&gt;&gt;&gt; doesn&#39;t depend on any of the more recent Foundation changes. I&#39;ve had<br>&gt;&gt;&gt;&gt;&gt;&gt; success using this commit:<br>&gt;&gt;&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; the bottom of your original email.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. I&#39;ll double-check myself. In the meantime, you may want to try<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; building your own toolchain and using that.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xcodebuild) and using Xcode itself is the version of Swift that is used.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build scripts build a Swift 3.0 compiler, then use that to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. When using Xcode directly, you need to select a recent Swift<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Swift toolchain from http://swift.org doesn&#39;t work, you may have<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to built your own toolchain. You can do so using the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; `utils/build-toolchain` script in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know! You<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; instructions at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;     let t =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160630/a0bbe62f/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>July  2, 2016 at 08:00:00am</p></header><div class="content"><p>Hi Brian,<br></p><p>Thanks for you response.<br></p><p>Still I cannot compile corelibs-xctest with xcode-beta. It seems the error<br>is too generic to debug! If xctest is not yet configured against xcode 8<br>beta, probably, I will wait. At this point, I am lazy to create my own<br>toolchain, since my last attempt went bust!<br></p><p><br>The steps I followed<br></p><p>1. delete swift/build<br>2. utils/update-checkout<br>3. sudo  xcode-select -s<br>/Applications/Xcode-beta.app/Contents/Developer<br>4. utils/build-script -r -t   (success)<br>5. utils/build-script -R.    (success)<br>6.<br>$ cd swift-corelibs-xctest<br>$ ../swift/utils/build-script --preset corelibs-xctest<br></p><p><br>Environment<br></p><p>*Swift Version: Swift version 3.0 (swiftlang-800.0.30 clang-800.0.24)*<br>Xcode Environment: Version 8.0 beta (8S128d)<br>Python Version: Python 2.7.10<br></p><p><br></p><p>The Error<br></p><p>CompileSwift normal x86_64<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br></p><p>.....<br>....<br></p><p><br>&lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>invocation)<br>** BUILD FAILED **<br></p><p><br>The following build commands failed:<br>CompileSwift normal x86_64<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>CompileSwift normal x86_64<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>(3 failures)<br>Traceback (most recent call last):<br>  File<br>&quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>445, in &lt;module&gt;<br>    main()<br>  File<br>&quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>441, in main<br>    parsed_args.func(parsed_args)<br>  File<br>&quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>64, in build<br>    source_dir=SOURCE_DIR))<br>  File<br>&quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>30, in run<br>    subprocess.check_call(command, shell=True)<br>  File<br>&quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>line 540, in check_call<br>    raise CalledProcessError(retcode, cmd)<br>subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>-scheme SwiftXCTest<br>SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>SWIFT_LINK_OBJC_RUNTIME=YES<br>SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>returned non-zero exit status 65<br>../swift/utils/build-script: fatal error: command terminated with a<br>non-zero exit status 1, aborting<br>../swift/utils/build-script: fatal error: command terminated with a<br>non-zero exit status 1, aborting<br></p><p><br>Regards,<br>Madhu<br></p><p>On Thu, Jun 30, 2016 at 11:38 PM, Brian Gesiak &lt;modocache at gmail.com&gt; wrote:<br></p><p>&gt; Madhu,<br>&gt;<br>&gt; Sorry for the late reply to this -- I obviously need to update my email<br>&gt; settings! :(<br>&gt;<br>&gt; Could you pull down the latest changes to Swift, and let me know if you&#39;re<br>&gt; still experiencing difficulties compiling corelibs-xctest?<br>&gt;<br>&gt; - Brian Gesiak<br>&gt;<br>&gt;<br>&gt; On Tue, Jun 21, 2016 at 12:03 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt; wrote:<br>&gt;<br>&gt;&gt; Wow, the swift build is a success. Though there are a few warnings at the<br>&gt;&gt; end. I guess the issue was with cached values in the build directory.<br>&gt;&gt;<br>&gt;&gt; But, in the next step to build xctest using &quot;/utils/build-script --preset<br>&gt;&gt; corelibs-xctest&quot;, the build fails. The build error log is given below.<br>&gt;&gt;<br>&gt;&gt; ------------------------<br>&gt;&gt;<br>&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;&gt; ....<br>&gt;&gt; ....<br>&gt;&gt;<br>&gt;&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt;&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>&gt;&gt; invocation)<br>&gt;&gt; ** BUILD FAILED **<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; The following build commands failed:<br>&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt;&gt; (2 failures)<br>&gt;&gt; Traceback (most recent call last):<br>&gt;&gt;   File<br>&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt; 445, in &lt;module&gt;<br>&gt;&gt;     main()<br>&gt;&gt;   File<br>&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt; 441, in main<br>&gt;&gt;     parsed_args.func(parsed_args)<br>&gt;&gt;   File<br>&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt; 64, in build<br>&gt;&gt;     source_dir=SOURCE_DIR))<br>&gt;&gt;   File<br>&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt; 30, in run<br>&gt;&gt;     subprocess.check_call(command, shell=True)<br>&gt;&gt;   File<br>&gt;&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt;&gt; line 540, in check_call<br>&gt;&gt;     raise CalledProcessError(retcode, cmd)<br>&gt;&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt;&gt; -scheme SwiftXCTest<br>&gt;&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt;&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt;&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt;&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt;&gt; returned non-zero exit status 65<br>&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; On Tue, Jun 21, 2016 at 12:35 PM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; Hi Brian Croom,<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Thanks for the quick response. I deleted the entire build directory now.<br>&gt;&gt;&gt; Initiated a new build. Fingers crossed...<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Will update the status as soon as the build finishes.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Hmm, have you tried deleting your `build/swift-macosx-x86_64/`<br>&gt;&gt;&gt;&gt; directory? I wonder if cached CMake values could cause that issue.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; (By the way, I can confirm that getting the build going for the first<br>&gt;&gt;&gt;&gt; time is the most challenging! I hope we can get things going for you soon.)<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; 2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; So after spending almost a week trying to build swift and core<br>&gt;&gt;&gt;&gt;&gt; libraries (mainly xctest) during the end of May un-successfully, I made up<br>&gt;&gt;&gt;&gt;&gt; my mind to give another attempt today.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; I checkout the latest code from swift repo. Since the xctest<br>&gt;&gt;&gt;&gt;&gt; documentation says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt;&gt;&gt;&gt;&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Unfortunately, build-script -R gives the below error.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; My active developer directory is<br>&gt;&gt;&gt;&gt;&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt;&gt;&gt;&gt;&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Let me know whether I miss anything? I assume getting the build<br>&gt;&gt;&gt;&gt;&gt; working for the first time is the hardest, but there I am!<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Any help is appreciated!<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; My first quick attempt using build-toolchain script to build my own<br>&gt;&gt;&gt;&gt;&gt;&gt; tool chain failed. Anyway I will give it another try and let you know the<br>&gt;&gt;&gt;&gt;&gt;&gt; status.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com<br>&gt;&gt;&gt;&gt;&gt;&gt; &gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; the latest toolchain snapshot was released, and Corelibs Foundation has<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; been updated accordingly.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Until the next snapshot, an alternative to building your own<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain would be to check out an older commit of Foundation which still<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; builds with the compiler in the snapshot toolchain, since XCTest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; doesn&#39;t depend on any of the more recent Foundation changes. I&#39;ve had<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; success using this commit:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the bottom of your original email.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. I&#39;ll double-check myself. In the meantime, you may want to try<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; building your own toolchain and using that.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xcodebuild) and using Xcode itself is the version of Swift that is used.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build scripts build a Swift 3.0 compiler, then use that to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. When using Xcode directly, you need to select a recent Swift<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Swift toolchain from http://swift.org doesn&#39;t work, you may have<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to built your own toolchain. You can do so using the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; `utils/build-toolchain` script in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know! You<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; instructions at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;     let t =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160702/77d425e7/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>July  2, 2016 at 08:00:00am</p></header><div class="content"><p>I just found more error details in the log. You can find it below. Hope<br>this helps.<br></p><p>Error 1<br>--------------------------------------<br></p><p>CompileSwift normal x86_64<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>    cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest<br>    ...<br>    ...<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift:65:71:<br>error: &#39;lastPathComponent&#39; is unavailable: Use lastPathComponent on URL<br>instead.<br>        currentTestSuite = XCTestSuite(name:<br>&quot;\(testBundle.bundlePath.lastPathComponent).xctest&quot;)<br></p><p>^~~~~~~~~~~~~~~~~<br>SwiftFoundation.String:173:16: note: &#39;lastPathComponent&#39; has been<br>explicitly marked unavailable here<br>    public var lastPathComponent: String { get }<br>               ^<br></p><p><br>Error 2<br>--------------------------------------<br>CompileSwift normal x86_64<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>    cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest<br>    ...<br>    ...<br>    /Objects-normal/x86_64/TestListing.swiftdeps -o<br>/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64/XCTest.build/Debug/SwiftXCTest.build/Objects-normal/x86_64/TestListing.o<br>/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift:45:46:<br>error: cannot convert value of type &#39;String.Encoding&#39; to expected argument<br>type &#39;UInt&#39;<br>        print(NSString(data: json, encoding: NSUTF8StringEncoding)!)<br>                                             ^~~~~~~~~~~~~~~~~~~~<br>                                                                 .rawValue<br>Assertion failed: (!failed &amp;&amp; &quot;Call arguments did not match up?&quot;), function<br>coerceCallArguments, file<br>/Users/madhusamuel/dev/swift/swift/lib/Sema/CSApply.cpp, line 4655.<br>0  swift                    0x000000010b6a6d5b<br>llvm::sys::PrintStackTrace(llvm::raw_ostream&amp;) + 43<br>1  swift                    0x000000010b6a5f86<br>llvm::sys::RunSignalHandlers() + 70<br>2  swift                    0x000000010b6a7631 SignalHandler(int) + 641<br>3  libsystem_platform.dylib 0x00007fff8ecf552a _sigtramp + 26<br>4  swift                    0x000000010c290579 cmark_strbuf__initbuf + 73960<br>5  swift                    0x000000010b6a727e abort + 14<br>6  swift                    0x000000010b6a7261 __assert_rtn + 81<br>7  swift                    0x0000000108ff5bae (anonymous<br>namespace)::ExprRewriter::coerceCallArguments(swift::Expr*, swift::Type,<br>llvm::PointerUnion&lt;swift::ApplyExpr*, llvm::PointerEmbeddedInt&lt;unsigned<br>int, 2&gt; &gt;, swift::constraints::ConstraintLocatorBuilder) + 6190<br>8  swift                    0x0000000108fe4b0d (anonymous<br>namespace)::ExprRewriter::finishApply(swift::ApplyExpr*, swift::Type,<br>swift::constraints::ConstraintLocatorBuilder) + 541<br>9  swift                    0x0000000108ff638e (anonymous<br>namespace)::ExprRewriter::visitApplyExpr(swift::ApplyExpr*) + 78<br>10 swift                    0x0000000108fe2325 (anonymous<br>namespace)::ExprRewriter::walkToExprPost(swift::Expr*) + 21<br>11 swift                    0x0000000109180db0 (anonymous<br>namespace)::Traversal::visit(swift::Expr*) + 160<br>12 swift                    0x0000000109182969 (anonymous<br>namespace)::Traversal::visit(swift::Expr*) + 7257<br>13 swift                    0x0000000109180145<br>swift::Expr::walk(swift::ASTWalker&amp;) + 53<br>14 swift                    0x0000000108fdedcb<br>swift::constraints::ConstraintSystem::applySolution(swift::constraints::Solution&amp;,<br>swift::Expr*, swift::Type, bool, bool, bool) + 475<br>15 swift                    0x0000000109081e53<br>swift::TypeChecker::typeCheckExpression(swift::Expr*&amp;, swift::DeclContext*,<br>swift::TypeLoc, swift::ContextualTypePurpose,<br>swift::OptionSet&lt;swift::TypeCheckExprFlags, unsigned int&gt;,<br>swift::ExprTypeCheckListener*) + 739<br>16 swift                    0x00000001090f9fc4 swift::ASTVisitor&lt;(anonymous<br>namespace)::StmtChecker, void, swift::Stmt*, void, void, void,<br>void&gt;::visit(swift::Stmt*) + 4820<br>17 swift                    0x00000001090f8e3e swift::ASTVisitor&lt;(anonymous<br>namespace)::StmtChecker, void, swift::Stmt*, void, void, void,<br>void&gt;::visit(swift::Stmt*) + 334<br>18 swift                    0x00000001090f93d3 swift::ASTVisitor&lt;(anonymous<br>namespace)::StmtChecker, void, swift::Stmt*, void, void, void,<br>void&gt;::visit(swift::Stmt*) + 1763<br>19 swift                    0x00000001090f8e3e swift::ASTVisitor&lt;(anonymous<br>namespace)::StmtChecker, void, swift::Stmt*, void, void, void,<br>void&gt;::visit(swift::Stmt*) + 334<br>20 swift                    0x00000001090f81f9 (anonymous<br>namespace)::StmtChecker::typeCheckBody(swift::BraceStmt*&amp;) + 25<br>21 swift                    0x00000001090f74df<br>swift::TypeChecker::typeCheckFunctionBodyUntil(swift::FuncDecl*,<br>swift::SourceLoc) + 383<br>22 swift                    0x00000001090f7303<br>swift::TypeChecker::typeCheckAbstractFunctionBodyUntil(swift::AbstractFunctionDecl*,<br>swift::SourceLoc) + 35<br>23 swift                    0x00000001090f7e84<br>swift::TypeChecker::typeCheckAbstractFunctionBody(swift::AbstractFunctionDecl*)<br>+ 180<br>24 swift                    0x00000001090b3116<br>typeCheckFunctionsAndExternalDecls(swift::TypeChecker&amp;) + 166<br>25 swift                    0x00000001090b3db0<br>swift::performTypeChecking(swift::SourceFile&amp;, swift::TopLevelContext&amp;,<br>swift::OptionSet&lt;swift::TypeCheckingFlags, unsigned int&gt;, unsigned int,<br>unsigned int) + 1568<br>26 swift                    0x0000000108d714bc<br>swift::CompilerInstance::performSema() + 3916<br>27 swift                    0x0000000108885c8a<br>performCompile(swift::CompilerInstance&amp;, swift::CompilerInvocation&amp;,<br>llvm::ArrayRef&lt;char const*&gt;, int&amp;, swift::FrontendObserver*) + 442<br>28 swift                    0x000000010888483f<br>swift::performFrontend(llvm::ArrayRef&lt;char const*&gt;, char const*, void*,<br>swift::FrontendObserver*) + 2895<br>29 swift                    0x0000000108847300 main + 2448<br>30 libdyld.dylib            0x00007fff8bdc95ad start + 1<br>Stack dump:<br></p><p><br></p><p><br>On Sat, Jul 2, 2016 at 8:29 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br></p><p>&gt; Hi Brian,<br>&gt;<br>&gt; Thanks for you response.<br>&gt;<br>&gt; Still I cannot compile corelibs-xctest with xcode-beta. It seems the error<br>&gt; is too generic to debug! If xctest is not yet configured against xcode 8<br>&gt; beta, probably, I will wait. At this point, I am lazy to create my own<br>&gt; toolchain, since my last attempt went bust!<br>&gt;<br>&gt;<br>&gt; The steps I followed<br>&gt;<br>&gt; 1. delete swift/build<br>&gt; 2. utils/update-checkout<br>&gt; 3. sudo  xcode-select -s<br>&gt; /Applications/Xcode-beta.app/Contents/Developer<br>&gt; 4. utils/build-script -r -t   (success)<br>&gt; 5. utils/build-script -R.    (success)<br>&gt; 6.<br>&gt; $ cd swift-corelibs-xctest<br>&gt; $ ../swift/utils/build-script --preset corelibs-xctest<br>&gt;<br>&gt;<br>&gt; Environment<br>&gt;<br>&gt; *Swift Version: Swift version 3.0 (swiftlang-800.0.30 clang-800.0.24)*<br>&gt; Xcode Environment: Version 8.0 beta (8S128d)<br>&gt; Python Version: Python 2.7.10<br>&gt;<br>&gt;<br>&gt;<br>&gt; The Error<br>&gt;<br>&gt; CompileSwift normal x86_64<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;<br>&gt; .....<br>&gt; ....<br>&gt;<br>&gt;<br>&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>&gt; invocation)<br>&gt; ** BUILD FAILED **<br>&gt;<br>&gt;<br>&gt; The following build commands failed:<br>&gt; CompileSwift normal x86_64<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>&gt; CompileSwift normal x86_64<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt; (3 failures)<br>&gt; Traceback (most recent call last):<br>&gt;   File<br>&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt; 445, in &lt;module&gt;<br>&gt;     main()<br>&gt;   File<br>&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt; 441, in main<br>&gt;     parsed_args.func(parsed_args)<br>&gt;   File<br>&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt; 64, in build<br>&gt;     source_dir=SOURCE_DIR))<br>&gt;   File<br>&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt; 30, in run<br>&gt;     subprocess.check_call(command, shell=True)<br>&gt;   File<br>&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt; line 540, in check_call<br>&gt;     raise CalledProcessError(retcode, cmd)<br>&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt; -scheme SwiftXCTest<br>&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt; returned non-zero exit status 65<br>&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt; non-zero exit status 1, aborting<br>&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt; non-zero exit status 1, aborting<br>&gt;<br>&gt;<br>&gt; Regards,<br>&gt; Madhu<br>&gt;<br>&gt; On Thu, Jun 30, 2016 at 11:38 PM, Brian Gesiak &lt;modocache at gmail.com&gt;<br>&gt; wrote:<br>&gt;<br>&gt;&gt; Madhu,<br>&gt;&gt;<br>&gt;&gt; Sorry for the late reply to this -- I obviously need to update my email<br>&gt;&gt; settings! :(<br>&gt;&gt;<br>&gt;&gt; Could you pull down the latest changes to Swift, and let me know if<br>&gt;&gt; you&#39;re still experiencing difficulties compiling corelibs-xctest?<br>&gt;&gt;<br>&gt;&gt; - Brian Gesiak<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; On Tue, Jun 21, 2016 at 12:03 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; Wow, the swift build is a success. Though there are a few warnings at<br>&gt;&gt;&gt; the end. I guess the issue was with cached values in the build directory.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; But, in the next step to build xctest using &quot;/utils/build-script<br>&gt;&gt;&gt; --preset corelibs-xctest&quot;, the build fails. The build error log is given<br>&gt;&gt;&gt; below.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; ------------------------<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;&gt;&gt; ....<br>&gt;&gt;&gt; ....<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt;&gt;&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>&gt;&gt;&gt; invocation)<br>&gt;&gt;&gt; ** BUILD FAILED **<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; The following build commands failed:<br>&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt;&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt;&gt;&gt; (2 failures)<br>&gt;&gt;&gt; Traceback (most recent call last):<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt; 445, in &lt;module&gt;<br>&gt;&gt;&gt;     main()<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt; 441, in main<br>&gt;&gt;&gt;     parsed_args.func(parsed_args)<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt; 64, in build<br>&gt;&gt;&gt;     source_dir=SOURCE_DIR))<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt; 30, in run<br>&gt;&gt;&gt;     subprocess.check_call(command, shell=True)<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt;&gt;&gt; line 540, in check_call<br>&gt;&gt;&gt;     raise CalledProcessError(retcode, cmd)<br>&gt;&gt;&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt;&gt;&gt; -scheme SwiftXCTest<br>&gt;&gt;&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt;&gt;&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt;&gt;&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt;&gt;&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt;&gt;&gt; returned non-zero exit status 65<br>&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:35 PM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Hi Brian Croom,<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Thanks for the quick response. I deleted the entire build directory<br>&gt;&gt;&gt;&gt; now. Initiated a new build. Fingers crossed...<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Will update the status as soon as the build finishes.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Hmm, have you tried deleting your `build/swift-macosx-x86_64/`<br>&gt;&gt;&gt;&gt;&gt; directory? I wonder if cached CMake values could cause that issue.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; (By the way, I can confirm that getting the build going for the first<br>&gt;&gt;&gt;&gt;&gt; time is the most challenging! I hope we can get things going for you soon.)<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; 2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; So after spending almost a week trying to build swift and core<br>&gt;&gt;&gt;&gt;&gt;&gt; libraries (mainly xctest) during the end of May un-successfully, I made up<br>&gt;&gt;&gt;&gt;&gt;&gt; my mind to give another attempt today.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; I checkout the latest code from swift repo. Since the xctest<br>&gt;&gt;&gt;&gt;&gt;&gt; documentation says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt;&gt;&gt;&gt;&gt;&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Unfortunately, build-script -R gives the below error.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; My active developer directory is<br>&gt;&gt;&gt;&gt;&gt;&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt;&gt;&gt;&gt;&gt;&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Let me know whether I miss anything? I assume getting the build<br>&gt;&gt;&gt;&gt;&gt;&gt; working for the first time is the hardest, but there I am!<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated!<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; My first quick attempt using build-toolchain script to build my own<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; tool chain failed. Anyway I will give it another try and let you know the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; status.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; brian.s.croom at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the latest toolchain snapshot was released, and Corelibs Foundation has<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; been updated accordingly.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Until the next snapshot, an alternative to building your own<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain would be to check out an older commit of Foundation which still<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; builds with the compiler in the snapshot toolchain, since XCTest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; doesn&#39;t depend on any of the more recent Foundation changes. I&#39;ve had<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; success using this commit:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the bottom of your original email.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. I&#39;ll double-check myself. In the meantime, you may want to try<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; building your own toolchain and using that.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xcodebuild) and using Xcode itself is the version of Swift that is used.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build scripts build a Swift 3.0 compiler, then use that to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. When using Xcode directly, you need to select a recent Swift<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Swift toolchain from http://swift.org doesn&#39;t work, you may have<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to built your own toolchain. You can do so using the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; `utils/build-toolchain` script in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; You should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; instructions at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;     let t =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160702/1de02311/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3eb0623e24ffb4072ad81b19959d192f?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Croom</string> &lt;brian.s.croom at gmail.com&gt;<p>July  5, 2016 at 10:00:00am</p></header><div class="content"><p>Hmm, it does look like XCTest needs some work done to get things working<br>with the latest Swift 3 changes made in the stdlib and corelibs-foundation.<br>I don&#39;t have access to a development environment to investigate further,<br>but as far as I can tell, this wouldn&#39;t build on Linux either. Has there<br>been any indication of these issues from CI, I wonder?<br></p><p>On Friday, 1 July 2016, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br></p><p>&gt; I just found more error details in the log. You can find it below. Hope<br>&gt; this helps.<br>&gt;<br>&gt; Error 1<br>&gt; --------------------------------------<br>&gt;<br>&gt; CompileSwift normal x86_64<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>&gt;     cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest<br>&gt;     ...<br>&gt;     ...<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift:65:71:<br>&gt; error: &#39;lastPathComponent&#39; is unavailable: Use lastPathComponent on URL<br>&gt; instead.<br>&gt;         currentTestSuite = XCTestSuite(name:<br>&gt; &quot;\(testBundle.bundlePath.lastPathComponent).xctest&quot;)<br>&gt;<br>&gt; ^~~~~~~~~~~~~~~~~<br>&gt; SwiftFoundation.String:173:16: note: &#39;lastPathComponent&#39; has been<br>&gt; explicitly marked unavailable here<br>&gt;     public var lastPathComponent: String { get }<br>&gt;                ^<br>&gt;<br>&gt;<br>&gt; Error 2<br>&gt; --------------------------------------<br>&gt; CompileSwift normal x86_64<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;     cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest<br>&gt;     ...<br>&gt;     ...<br>&gt;     /Objects-normal/x86_64/TestListing.swiftdeps -o<br>&gt; /Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64/XCTest.build/Debug/SwiftXCTest.build/Objects-normal/x86_64/TestListing.o<br>&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift:45:46:<br>&gt; error: cannot convert value of type &#39;String.Encoding&#39; to expected argument<br>&gt; type &#39;UInt&#39;<br>&gt;         print(NSString(data: json, encoding: NSUTF8StringEncoding)!)<br>&gt;                                              ^~~~~~~~~~~~~~~~~~~~<br>&gt;                                                                  .rawValue<br>&gt; Assertion failed: (!failed &amp;&amp; &quot;Call arguments did not match up?&quot;),<br>&gt; function coerceCallArguments, file<br>&gt; /Users/madhusamuel/dev/swift/swift/lib/Sema/CSApply.cpp, line 4655.<br>&gt; 0  swift                    0x000000010b6a6d5b<br>&gt; llvm::sys::PrintStackTrace(llvm::raw_ostream&amp;) + 43<br>&gt; 1  swift                    0x000000010b6a5f86<br>&gt; llvm::sys::RunSignalHandlers() + 70<br>&gt; 2  swift                    0x000000010b6a7631 SignalHandler(int) + 641<br>&gt; 3  libsystem_platform.dylib 0x00007fff8ecf552a _sigtramp + 26<br>&gt; 4  swift                    0x000000010c290579 cmark_strbuf__initbuf +<br>&gt; 73960<br>&gt; 5  swift                    0x000000010b6a727e abort + 14<br>&gt; 6  swift                    0x000000010b6a7261 __assert_rtn + 81<br>&gt; 7  swift                    0x0000000108ff5bae (anonymous<br>&gt; namespace)::ExprRewriter::coerceCallArguments(swift::Expr*, swift::Type,<br>&gt; llvm::PointerUnion&lt;swift::ApplyExpr*, llvm::PointerEmbeddedInt&lt;unsigned<br>&gt; int, 2&gt; &gt;, swift::constraints::ConstraintLocatorBuilder) + 6190<br>&gt; 8  swift                    0x0000000108fe4b0d (anonymous<br>&gt; namespace)::ExprRewriter::finishApply(swift::ApplyExpr*, swift::Type,<br>&gt; swift::constraints::ConstraintLocatorBuilder) + 541<br>&gt; 9  swift                    0x0000000108ff638e (anonymous<br>&gt; namespace)::ExprRewriter::visitApplyExpr(swift::ApplyExpr*) + 78<br>&gt; 10 swift                    0x0000000108fe2325 (anonymous<br>&gt; namespace)::ExprRewriter::walkToExprPost(swift::Expr*) + 21<br>&gt; 11 swift                    0x0000000109180db0 (anonymous<br>&gt; namespace)::Traversal::visit(swift::Expr*) + 160<br>&gt; 12 swift                    0x0000000109182969 (anonymous<br>&gt; namespace)::Traversal::visit(swift::Expr*) + 7257<br>&gt; 13 swift                    0x0000000109180145<br>&gt; swift::Expr::walk(swift::ASTWalker&amp;) + 53<br>&gt; 14 swift                    0x0000000108fdedcb<br>&gt; swift::constraints::ConstraintSystem::applySolution(swift::constraints::Solution&amp;,<br>&gt; swift::Expr*, swift::Type, bool, bool, bool) + 475<br>&gt; 15 swift                    0x0000000109081e53<br>&gt; swift::TypeChecker::typeCheckExpression(swift::Expr*&amp;, swift::DeclContext*,<br>&gt; swift::TypeLoc, swift::ContextualTypePurpose,<br>&gt; swift::OptionSet&lt;swift::TypeCheckExprFlags, unsigned int&gt;,<br>&gt; swift::ExprTypeCheckListener*) + 739<br>&gt; 16 swift                    0x00000001090f9fc4<br>&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 4820<br>&gt; 17 swift                    0x00000001090f8e3e<br>&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 334<br>&gt; 18 swift                    0x00000001090f93d3<br>&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 1763<br>&gt; 19 swift                    0x00000001090f8e3e<br>&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 334<br>&gt; 20 swift                    0x00000001090f81f9 (anonymous<br>&gt; namespace)::StmtChecker::typeCheckBody(swift::BraceStmt*&amp;) + 25<br>&gt; 21 swift                    0x00000001090f74df<br>&gt; swift::TypeChecker::typeCheckFunctionBodyUntil(swift::FuncDecl*,<br>&gt; swift::SourceLoc) + 383<br>&gt; 22 swift                    0x00000001090f7303<br>&gt; swift::TypeChecker::typeCheckAbstractFunctionBodyUntil(swift::AbstractFunctionDecl*,<br>&gt; swift::SourceLoc) + 35<br>&gt; 23 swift                    0x00000001090f7e84<br>&gt; swift::TypeChecker::typeCheckAbstractFunctionBody(swift::AbstractFunctionDecl*)<br>&gt; + 180<br>&gt; 24 swift                    0x00000001090b3116<br>&gt; typeCheckFunctionsAndExternalDecls(swift::TypeChecker&amp;) + 166<br>&gt; 25 swift                    0x00000001090b3db0<br>&gt; swift::performTypeChecking(swift::SourceFile&amp;, swift::TopLevelContext&amp;,<br>&gt; swift::OptionSet&lt;swift::TypeCheckingFlags, unsigned int&gt;, unsigned int,<br>&gt; unsigned int) + 1568<br>&gt; 26 swift                    0x0000000108d714bc<br>&gt; swift::CompilerInstance::performSema() + 3916<br>&gt; 27 swift                    0x0000000108885c8a<br>&gt; performCompile(swift::CompilerInstance&amp;, swift::CompilerInvocation&amp;,<br>&gt; llvm::ArrayRef&lt;char const*&gt;, int&amp;, swift::FrontendObserver*) + 442<br>&gt; 28 swift                    0x000000010888483f<br>&gt; swift::performFrontend(llvm::ArrayRef&lt;char const*&gt;, char const*, void*,<br>&gt; swift::FrontendObserver*) + 2895<br>&gt; 29 swift                    0x0000000108847300 main + 2448<br>&gt; 30 libdyld.dylib            0x00007fff8bdc95ad start + 1<br>&gt; Stack dump:<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; On Sat, Jul 2, 2016 at 8:29 AM, Madhu Samuel &lt;madhusamuel at gmail.com<br>&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;madhusamuel at gmail.com&#39;);&gt;&gt; wrote:<br>&gt;<br>&gt;&gt; Hi Brian,<br>&gt;&gt;<br>&gt;&gt; Thanks for you response.<br>&gt;&gt;<br>&gt;&gt; Still I cannot compile corelibs-xctest with xcode-beta. It seems the<br>&gt;&gt; error is too generic to debug! If xctest is not yet configured against<br>&gt;&gt; xcode 8 beta, probably, I will wait. At this point, I am lazy to create my<br>&gt;&gt; own toolchain, since my last attempt went bust!<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; The steps I followed<br>&gt;&gt;<br>&gt;&gt; 1. delete swift/build<br>&gt;&gt; 2. utils/update-checkout<br>&gt;&gt; 3. sudo  xcode-select -s<br>&gt;&gt; /Applications/Xcode-beta.app/Contents/Developer<br>&gt;&gt; 4. utils/build-script -r -t   (success)<br>&gt;&gt; 5. utils/build-script -R.    (success)<br>&gt;&gt; 6.<br>&gt;&gt; $ cd swift-corelibs-xctest<br>&gt;&gt; $ ../swift/utils/build-script --preset corelibs-xctest<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; Environment<br>&gt;&gt;<br>&gt;&gt; *Swift Version: Swift version 3.0 (swiftlang-800.0.30 clang-800.0.24)*<br>&gt;&gt; Xcode Environment: Version 8.0 beta (8S128d)<br>&gt;&gt; Python Version: Python 2.7.10<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; The Error<br>&gt;&gt;<br>&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;&gt;<br>&gt;&gt; .....<br>&gt;&gt; ....<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt;&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>&gt;&gt; invocation)<br>&gt;&gt; ** BUILD FAILED **<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; The following build commands failed:<br>&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt;&gt; (3 failures)<br>&gt;&gt; Traceback (most recent call last):<br>&gt;&gt;   File<br>&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt; 445, in &lt;module&gt;<br>&gt;&gt;     main()<br>&gt;&gt;   File<br>&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt; 441, in main<br>&gt;&gt;     parsed_args.func(parsed_args)<br>&gt;&gt;   File<br>&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt; 64, in build<br>&gt;&gt;     source_dir=SOURCE_DIR))<br>&gt;&gt;   File<br>&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt; 30, in run<br>&gt;&gt;     subprocess.check_call(command, shell=True)<br>&gt;&gt;   File<br>&gt;&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt;&gt; line 540, in check_call<br>&gt;&gt;     raise CalledProcessError(retcode, cmd)<br>&gt;&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt;&gt; -scheme SwiftXCTest<br>&gt;&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt;&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt;&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt;&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt;&gt; returned non-zero exit status 65<br>&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; Regards,<br>&gt;&gt; Madhu<br>&gt;&gt;<br>&gt;&gt; On Thu, Jun 30, 2016 at 11:38 PM, Brian Gesiak &lt;modocache at gmail.com<br>&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;modocache at gmail.com&#39;);&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Sorry for the late reply to this -- I obviously need to update my email<br>&gt;&gt;&gt; settings! :(<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Could you pull down the latest changes to Swift, and let me know if<br>&gt;&gt;&gt; you&#39;re still experiencing difficulties compiling corelibs-xctest?<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:03 AM, Madhu Samuel &lt;madhusamuel at gmail.com<br>&gt;&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;madhusamuel at gmail.com&#39;);&gt;&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Wow, the swift build is a success. Though there are a few warnings at<br>&gt;&gt;&gt;&gt; the end. I guess the issue was with cached values in the build directory.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; But, in the next step to build xctest using &quot;/utils/build-script<br>&gt;&gt;&gt;&gt; --preset corelibs-xctest&quot;, the build fails. The build error log is given<br>&gt;&gt;&gt;&gt; below.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; ------------------------<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;&gt;&gt;&gt; ....<br>&gt;&gt;&gt;&gt; ....<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>&gt;&gt;&gt;&gt; invocation)<br>&gt;&gt;&gt;&gt; ** BUILD FAILED **<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; The following build commands failed:<br>&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt;&gt;&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt;&gt;&gt;&gt; (2 failures)<br>&gt;&gt;&gt;&gt; Traceback (most recent call last):<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt; 445, in &lt;module&gt;<br>&gt;&gt;&gt;&gt;     main()<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt; 441, in main<br>&gt;&gt;&gt;&gt;     parsed_args.func(parsed_args)<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt; 64, in build<br>&gt;&gt;&gt;&gt;     source_dir=SOURCE_DIR))<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt; 30, in run<br>&gt;&gt;&gt;&gt;     subprocess.check_call(command, shell=True)<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt;&gt;&gt;&gt; line 540, in check_call<br>&gt;&gt;&gt;&gt;     raise CalledProcessError(retcode, cmd)<br>&gt;&gt;&gt;&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt;&gt;&gt;&gt; -scheme SwiftXCTest<br>&gt;&gt;&gt;&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt;&gt;&gt;&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt;&gt;&gt;&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt;&gt;&gt;&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt;&gt;&gt;&gt; returned non-zero exit status 65<br>&gt;&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:35 PM, Madhu Samuel &lt;madhusamuel at gmail.com<br>&gt;&gt;&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;madhusamuel at gmail.com&#39;);&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Hi Brian Croom,<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Thanks for the quick response. I deleted the entire build directory<br>&gt;&gt;&gt;&gt;&gt; now. Initiated a new build. Fingers crossed...<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Will update the status as soon as the build finishes.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;brian.s.croom at gmail.com<br>&gt;&gt;&gt;&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;brian.s.croom at gmail.com&#39;);&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Hmm, have you tried deleting your `build/swift-macosx-x86_64/`<br>&gt;&gt;&gt;&gt;&gt;&gt; directory? I wonder if cached CMake values could cause that issue.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; (By the way, I can confirm that getting the build going for the first<br>&gt;&gt;&gt;&gt;&gt;&gt; time is the most challenging! I hope we can get things going for you soon.)<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; 2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com<br>&gt;&gt;&gt;&gt;&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;madhusamuel at gmail.com&#39;);&gt;&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; So after spending almost a week trying to build swift and core<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; libraries (mainly xctest) during the end of May un-successfully, I made up<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; my mind to give another attempt today.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; I checkout the latest code from swift repo. Since the xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; documentation says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unfortunately, build-script -R gives the below error.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; My active developer directory is<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Let me know whether I miss anything? I assume getting the build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; working for the first time is the hardest, but there I am!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;madhusamuel at gmail.com&#39;);&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Croom.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My first quick attempt using build-toolchain script to build my own<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; tool chain failed. Anyway I will give it another try and let you know the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; status.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; brian.s.croom at gmail.com<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;brian.s.croom at gmail.com&#39;);&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the latest toolchain snapshot was released, and Corelibs Foundation has<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; been updated accordingly.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Until the next snapshot, an alternative to building your own<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain would be to check out an older commit of Foundation which still<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; builds with the compiler in the snapshot toolchain, since XCTest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; doesn&#39;t depend on any of the more recent Foundation changes. I&#39;ve had<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; success using this commit:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev at swift.org<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;swift-corelibs-dev at swift.org&#39;);&gt;&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; at the bottom of your original email.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. I&#39;ll double-check myself. In the meantime, you may want to try<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; building your own toolchain and using that.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xcodebuild) and using Xcode itself is the version of Swift that is used.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build scripts build a Swift 3.0 compiler, then use that to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. When using Xcode directly, you need to select a recent Swift<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Swift toolchain from http://swift.org doesn&#39;t work, you may<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; have to built your own toolchain. You can do so using the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; `utils/build-toolchain` script in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; You should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; instructions at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;     let t =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160705/0634a4ee/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/f921fa5d507b31ef6984fd3d77ae710c?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Gesiak</string> &lt;modocache at gmail.com&gt;<p>July  5, 2016 at 08:00:00pm</p></header><div class="content"><p>Looks like our continuous integration server works fine:<br>https://github.com/apple/swift-corelibs-xctest/pull/132<br></p><p>Madhu, are you sure you&#39;re using the latest master branch commit on each of<br>the apple/swift repositories? Specifically, you should pull down the latest<br>changes on: swift, swift-llvm, swift-clang, swift-corelibs-foundation,<br>swift-corelibs-xctest, swift-llbuild, and swift-package-manager. The CI<br>server appears to be fine, so if you&#39;re seeing compilation errors, I think<br>you may be using code that is out of date.<br></p><p>- Brian Gesiak<br></p><p><br>On Tue, Jul 5, 2016 at 10:36 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>wrote:<br></p><p>&gt; Hmm, it does look like XCTest needs some work done to get things working<br>&gt; with the latest Swift 3 changes made in the stdlib and corelibs-foundation.<br>&gt; I don&#39;t have access to a development environment to investigate further,<br>&gt; but as far as I can tell, this wouldn&#39;t build on Linux either. Has there<br>&gt; been any indication of these issues from CI, I wonder?<br>&gt;<br>&gt; On Friday, 1 July 2016, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br>&gt;<br>&gt;&gt; I just found more error details in the log. You can find it below. Hope<br>&gt;&gt; this helps.<br>&gt;&gt;<br>&gt;&gt; Error 1<br>&gt;&gt; --------------------------------------<br>&gt;&gt;<br>&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>&gt;&gt;     cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest<br>&gt;&gt;     ...<br>&gt;&gt;     ...<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift:65:71:<br>&gt;&gt; error: &#39;lastPathComponent&#39; is unavailable: Use lastPathComponent on URL<br>&gt;&gt; instead.<br>&gt;&gt;         currentTestSuite = XCTestSuite(name:<br>&gt;&gt; &quot;\(testBundle.bundlePath.lastPathComponent).xctest&quot;)<br>&gt;&gt;<br>&gt;&gt; ^~~~~~~~~~~~~~~~~<br>&gt;&gt; SwiftFoundation.String:173:16: note: &#39;lastPathComponent&#39; has been<br>&gt;&gt; explicitly marked unavailable here<br>&gt;&gt;     public var lastPathComponent: String { get }<br>&gt;&gt;                ^<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; Error 2<br>&gt;&gt; --------------------------------------<br>&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt;     cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest<br>&gt;&gt;     ...<br>&gt;&gt;     ...<br>&gt;&gt;     /Objects-normal/x86_64/TestListing.swiftdeps -o<br>&gt;&gt; /Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64/XCTest.build/Debug/SwiftXCTest.build/Objects-normal/x86_64/TestListing.o<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift:45:46:<br>&gt;&gt; error: cannot convert value of type &#39;String.Encoding&#39; to expected argument<br>&gt;&gt; type &#39;UInt&#39;<br>&gt;&gt;         print(NSString(data: json, encoding: NSUTF8StringEncoding)!)<br>&gt;&gt;                                              ^~~~~~~~~~~~~~~~~~~~<br>&gt;&gt;                                                                  .rawValue<br>&gt;&gt; Assertion failed: (!failed &amp;&amp; &quot;Call arguments did not match up?&quot;),<br>&gt;&gt; function coerceCallArguments, file<br>&gt;&gt; /Users/madhusamuel/dev/swift/swift/lib/Sema/CSApply.cpp, line 4655.<br>&gt;&gt; 0  swift                    0x000000010b6a6d5b<br>&gt;&gt; llvm::sys::PrintStackTrace(llvm::raw_ostream&amp;) + 43<br>&gt;&gt; 1  swift                    0x000000010b6a5f86<br>&gt;&gt; llvm::sys::RunSignalHandlers() + 70<br>&gt;&gt; 2  swift                    0x000000010b6a7631 SignalHandler(int) + 641<br>&gt;&gt; 3  libsystem_platform.dylib 0x00007fff8ecf552a _sigtramp + 26<br>&gt;&gt; 4  swift                    0x000000010c290579 cmark_strbuf__initbuf +<br>&gt;&gt; 73960<br>&gt;&gt; 5  swift                    0x000000010b6a727e abort + 14<br>&gt;&gt; 6  swift                    0x000000010b6a7261 __assert_rtn + 81<br>&gt;&gt; 7  swift                    0x0000000108ff5bae (anonymous<br>&gt;&gt; namespace)::ExprRewriter::coerceCallArguments(swift::Expr*, swift::Type,<br>&gt;&gt; llvm::PointerUnion&lt;swift::ApplyExpr*, llvm::PointerEmbeddedInt&lt;unsigned<br>&gt;&gt; int, 2&gt; &gt;, swift::constraints::ConstraintLocatorBuilder) + 6190<br>&gt;&gt; 8  swift                    0x0000000108fe4b0d (anonymous<br>&gt;&gt; namespace)::ExprRewriter::finishApply(swift::ApplyExpr*, swift::Type,<br>&gt;&gt; swift::constraints::ConstraintLocatorBuilder) + 541<br>&gt;&gt; 9  swift                    0x0000000108ff638e (anonymous<br>&gt;&gt; namespace)::ExprRewriter::visitApplyExpr(swift::ApplyExpr*) + 78<br>&gt;&gt; 10 swift                    0x0000000108fe2325 (anonymous<br>&gt;&gt; namespace)::ExprRewriter::walkToExprPost(swift::Expr*) + 21<br>&gt;&gt; 11 swift                    0x0000000109180db0 (anonymous<br>&gt;&gt; namespace)::Traversal::visit(swift::Expr*) + 160<br>&gt;&gt; 12 swift                    0x0000000109182969 (anonymous<br>&gt;&gt; namespace)::Traversal::visit(swift::Expr*) + 7257<br>&gt;&gt; 13 swift                    0x0000000109180145<br>&gt;&gt; swift::Expr::walk(swift::ASTWalker&amp;) + 53<br>&gt;&gt; 14 swift                    0x0000000108fdedcb<br>&gt;&gt; swift::constraints::ConstraintSystem::applySolution(swift::constraints::Solution&amp;,<br>&gt;&gt; swift::Expr*, swift::Type, bool, bool, bool) + 475<br>&gt;&gt; 15 swift                    0x0000000109081e53<br>&gt;&gt; swift::TypeChecker::typeCheckExpression(swift::Expr*&amp;, swift::DeclContext*,<br>&gt;&gt; swift::TypeLoc, swift::ContextualTypePurpose,<br>&gt;&gt; swift::OptionSet&lt;swift::TypeCheckExprFlags, unsigned int&gt;,<br>&gt;&gt; swift::ExprTypeCheckListener*) + 739<br>&gt;&gt; 16 swift                    0x00000001090f9fc4<br>&gt;&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt;&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 4820<br>&gt;&gt; 17 swift                    0x00000001090f8e3e<br>&gt;&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt;&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 334<br>&gt;&gt; 18 swift                    0x00000001090f93d3<br>&gt;&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt;&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 1763<br>&gt;&gt; 19 swift                    0x00000001090f8e3e<br>&gt;&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt;&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 334<br>&gt;&gt; 20 swift                    0x00000001090f81f9 (anonymous<br>&gt;&gt; namespace)::StmtChecker::typeCheckBody(swift::BraceStmt*&amp;) + 25<br>&gt;&gt; 21 swift                    0x00000001090f74df<br>&gt;&gt; swift::TypeChecker::typeCheckFunctionBodyUntil(swift::FuncDecl*,<br>&gt;&gt; swift::SourceLoc) + 383<br>&gt;&gt; 22 swift                    0x00000001090f7303<br>&gt;&gt; swift::TypeChecker::typeCheckAbstractFunctionBodyUntil(swift::AbstractFunctionDecl*,<br>&gt;&gt; swift::SourceLoc) + 35<br>&gt;&gt; 23 swift                    0x00000001090f7e84<br>&gt;&gt; swift::TypeChecker::typeCheckAbstractFunctionBody(swift::AbstractFunctionDecl*)<br>&gt;&gt; + 180<br>&gt;&gt; 24 swift                    0x00000001090b3116<br>&gt;&gt; typeCheckFunctionsAndExternalDecls(swift::TypeChecker&amp;) + 166<br>&gt;&gt; 25 swift                    0x00000001090b3db0<br>&gt;&gt; swift::performTypeChecking(swift::SourceFile&amp;, swift::TopLevelContext&amp;,<br>&gt;&gt; swift::OptionSet&lt;swift::TypeCheckingFlags, unsigned int&gt;, unsigned int,<br>&gt;&gt; unsigned int) + 1568<br>&gt;&gt; 26 swift                    0x0000000108d714bc<br>&gt;&gt; swift::CompilerInstance::performSema() + 3916<br>&gt;&gt; 27 swift                    0x0000000108885c8a<br>&gt;&gt; performCompile(swift::CompilerInstance&amp;, swift::CompilerInvocation&amp;,<br>&gt;&gt; llvm::ArrayRef&lt;char const*&gt;, int&amp;, swift::FrontendObserver*) + 442<br>&gt;&gt; 28 swift                    0x000000010888483f<br>&gt;&gt; swift::performFrontend(llvm::ArrayRef&lt;char const*&gt;, char const*, void*,<br>&gt;&gt; swift::FrontendObserver*) + 2895<br>&gt;&gt; 29 swift                    0x0000000108847300 main + 2448<br>&gt;&gt; 30 libdyld.dylib            0x00007fff8bdc95ad start + 1<br>&gt;&gt; Stack dump:<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; On Sat, Jul 2, 2016 at 8:29 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; Hi Brian,<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Thanks for you response.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Still I cannot compile corelibs-xctest with xcode-beta. It seems the<br>&gt;&gt;&gt; error is too generic to debug! If xctest is not yet configured against<br>&gt;&gt;&gt; xcode 8 beta, probably, I will wait. At this point, I am lazy to create my<br>&gt;&gt;&gt; own toolchain, since my last attempt went bust!<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; The steps I followed<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; 1. delete swift/build<br>&gt;&gt;&gt; 2. utils/update-checkout<br>&gt;&gt;&gt; 3. sudo  xcode-select -s<br>&gt;&gt;&gt; /Applications/Xcode-beta.app/Contents/Developer<br>&gt;&gt;&gt; 4. utils/build-script -r -t   (success)<br>&gt;&gt;&gt; 5. utils/build-script -R.    (success)<br>&gt;&gt;&gt; 6.<br>&gt;&gt;&gt; $ cd swift-corelibs-xctest<br>&gt;&gt;&gt; $ ../swift/utils/build-script --preset corelibs-xctest<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Environment<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; *Swift Version: Swift version 3.0 (swiftlang-800.0.30 clang-800.0.24)*<br>&gt;&gt;&gt; Xcode Environment: Version 8.0 beta (8S128d)<br>&gt;&gt;&gt; Python Version: Python 2.7.10<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; The Error<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; .....<br>&gt;&gt;&gt; ....<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt;&gt;&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>&gt;&gt;&gt; invocation)<br>&gt;&gt;&gt; ** BUILD FAILED **<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; The following build commands failed:<br>&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt;&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt;&gt;&gt; (3 failures)<br>&gt;&gt;&gt; Traceback (most recent call last):<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt; 445, in &lt;module&gt;<br>&gt;&gt;&gt;     main()<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt; 441, in main<br>&gt;&gt;&gt;     parsed_args.func(parsed_args)<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt; 64, in build<br>&gt;&gt;&gt;     source_dir=SOURCE_DIR))<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt; 30, in run<br>&gt;&gt;&gt;     subprocess.check_call(command, shell=True)<br>&gt;&gt;&gt;   File<br>&gt;&gt;&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt;&gt;&gt; line 540, in check_call<br>&gt;&gt;&gt;     raise CalledProcessError(retcode, cmd)<br>&gt;&gt;&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt;&gt;&gt; -scheme SwiftXCTest<br>&gt;&gt;&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt;&gt;&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt;&gt;&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt;&gt;&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt;&gt;&gt; returned non-zero exit status 65<br>&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Thu, Jun 30, 2016 at 11:38 PM, Brian Gesiak &lt;modocache at gmail.com&gt;<br>&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Sorry for the late reply to this -- I obviously need to update my email<br>&gt;&gt;&gt;&gt; settings! :(<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Could you pull down the latest changes to Swift, and let me know if<br>&gt;&gt;&gt;&gt; you&#39;re still experiencing difficulties compiling corelibs-xctest?<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:03 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Wow, the swift build is a success. Though there are a few warnings at<br>&gt;&gt;&gt;&gt;&gt; the end. I guess the issue was with cached values in the build directory.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; But, in the next step to build xctest using &quot;/utils/build-script<br>&gt;&gt;&gt;&gt;&gt; --preset corelibs-xctest&quot;, the build fails. The build error log is given<br>&gt;&gt;&gt;&gt;&gt; below.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; ------------------------<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;&gt;&gt;&gt;&gt; ....<br>&gt;&gt;&gt;&gt;&gt; ....<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to<br>&gt;&gt;&gt;&gt;&gt; see invocation)<br>&gt;&gt;&gt;&gt;&gt; ** BUILD FAILED **<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; The following build commands failed:<br>&gt;&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt;&gt;&gt;&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt;&gt;&gt;&gt;&gt; (2 failures)<br>&gt;&gt;&gt;&gt;&gt; Traceback (most recent call last):<br>&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt;&gt; 445, in &lt;module&gt;<br>&gt;&gt;&gt;&gt;&gt;     main()<br>&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt;&gt; 441, in main<br>&gt;&gt;&gt;&gt;&gt;     parsed_args.func(parsed_args)<br>&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt;&gt; 64, in build<br>&gt;&gt;&gt;&gt;&gt;     source_dir=SOURCE_DIR))<br>&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt;&gt; 30, in run<br>&gt;&gt;&gt;&gt;&gt;     subprocess.check_call(command, shell=True)<br>&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt;&gt;&gt;&gt;&gt; line 540, in check_call<br>&gt;&gt;&gt;&gt;&gt;     raise CalledProcessError(retcode, cmd)<br>&gt;&gt;&gt;&gt;&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt;&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt;&gt;&gt;&gt;&gt; -scheme SwiftXCTest<br>&gt;&gt;&gt;&gt;&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt;&gt;&gt;&gt;&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt;&gt;&gt;&gt;&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt;&gt;&gt;&gt;&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt;&gt;&gt;&gt;&gt; returned non-zero exit status 65<br>&gt;&gt;&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:35 PM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Hi Brian Croom,<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the quick response. I deleted the entire build directory<br>&gt;&gt;&gt;&gt;&gt;&gt; now. Initiated a new build. Fingers crossed...<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Will update the status as soon as the build finishes.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt; brian.s.croom at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hmm, have you tried deleting your `build/swift-macosx-x86_64/`<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; directory? I wonder if cached CMake values could cause that issue.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; (By the way, I can confirm that getting the build going for the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; first time is the most challenging! I hope we can get things going for you<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; soon.)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; So after spending almost a week trying to build swift and core<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; libraries (mainly xctest) during the end of May un-successfully, I made up<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; my mind to give another attempt today.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I checkout the latest code from swift repo. Since the xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; documentation says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unfortunately, build-script -R gives the below error.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My active developer directory is<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Let me know whether I miss anything? I assume getting the build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; working for the first time is the hardest, but there I am!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; madhusamuel at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Croom.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My first quick attempt using build-toolchain script to build my<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; own tool chain failed. Anyway I will give it another try and let you know<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the status.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; brian.s.croom at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the latest toolchain snapshot was released, and Corelibs Foundation has<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; been updated accordingly.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Until the next snapshot, an alternative to building your own<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain would be to check out an older commit of Foundation which still<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; builds with the compiler in the snapshot toolchain, since XCTest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; doesn&#39;t depend on any of the more recent Foundation changes. I&#39;ve had<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; success using this commit:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; at the bottom of your original email.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. I&#39;ll double-check myself. In the meantime, you may want to try<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; building your own toolchain and using that.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xcodebuild) and using Xcode itself is the version of Swift that is used.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build scripts build a Swift 3.0 compiler, then use that to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. When using Xcode directly, you need to select a recent Swift<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; latest Swift toolchain from http://swift.org doesn&#39;t work, you<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; may have to built your own toolchain. You can do so using the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; `utils/build-toolchain` script in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; You should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; instructions at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;     let t =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160705/d5268969/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>July  6, 2016 at 12:00:00pm</p></header><div class="content"><p>Thanks for getting back on that.<br></p><p>Just a quick check. I can get the latest master branch from all needed<br>repos&#39; using swift/utils/update-checkout, rt?. Or do I need to explicitly<br>checkout from each repo?<br></p><p>On Wed, Jul 6, 2016 at 10:35 AM, Brian Gesiak &lt;modocache at gmail.com&gt; wrote:<br></p><p>&gt; Looks like our continuous integration server works fine:<br>&gt; https://github.com/apple/swift-corelibs-xctest/pull/132<br>&gt;<br>&gt; Madhu, are you sure you&#39;re using the latest master branch commit on each<br>&gt; of the apple/swift repositories? Specifically, you should pull down the<br>&gt; latest changes on: swift, swift-llvm, swift-clang,<br>&gt; swift-corelibs-foundation, swift-corelibs-xctest, swift-llbuild, and<br>&gt; swift-package-manager. The CI server appears to be fine, so if you&#39;re<br>&gt; seeing compilation errors, I think you may be using code that is out of<br>&gt; date.<br>&gt;<br>&gt; - Brian Gesiak<br>&gt;<br>&gt;<br>&gt; On Tue, Jul 5, 2016 at 10:36 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt; wrote:<br>&gt;<br>&gt;&gt; Hmm, it does look like XCTest needs some work done to get things working<br>&gt;&gt; with the latest Swift 3 changes made in the stdlib and corelibs-foundation.<br>&gt;&gt; I don&#39;t have access to a development environment to investigate further,<br>&gt;&gt; but as far as I can tell, this wouldn&#39;t build on Linux either. Has there<br>&gt;&gt; been any indication of these issues from CI, I wonder?<br>&gt;&gt;<br>&gt;&gt; On Friday, 1 July 2016, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; I just found more error details in the log. You can find it below. Hope<br>&gt;&gt;&gt; this helps.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Error 1<br>&gt;&gt;&gt; --------------------------------------<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>&gt;&gt;&gt;     cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest<br>&gt;&gt;&gt;     ...<br>&gt;&gt;&gt;     ...<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift:65:71:<br>&gt;&gt;&gt; error: &#39;lastPathComponent&#39; is unavailable: Use lastPathComponent on URL<br>&gt;&gt;&gt; instead.<br>&gt;&gt;&gt;         currentTestSuite = XCTestSuite(name:<br>&gt;&gt;&gt; &quot;\(testBundle.bundlePath.lastPathComponent).xctest&quot;)<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; ^~~~~~~~~~~~~~~~~<br>&gt;&gt;&gt; SwiftFoundation.String:173:16: note: &#39;lastPathComponent&#39; has been<br>&gt;&gt;&gt; explicitly marked unavailable here<br>&gt;&gt;&gt;     public var lastPathComponent: String { get }<br>&gt;&gt;&gt;                ^<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Error 2<br>&gt;&gt;&gt; --------------------------------------<br>&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt;&gt;     cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest<br>&gt;&gt;&gt;     ...<br>&gt;&gt;&gt;     ...<br>&gt;&gt;&gt;     /Objects-normal/x86_64/TestListing.swiftdeps -o<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64/XCTest.build/Debug/SwiftXCTest.build/Objects-normal/x86_64/TestListing.o<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift:45:46:<br>&gt;&gt;&gt; error: cannot convert value of type &#39;String.Encoding&#39; to expected argument<br>&gt;&gt;&gt; type &#39;UInt&#39;<br>&gt;&gt;&gt;         print(NSString(data: json, encoding: NSUTF8StringEncoding)!)<br>&gt;&gt;&gt;                                              ^~~~~~~~~~~~~~~~~~~~<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;  .rawValue<br>&gt;&gt;&gt; Assertion failed: (!failed &amp;&amp; &quot;Call arguments did not match up?&quot;),<br>&gt;&gt;&gt; function coerceCallArguments, file<br>&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift/lib/Sema/CSApply.cpp, line 4655.<br>&gt;&gt;&gt; 0  swift                    0x000000010b6a6d5b<br>&gt;&gt;&gt; llvm::sys::PrintStackTrace(llvm::raw_ostream&amp;) + 43<br>&gt;&gt;&gt; 1  swift                    0x000000010b6a5f86<br>&gt;&gt;&gt; llvm::sys::RunSignalHandlers() + 70<br>&gt;&gt;&gt; 2  swift                    0x000000010b6a7631 SignalHandler(int) + 641<br>&gt;&gt;&gt; 3  libsystem_platform.dylib 0x00007fff8ecf552a _sigtramp + 26<br>&gt;&gt;&gt; 4  swift                    0x000000010c290579 cmark_strbuf__initbuf +<br>&gt;&gt;&gt; 73960<br>&gt;&gt;&gt; 5  swift                    0x000000010b6a727e abort + 14<br>&gt;&gt;&gt; 6  swift                    0x000000010b6a7261 __assert_rtn + 81<br>&gt;&gt;&gt; 7  swift                    0x0000000108ff5bae (anonymous<br>&gt;&gt;&gt; namespace)::ExprRewriter::coerceCallArguments(swift::Expr*, swift::Type,<br>&gt;&gt;&gt; llvm::PointerUnion&lt;swift::ApplyExpr*, llvm::PointerEmbeddedInt&lt;unsigned<br>&gt;&gt;&gt; int, 2&gt; &gt;, swift::constraints::ConstraintLocatorBuilder) + 6190<br>&gt;&gt;&gt; 8  swift                    0x0000000108fe4b0d (anonymous<br>&gt;&gt;&gt; namespace)::ExprRewriter::finishApply(swift::ApplyExpr*, swift::Type,<br>&gt;&gt;&gt; swift::constraints::ConstraintLocatorBuilder) + 541<br>&gt;&gt;&gt; 9  swift                    0x0000000108ff638e (anonymous<br>&gt;&gt;&gt; namespace)::ExprRewriter::visitApplyExpr(swift::ApplyExpr*) + 78<br>&gt;&gt;&gt; 10 swift                    0x0000000108fe2325 (anonymous<br>&gt;&gt;&gt; namespace)::ExprRewriter::walkToExprPost(swift::Expr*) + 21<br>&gt;&gt;&gt; 11 swift                    0x0000000109180db0 (anonymous<br>&gt;&gt;&gt; namespace)::Traversal::visit(swift::Expr*) + 160<br>&gt;&gt;&gt; 12 swift                    0x0000000109182969 (anonymous<br>&gt;&gt;&gt; namespace)::Traversal::visit(swift::Expr*) + 7257<br>&gt;&gt;&gt; 13 swift                    0x0000000109180145<br>&gt;&gt;&gt; swift::Expr::walk(swift::ASTWalker&amp;) + 53<br>&gt;&gt;&gt; 14 swift                    0x0000000108fdedcb<br>&gt;&gt;&gt; swift::constraints::ConstraintSystem::applySolution(swift::constraints::Solution&amp;,<br>&gt;&gt;&gt; swift::Expr*, swift::Type, bool, bool, bool) + 475<br>&gt;&gt;&gt; 15 swift                    0x0000000109081e53<br>&gt;&gt;&gt; swift::TypeChecker::typeCheckExpression(swift::Expr*&amp;, swift::DeclContext*,<br>&gt;&gt;&gt; swift::TypeLoc, swift::ContextualTypePurpose,<br>&gt;&gt;&gt; swift::OptionSet&lt;swift::TypeCheckExprFlags, unsigned int&gt;,<br>&gt;&gt;&gt; swift::ExprTypeCheckListener*) + 739<br>&gt;&gt;&gt; 16 swift                    0x00000001090f9fc4<br>&gt;&gt;&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt;&gt;&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 4820<br>&gt;&gt;&gt; 17 swift                    0x00000001090f8e3e<br>&gt;&gt;&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt;&gt;&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 334<br>&gt;&gt;&gt; 18 swift                    0x00000001090f93d3<br>&gt;&gt;&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt;&gt;&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 1763<br>&gt;&gt;&gt; 19 swift                    0x00000001090f8e3e<br>&gt;&gt;&gt; swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*,<br>&gt;&gt;&gt; void, void, void, void&gt;::visit(swift::Stmt*) + 334<br>&gt;&gt;&gt; 20 swift                    0x00000001090f81f9 (anonymous<br>&gt;&gt;&gt; namespace)::StmtChecker::typeCheckBody(swift::BraceStmt*&amp;) + 25<br>&gt;&gt;&gt; 21 swift                    0x00000001090f74df<br>&gt;&gt;&gt; swift::TypeChecker::typeCheckFunctionBodyUntil(swift::FuncDecl*,<br>&gt;&gt;&gt; swift::SourceLoc) + 383<br>&gt;&gt;&gt; 22 swift                    0x00000001090f7303<br>&gt;&gt;&gt; swift::TypeChecker::typeCheckAbstractFunctionBodyUntil(swift::AbstractFunctionDecl*,<br>&gt;&gt;&gt; swift::SourceLoc) + 35<br>&gt;&gt;&gt; 23 swift                    0x00000001090f7e84<br>&gt;&gt;&gt; swift::TypeChecker::typeCheckAbstractFunctionBody(swift::AbstractFunctionDecl*)<br>&gt;&gt;&gt; + 180<br>&gt;&gt;&gt; 24 swift                    0x00000001090b3116<br>&gt;&gt;&gt; typeCheckFunctionsAndExternalDecls(swift::TypeChecker&amp;) + 166<br>&gt;&gt;&gt; 25 swift                    0x00000001090b3db0<br>&gt;&gt;&gt; swift::performTypeChecking(swift::SourceFile&amp;, swift::TopLevelContext&amp;,<br>&gt;&gt;&gt; swift::OptionSet&lt;swift::TypeCheckingFlags, unsigned int&gt;, unsigned int,<br>&gt;&gt;&gt; unsigned int) + 1568<br>&gt;&gt;&gt; 26 swift                    0x0000000108d714bc<br>&gt;&gt;&gt; swift::CompilerInstance::performSema() + 3916<br>&gt;&gt;&gt; 27 swift                    0x0000000108885c8a<br>&gt;&gt;&gt; performCompile(swift::CompilerInstance&amp;, swift::CompilerInvocation&amp;,<br>&gt;&gt;&gt; llvm::ArrayRef&lt;char const*&gt;, int&amp;, swift::FrontendObserver*) + 442<br>&gt;&gt;&gt; 28 swift                    0x000000010888483f<br>&gt;&gt;&gt; swift::performFrontend(llvm::ArrayRef&lt;char const*&gt;, char const*, void*,<br>&gt;&gt;&gt; swift::FrontendObserver*) + 2895<br>&gt;&gt;&gt; 29 swift                    0x0000000108847300 main + 2448<br>&gt;&gt;&gt; 30 libdyld.dylib            0x00007fff8bdc95ad start + 1<br>&gt;&gt;&gt; Stack dump:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Sat, Jul 2, 2016 at 8:29 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Hi Brian,<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Thanks for you response.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Still I cannot compile corelibs-xctest with xcode-beta. It seems the<br>&gt;&gt;&gt;&gt; error is too generic to debug! If xctest is not yet configured against<br>&gt;&gt;&gt;&gt; xcode 8 beta, probably, I will wait. At this point, I am lazy to create my<br>&gt;&gt;&gt;&gt; own toolchain, since my last attempt went bust!<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; The steps I followed<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; 1. delete swift/build<br>&gt;&gt;&gt;&gt; 2. utils/update-checkout<br>&gt;&gt;&gt;&gt; 3. sudo  xcode-select -s<br>&gt;&gt;&gt;&gt; /Applications/Xcode-beta.app/Contents/Developer<br>&gt;&gt;&gt;&gt; 4. utils/build-script -r -t   (success)<br>&gt;&gt;&gt;&gt; 5. utils/build-script -R.    (success)<br>&gt;&gt;&gt;&gt; 6.<br>&gt;&gt;&gt;&gt; $ cd swift-corelibs-xctest<br>&gt;&gt;&gt;&gt; $ ../swift/utils/build-script --preset corelibs-xctest<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Environment<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; *Swift Version: Swift version 3.0 (swiftlang-800.0.30 clang-800.0.24)*<br>&gt;&gt;&gt;&gt; Xcode Environment: Version 8.0 beta (8S128d)<br>&gt;&gt;&gt;&gt; Python Version: Python 2.7.10<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; The Error<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; .....<br>&gt;&gt;&gt;&gt; ....<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see<br>&gt;&gt;&gt;&gt; invocation)<br>&gt;&gt;&gt;&gt; ** BUILD FAILED **<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; The following build commands failed:<br>&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift<br>&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt;&gt;&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt;&gt;&gt;&gt; (3 failures)<br>&gt;&gt;&gt;&gt; Traceback (most recent call last):<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt; 445, in &lt;module&gt;<br>&gt;&gt;&gt;&gt;     main()<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt; 441, in main<br>&gt;&gt;&gt;&gt;     parsed_args.func(parsed_args)<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt; 64, in build<br>&gt;&gt;&gt;&gt;     source_dir=SOURCE_DIR))<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt; 30, in run<br>&gt;&gt;&gt;&gt;     subprocess.check_call(command, shell=True)<br>&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt;&gt;&gt;&gt; line 540, in check_call<br>&gt;&gt;&gt;&gt;     raise CalledProcessError(retcode, cmd)<br>&gt;&gt;&gt;&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt;&gt;&gt;&gt; -scheme SwiftXCTest<br>&gt;&gt;&gt;&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt;&gt;&gt;&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt;&gt;&gt;&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt;&gt;&gt;&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt;&gt;&gt;&gt; returned non-zero exit status 65<br>&gt;&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Thu, Jun 30, 2016 at 11:38 PM, Brian Gesiak &lt;modocache at gmail.com&gt;<br>&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Sorry for the late reply to this -- I obviously need to update my<br>&gt;&gt;&gt;&gt;&gt; email settings! :(<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Could you pull down the latest changes to Swift, and let me know if<br>&gt;&gt;&gt;&gt;&gt; you&#39;re still experiencing difficulties compiling corelibs-xctest?<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:03 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt;&gt;&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Wow, the swift build is a success. Though there are a few warnings at<br>&gt;&gt;&gt;&gt;&gt;&gt; the end. I guess the issue was with cached values in the build directory.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; But, in the next step to build xctest using &quot;/utils/build-script<br>&gt;&gt;&gt;&gt;&gt;&gt; --preset corelibs-xctest&quot;, the build fails. The build error log is given<br>&gt;&gt;&gt;&gt;&gt;&gt; below.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; ------------------------<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br>&gt;&gt;&gt;&gt;&gt;&gt; ....<br>&gt;&gt;&gt;&gt;&gt;&gt; ....<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4<br>&gt;&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: compile command failed due to signal (use -v to<br>&gt;&gt;&gt;&gt;&gt;&gt; see invocation)<br>&gt;&gt;&gt;&gt;&gt;&gt; ** BUILD FAILED **<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; The following build commands failed:<br>&gt;&gt;&gt;&gt;&gt;&gt; CompileSwift normal x86_64<br>&gt;&gt;&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift<br>&gt;&gt;&gt;&gt;&gt;&gt; CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler<br>&gt;&gt;&gt;&gt;&gt;&gt; (2 failures)<br>&gt;&gt;&gt;&gt;&gt;&gt; Traceback (most recent call last):<br>&gt;&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt;&gt;&gt; 445, in &lt;module&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;     main()<br>&gt;&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt;&gt;&gt; 441, in main<br>&gt;&gt;&gt;&gt;&gt;&gt;     parsed_args.func(parsed_args)<br>&gt;&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt;&gt;&gt; 64, in build<br>&gt;&gt;&gt;&gt;&gt;&gt;     source_dir=SOURCE_DIR))<br>&gt;&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt;&gt; &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line<br>&gt;&gt;&gt;&gt;&gt;&gt; 30, in run<br>&gt;&gt;&gt;&gt;&gt;&gt;     subprocess.check_call(command, shell=True)<br>&gt;&gt;&gt;&gt;&gt;&gt;   File<br>&gt;&gt;&gt;&gt;&gt;&gt; &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;,<br>&gt;&gt;&gt;&gt;&gt;&gt; line 540, in check_call<br>&gt;&gt;&gt;&gt;&gt;&gt;     raise CalledProcessError(retcode, cmd)<br>&gt;&gt;&gt;&gt;&gt;&gt; subprocess.CalledProcessError: Command &#39;xcodebuild -workspace<br>&gt;&gt;&gt;&gt;&gt;&gt; /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace<br>&gt;&gt;&gt;&gt;&gt;&gt; -scheme SwiftXCTest<br>&gt;&gt;&gt;&gt;&gt;&gt; SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot;<br>&gt;&gt;&gt;&gt;&gt;&gt; SWIFT_LINK_OBJC_RUNTIME=YES<br>&gt;&gt;&gt;&gt;&gt;&gt; SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;<br>&gt;&gt;&gt;&gt;&gt;&gt; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt; returned non-zero exit status 65<br>&gt;&gt;&gt;&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt;&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;&gt;&gt;&gt; ../swift/utils/build-script: fatal error: command terminated with a<br>&gt;&gt;&gt;&gt;&gt;&gt; non-zero exit status 1, aborting<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:35 PM, Madhu Samuel &lt;madhusamuel at gmail.com<br>&gt;&gt;&gt;&gt;&gt;&gt; &gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi Brian Croom,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the quick response. I deleted the entire build directory<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; now. Initiated a new build. Fingers crossed...<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; Will update the status as soon as the build finishes.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; brian.s.croom at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hmm, have you tried deleting your `build/swift-macosx-x86_64/`<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; directory? I wonder if cached CMake values could cause that issue.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (By the way, I can confirm that getting the build going for the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; first time is the most challenging! I hope we can get things going for you<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; soon.)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; So after spending almost a week trying to build swift and core<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; libraries (mainly xctest) during the end of May un-successfully, I made up<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; my mind to give another attempt today.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I checkout the latest code from swift repo. Since the xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; documentation says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unfortunately, build-script -R gives the below error.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;MacOSX10.11.sdk&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My active developer directory is<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Let me know whether I miss anything? I assume getting the build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; working for the first time is the hardest, but there I am!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; madhusamuel at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Croom.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My first quick attempt using build-toolchain script to build my<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; own tool chain failed. Anyway I will give it another try and let you know<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the status.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; brian.s.croom at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the latest toolchain snapshot was released, and Corelibs Foundation has<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; been updated accordingly.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Until the next snapshot, an alternative to building your own<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain would be to check out an older commit of Foundation which still<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; builds with the compiler in the snapshot toolchain, since<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest doesn&#39;t depend on any of the more recent Foundation changes. I&#39;ve<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; had success using this commit:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; at the bottom of your original email.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. I&#39;ll double-check myself. In the meantime, you may want to try<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; building your own toolchain and using that.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xcodebuild) and using Xcode itself is the version of Swift that is used.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The build scripts build a Swift 3.0 compiler, then use that to build<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCTest. When using Xcode directly, you need to select a recent Swift<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; latest Swift toolchain from http://swift.org doesn&#39;t work,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; you may have to built your own toolchain. You can do so using the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; `utils/build-toolchain` script in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know!<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; You should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; instructions at<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; if I build XCTest using xcode using the SwiftXCTest scheme I am getting a<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; few errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47:<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;     let t =<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/2790baeb/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/f921fa5d507b31ef6984fd3d77ae710c?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Gesiak</string> &lt;modocache at gmail.com&gt;<p>July  6, 2016 at 04:00:00am</p></header><div class="content"><p>Yup, update-checkout should get everything you need!<br></p><p><br></p><p><br></p><p><br>On Tue, Jul 5, 2016 at 10:35 PM -0400, &quot;Madhu Samuel&quot; &lt;madhusamuel at gmail.com&gt; wrote:<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br>Thanks for getting back on that.<br>Just a quick check. I can get the latest master branch from all needed repos&#39; using swift/utils/update-checkout, rt?. Or do I need to explicitly checkout from each repo?<br>On Wed, Jul 6, 2016 at 10:35 AM, Brian Gesiak &lt;modocache at gmail.com&gt; wrote:<br>Looks like our continuous integration server works fine: https://github.com/apple/swift-corelibs-xctest/pull/132<br></p><p>Madhu, are you sure you&#39;re using the latest master branch commit on each of the apple/swift repositories? Specifically, you should pull down the latest changes on: swift, swift-llvm, swift-clang, swift-corelibs-foundation, swift-corelibs-xctest, swift-llbuild, and swift-package-manager. The CI server appears to be fine, so if you&#39;re seeing compilation errors, I think you may be using code that is out of date.<br>- Brian Gesiak<br></p><p>On Tue, Jul 5, 2016 at 10:36 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt; wrote:<br>Hmm, it does look like XCTest needs some work done to get things working with the latest Swift 3 changes made in the stdlib and corelibs-foundation. I don&#39;t have access to a development environment to investigate further, but as far as I can tell, this wouldn&#39;t build on Linux either. Has there been any indication of these issues from CI, I wonder?<br>On Friday, 1 July 2016, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br>I just found more error details in the log. You can find it below. Hope this helps.<br>Error 1--------------------------------------<br>CompileSwift normal x86_64 /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift    cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest    ...    .../Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift:65:71: error: &#39;lastPathComponent&#39; is unavailable: Use lastPathComponent on URL instead.        currentTestSuite = XCTestSuite(name: &quot;\(testBundle.bundlePath.lastPathComponent).xctest&quot;)                                                                      ^~~~~~~~~~~~~~~~~SwiftFoundation.String:173:16: note: &#39;lastPathComponent&#39; has been explicitly marked unavailable here    public var lastPathComponent: String { get }               ^<br></p><p>Error 2--------------------------------------CompileSwift normal x86_64 /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift    cd /Users/madhusamuel/dev/swift/swift-corelibs-xctest    ...    ...    /Objects-normal/x86_64/TestListing.swiftdeps -o /Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64/XCTest.build/Debug/SwiftXCTest.build/Objects-normal/x86_64/TestListing.o/Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift:45:46: error: cannot convert value of type &#39;String.Encoding&#39; to expected argument type &#39;UInt&#39;        print(NSString(data: json, encoding: NSUTF8StringEncoding)!)                                             ^~~~~~~~~~~~~~~~~~~~                                                                 .rawValueAssertion failed: (!failed &amp;&amp; &quot;Call arguments did not match up?&quot;), function coerceCallArguments, file /Users/madhusamuel/dev/swift/swift/lib/Sema/CSApply.cpp, line 4655.0  swift                    0x000000010b6a6d5b llvm::sys::PrintStackTrace(llvm::raw_ostream&amp;) + 431  swift                    0x000000010b6a5f86 llvm::sys::RunSignalHandlers() + 702  swift                    0x000000010b6a7631 SignalHandler(int) + 6413  libsystem_platform.dylib 0x00007fff8ecf552a _sigtramp + 264  swift                    0x000000010c290579 cmark_strbuf__initbuf + 739605  swift                    0x000000010b6a727e abort + 146  swift                    0x000000010b6a7261 __assert_rtn + 817  swift                    0x0000000108ff5bae (anonymous namespace)::ExprRewriter::coerceCallArguments(swift::Expr*, swift::Type, llvm::PointerUnion&lt;swift::ApplyExpr*, llvm::PointerEmbeddedInt&lt;unsigned int, 2&gt; &gt;, swift::constraints::ConstraintLocatorBuilder) + 61908  swift                    0x0000000108fe4b0d (anonymous namespace)::ExprRewriter::finishApply(swift::ApplyExpr*, swift::Type, swift::constraints::ConstraintLocatorBuilder) + 5419  swift                    0x0000000108ff638e (anonymous namespace)::ExprRewriter::visitApplyExpr(swift::ApplyExpr*) + 7810 swift                    0x0000000108fe2325 (anonymous namespace)::ExprRewriter::walkToExprPost(swift::Expr*) + 2111 swift                    0x0000000109180db0 (anonymous namespace)::Traversal::visit(swift::Expr*) + 16012 swift                    0x0000000109182969 (anonymous namespace)::Traversal::visit(swift::Expr*) + 725713 swift                    0x0000000109180145 swift::Expr::walk(swift::ASTWalker&amp;) + 5314 swift                    0x0000000108fdedcb swift::constraints::ConstraintSystem::applySolution(swift::constraints::Solution&amp;, swift::Expr*, swift::Type, bool, bool, bool) + 47515 swift                    0x0000000109081e53 swift::TypeChecker::typeCheckExpression(swift::Expr*&amp;, swift::DeclContext*, swift::TypeLoc, swift::ContextualTypePurpose, swift::OptionSet&lt;swift::TypeCheckExprFlags, unsigned int&gt;, swift::ExprTypeCheckListener*) + 73916 swift                    0x00000001090f9fc4 swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*, void, void, void, void&gt;::visit(swift::Stmt*) + 482017 swift                    0x00000001090f8e3e swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*, void, void, void, void&gt;::visit(swift::Stmt*) + 33418 swift                    0x00000001090f93d3 swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*, void, void, void, void&gt;::visit(swift::Stmt*) + 176319 swift                    0x00000001090f8e3e swift::ASTVisitor&lt;(anonymous namespace)::StmtChecker, void, swift::Stmt*, void, void, void, void&gt;::visit(swift::Stmt*) + 33420 swift                    0x00000001090f81f9 (anonymous namespace)::StmtChecker::typeCheckBody(swift::BraceStmt*&amp;) + 2521 swift                    0x00000001090f74df swift::TypeChecker::typeCheckFunctionBodyUntil(swift::FuncDecl*, swift::SourceLoc) + 38322 swift                    0x00000001090f7303 swift::TypeChecker::typeCheckAbstractFunctionBodyUntil(swift::AbstractFunctionDecl*, swift::SourceLoc) + 3523 swift                    0x00000001090f7e84 swift::TypeChecker::typeCheckAbstractFunctionBody(swift::AbstractFunctionDecl*) + 18024 swift                    0x00000001090b3116 typeCheckFunctionsAndExternalDecls(swift::TypeChecker&amp;) + 16625 swift                    0x00000001090b3db0 swift::performTypeChecking(swift::SourceFile&amp;, swift::TopLevelContext&amp;, swift::OptionSet&lt;swift::TypeCheckingFlags, unsigned int&gt;, unsigned int, unsigned int) + 156826 swift                    0x0000000108d714bc swift::CompilerInstance::performSema() + 391627 swift                    0x0000000108885c8a performCompile(swift::CompilerInstance&amp;, swift::CompilerInvocation&amp;, llvm::ArrayRef&lt;char const*&gt;, int&amp;, swift::FrontendObserver*) + 44228 swift                    0x000000010888483f swift::performFrontend(llvm::ArrayRef&lt;char const*&gt;, char const*, void*, swift::FrontendObserver*) + 289529 swift                    0x0000000108847300 main + 244830 libdyld.dylib            0x00007fff8bdc95ad start + 1Stack dump:<br></p><p><br></p><p>On Sat, Jul 2, 2016 at 8:29 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br>Hi Brian,<br>Thanks for you response.<br>Still I cannot compile corelibs-xctest with xcode-beta. It seems the error is too generic to debug! If xctest is not yet configured against xcode 8 beta, probably, I will wait. At this point, I am lazy to create my own toolchain, since my last attempt went bust!<br></p><p>The steps I followed<br>1. delete swift/build2. utils/update-checkout3. sudo  xcode-select -s /Applications/Xcode-beta.app/Contents/Developer4. utils/build-script -r -t   (success)5. utils/build-script -R.    (success)<br>6. $ cd swift-corelibs-xctest$ ../swift/utils/build-script --preset corelibs-xctest<br></p><p>Environment<br>Swift Version: Swift version 3.0 (swiftlang-800.0.30 clang-800.0.24)Xcode Environment: Version 8.0 beta (8S128d)Python Version: Python 2.7.10<br></p><p><br>The Error<br>CompileSwift normal x86_64 /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift<br></p><p>.........<br></p><p>&lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4&lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see invocation)** BUILD FAILED **<br></p><p>The following build commands failed:	CompileSwift normal x86_64 /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestMain.swift	CompileSwift normal x86_64 /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift	CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler(3 failures)Traceback (most recent call last):  File &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line 445, in &lt;module&gt;    main()  File &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line 441, in main    parsed_args.func(parsed_args)  File &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line 64, in build    source_dir=SOURCE_DIR))  File &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line 30, in run    subprocess.check_call(command, shell=True)  File &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;, line 540, in check_call    raise CalledProcessError(retcode, cmd)subprocess.CalledProcessError: Command &#39;xcodebuild -workspace /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace -scheme SwiftXCTest SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot; SWIFT_LINK_OBJC_RUNTIME=YES SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39; returned non-zero exit status 65../swift/utils/build-script: fatal error: command terminated with a non-zero exit status 1, aborting../swift/utils/build-script: fatal error: command terminated with a non-zero exit status 1, aborting<br></p><p>Regards,Madhu<br>On Thu, Jun 30, 2016 at 11:38 PM, Brian Gesiak &lt;modocache at gmail.com&gt; wrote:<br>Madhu,<br>Sorry for the late reply to this -- I obviously need to update my email settings! :(<br></p><p>Could you pull down the latest changes to Swift, and let me know if you&#39;re still experiencing difficulties compiling corelibs-xctest?<br>- Brian Gesiak<br></p><p>On Tue, Jun 21, 2016 at 12:03 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br>Wow, the swift build is a success. Though there are a few warnings at the end. I guess the issue was with cached values in the build directory.<br>But, in the next step to build xctest using &quot;/utils/build-script --preset corelibs-xctest&quot;, the build fails. The build error log is given below.<br>------------------------<br>CompileSwift normal x86_64 /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Public/XCTestExpectation.swift........<br>&lt;unknown&gt;:0: error: unable to execute command: Illegal instruction: 4&lt;unknown&gt;:0: error: compile command failed due to signal (use -v to see invocation)** BUILD FAILED **<br></p><p>The following build commands failed:	CompileSwift normal x86_64 /Users/madhusamuel/dev/swift/swift-corelibs-xctest/Sources/XCTest/Private/TestListing.swift	CompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler(2 failures)Traceback (most recent call last):  File &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line 445, in &lt;module&gt;    main()  File &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line 441, in main    parsed_args.func(parsed_args)  File &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line 64, in build    source_dir=SOURCE_DIR))  File &quot;/Users/madhusamuel/dev/swift/swift-corelibs-xctest/build_script.py&quot;, line 30, in run    subprocess.check_call(command, shell=True)  File &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py&quot;, line 540, in check_call    raise CalledProcessError(retcode, cmd)subprocess.CalledProcessError: Command &#39;xcodebuild -workspace /Users/madhusamuel/dev/swift/swift-corelibs-xctest/XCTest.xcworkspace -scheme SwiftXCTest SWIFT_EXEC=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/swift-macosx-x86_64/bin/swiftc&quot; SWIFT_LINK_OBJC_RUNTIME=YES SYMROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot; OBJROOT=&quot;/Users/madhusamuel/dev/swift/build/Ninja-ReleaseAssert/xctest-macosx-x86_64&quot;&#39; returned non-zero exit status 65../swift/utils/build-script: fatal error: command terminated with a non-zero exit status 1, aborting../swift/utils/build-script: fatal error: command terminated with a non-zero exit status 1, aborting<br></p><p><br>On Tue, Jun 21, 2016 at 12:35 PM, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br>Hi Brian Croom,<br>Thanks for the quick response. I deleted the entire build directory now. Initiated a new build. Fingers crossed... <br>Will update the status as soon as the build finishes. <br>On Tue, Jun 21, 2016 at 12:31 PM, Brian Croom &lt;brian.s.croom at gmail.com&gt; wrote:<br>Hmm, have you tried deleting your `build/swift-macosx-x86_64/` directory? I wonder if cached CMake values could cause that issue.<br>(By the way, I can confirm that getting the build going for the first time is the most challenging! I hope we can get things going for you soon.)<br>2016-06-20 22:22 GMT-04:00 Madhu Samuel &lt;madhusamuel at gmail.com&gt;:<br>So after spending almost a week trying to build swift and core libraries (mainly xctest) during the end of May un-successfully, I made up my mind to give another attempt today.<br>I checkout the latest code from swift repo. Since the xctest documentation says, &quot;Confirm you&#39;re able to build the Swift project using utils/build-script -R&quot;, that&#39;s where I started. <br>Unfortunately, build-script -R gives the below error.<br>&lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br></p><p><br>My active developer directory is &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.The toolchain is &#39;Xode 8.0&#39;<br>The build is taken in Mac OSX El Capitan 10.11.4<br>Let me know whether I miss anything? I assume getting the build working for the first time is the hardest, but there I am!<br>Any help is appreciated!<br>Regards,<br>Madhu<br>On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br>Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom. <br></p><p><br>My first quick attempt using build-toolchain script to build my own tool chain failed. Anyway I will give it another try and let you know the status.<br>On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt; wrote:<br>That&#39;s right, breaking changes have been made to Swift since the latest toolchain snapshot was released, and Corelibs Foundation has been updated accordingly.<br>Until the next snapshot, an alternative to building your own toolchain would be to check out an older commit of Foundation which still builds with the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend on any of the more recent Foundation changes. I&#39;ve had success using this commit: https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c <br>--Brian<br></p><p>söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;swift-corelibs-dev at swift.org&gt;:<br>Madhu,<br>Oy, my bad -- I only just noticed you put the toolchain version at the bottom of your original email.<br>It&#39;s possible the May 9th toolchain is already too old to build XCTest. I&#39;ll double-check myself. In the meantime, you may want to try building your own toolchain and using that.<br>- Brian Gesiak<br></p><p><br></p><p><br></p><p><br>On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;modocache at gmail.com&gt; wrote:<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br>Madhu,<br>Thanks for the report!<br>The main difference between the build scripts (which use xcodebuild) and using Xcode itself is the version of Swift that is used. The build scripts build a Swift 3.0 compiler, then use that to build XCTest. When using Xcode directly, you need to select a recent Swift toolchain yourself.<br>Which Swift toolchain are you using to compile XCTest in Xcode?<br>Our tests only make sure apple/swift master works. If the latest Swift toolchain from http://swift.org doesn&#39;t work, you may have to built your own toolchain. You can do so using the `utils/build-toolchain` script in the Swift repository.<br>Once you figure out your Swift toolchain version, let us know! You should be able to find out in the preferences pane in Xcode.<br>- Brian Gesiak<br></p><p><br></p><p><br></p><p>On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br>Hi All,<br>I am new to this forum. <br>I am trying to build the xctest project. I followed the instructions at https://github.com/apple/swift-corelibs-xctest<br>I am able to successfully build via the build scripts. But, if I build XCTest using xcode using the SwiftXCTest scheme I am getting a few errors. <br>1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;            let unmanaged = Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;    let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>etc.<br>My dev environment, OS: Mac OSX El Capitan 10.11.4 (15E65).Xcode Version: Version 7.3.1 (7D1014)XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>Any help is appreciated.<br>Regards,Madhu<br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160706/bb1b6bfc/attachment.html&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/f921fa5d507b31ef6984fd3d77ae710c?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Brian Gesiak</string> &lt;modocache at gmail.com&gt;<p>June 21, 2016 at 02:00:00am</p></header><div class="content"><p>Madhu,<br>In addition the checking out the latest code in apple/swift, please run `utils/update-checkout`, in order to update the other repositories Swift depends upon.<br>I haven&#39;t been able to build OS X since Xcode 8 beta was required for the build, so I&#39;m not sure about your specific error, unfortunately. Perhaps double-check that `xcode-select -print-path` prints out the path to Xcode 8...?<br>- Brian Gesiak<br></p><p><br></p><p><br>		_____________________________<br>From: Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>Sent: Monday, June 20, 2016 10:22 PM<br>Subject: Re: [swift-corelibs-dev] [XCTest] Cannot build using XCode<br>To: Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>Cc: Brian Gesiak &lt;modocache at gmail.com&gt;,  &lt;swift-corelibs-dev at swift.org&gt;<br></p><p><br>So after spending almost a week trying to build swift and core libraries (mainly xctest) during the end of May un-successfully, I made up my mind to give another attempt today.<br>I checkout the latest code from swift repo. Since the xctest documentation says, &quot;Confirm you&#39;re able to build the Swift project using utils/build-script -R&quot;, that&#39;s where I started. <br>Unfortunately, build-script -R gives the below error.<br>&lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br></p><p><br>My active developer directory is &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.The toolchain is &#39;Xode 8.0&#39;<br>The build is taken in Mac OSX El Capitan 10.11.4<br>Let me know whether I miss anything? I assume getting the build working for the first time is the hardest, but there I am!<br>Any help is appreciated!<br>Regards,<br>Madhu<br>On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt; wrote:<br></p><p><br>Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom. <br></p><p>My first quick attempt using build-toolchain script to build my own tool chain failed. Anyway I will give it another try and let you know the status.<br>On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt; wrote:<br>That&#39;s right, breaking changes have been made to Swift since the latest toolchain snapshot was released, and Corelibs Foundation has been updated accordingly.<br>Until the next snapshot, an alternative to building your own toolchain would be to check out an older commit of Foundation which still builds with the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend on any of the more recent Foundation changes. I&#39;ve had success using this commit: https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c <br>--Brian<br></p><p>söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;swift-corelibs-dev at swift.org&gt;:<br>Madhu,<br>Oy, my bad -- I only just noticed you put the toolchain version at the bottom of your original email.<br>It&#39;s possible the May 9th toolchain is already too old to build XCTest. I&#39;ll double-check myself. In the meantime, you may want to try building your own toolchain and using that.<br>- Brian Gesiak<br></p><p><br></p><p><br></p><p>On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;modocache at gmail.com&gt; wrote:<br></p><p>Madhu,<br>Thanks for the report!<br>The main difference between the build scripts (which use xcodebuild) and using Xcode itself is the version of Swift that is used. The build scripts build a Swift 3.0 compiler, then use that to build XCTest. When using Xcode directly, you need to select a recent Swift toolchain yourself.<br>Which Swift toolchain are you using to compile XCTest in Xcode?<br>Our tests only make sure apple/swift master works. If the latest Swift toolchain from http://swift.org doesn&#39;t work, you may have to built your own toolchain. You can do so using the `utils/build-toolchain` script in the Swift repository.<br>Once you figure out your Swift toolchain version, let us know! You should be able to find out in the preferences pane in Xcode.<br>- Brian Gesiak<br></p><p><br></p><p><br>On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br></p><p>Hi All,<br>I am new to this forum. <br>I am trying to build the xctest project. I followed the instructions at https://github.com/apple/swift-corelibs-xctest<br>I am able to successfully build via the build scripts. But, if I build XCTest using xcode using the SwiftXCTest scheme I am getting a few errors. <br>1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64: error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;            let unmanaged = Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;    let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>etc.<br>My dev environment, OS: Mac OSX El Capitan 10.11.4 (15E65).Xcode Version: Version 7.3.1 (7D1014)XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>Any help is appreciated.<br>Regards,Madhu<br></p><p><br></p><p><br></p><p><br>	<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160621/a2934e7e/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ab5319799c71dbcaabab40094e458ec3?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhusamuel at gmail.com&gt;<p>June 21, 2016 at 12:00:00pm</p></header><div class="content"><p>Hi Brian Gesiak,<br></p><p>Yep, I checked out the latest cod using &#39;utils/update-checkout&#39; and<br>xcode-select --print-path points to the XCode 8 beta.<br></p><p>On Tue, Jun 21, 2016 at 12:31 PM, Brian Gesiak &lt;modocache at gmail.com&gt; wrote:<br></p><p>&gt; Madhu,<br>&gt;<br>&gt; In addition the checking out the latest code in apple/swift, please run<br>&gt; `utils/update-checkout`, in order to update the other repositories Swift<br>&gt; depends upon.<br>&gt;<br>&gt; I haven&#39;t been able to build OS X since Xcode 8 beta was required for the<br>&gt; build, so I&#39;m not sure about your specific error, unfortunately. Perhaps<br>&gt; double-check that `xcode-select -print-path` prints out the path to Xcode<br>&gt; 8...?<br>&gt;<br>&gt; - Brian Gesiak<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; _____________________________<br>&gt; From: Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt; Sent: Monday, June 20, 2016 10:22 PM<br>&gt; Subject: Re: [swift-corelibs-dev] [XCTest] Cannot build using XCode<br>&gt; To: Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt; Cc: Brian Gesiak &lt;modocache at gmail.com&gt;, &lt;swift-corelibs-dev at swift.org&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; So after spending almost a week trying to build swift and core libraries<br>&gt; (mainly xctest) during the end of May un-successfully, I made up my mind to<br>&gt; give another attempt today.<br>&gt;<br>&gt; I checkout the latest code from swift repo. Since the xctest documentation<br>&gt; says, &quot;Confirm you&#39;re able to build the Swift project using<br>&gt; utils/build-script -R&quot;, that&#39;s where I started.<br>&gt;<br>&gt; Unfortunately, build-script -R gives the below error.<br>&gt;<br>&gt; &lt;unknown&gt;:0: error: Swift does not support the SDK &#39;MacOSX10.11.sdk&#39;<br>&gt;<br>&gt;<br>&gt; My active developer directory is<br>&gt; &#39;/Applications/Xcode-beta.app/Contents/Developer&#39;.<br>&gt; The toolchain is &#39;Xode 8.0&#39;<br>&gt;<br>&gt; The build is taken in Mac OSX El Capitan 10.11.4<br>&gt;<br>&gt; Let me know whether I miss anything? I assume getting the build working<br>&gt; for the first time is the hardest, but there I am!<br>&gt;<br>&gt; Any help is appreciated!<br>&gt;<br>&gt; Regards,<br>&gt; Madhu<br>&gt;<br>&gt; On Mon, May 30, 2016 at 8:32 AM, Madhu Samuel &lt;madhusamuel at gmail.com&gt;<br>&gt; wrote:<br>&gt;<br>&gt;&gt; Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom.<br>&gt;&gt;<br>&gt;&gt; My first quick attempt using build-toolchain script to build my own tool<br>&gt;&gt; chain failed. Anyway I will give it another try and let you know the status.<br>&gt;&gt;<br>&gt;&gt; On Mon, May 30, 2016 at 1:52 AM, Brian Croom &lt;brian.s.croom at gmail.com&gt;<br>&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; That&#39;s right, breaking changes have been made to Swift since the latest<br>&gt;&gt;&gt; toolchain snapshot was released, and Corelibs Foundation has been updated<br>&gt;&gt;&gt; accordingly.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Until the next snapshot, an alternative to building your own toolchain<br>&gt;&gt;&gt; would be to check out an older commit of Foundation which still builds with<br>&gt;&gt;&gt; the compiler in the snapshot toolchain, since XCTest doesn&#39;t depend on<br>&gt;&gt;&gt; any of the more recent Foundation changes. I&#39;ve had success using this<br>&gt;&gt;&gt; commit:<br>&gt;&gt;&gt; https://github.com/apple/swift-corelibs-foundation/commit/04d4f92870652160388f1c69de3fd7bb0656860c<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; --Brian<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; söndag 29 maj 2016 skrev Brian Gesiak via swift-corelibs-dev &lt;<br>&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt;:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Oy, my bad -- I only just noticed you put the toolchain version at the<br>&gt;&gt;&gt;&gt; bottom of your original email.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; It&#39;s possible the May 9th toolchain is already too old to build XCTest.<br>&gt;&gt;&gt;&gt; I&#39;ll double-check myself. In the meantime, you may want to try building<br>&gt;&gt;&gt;&gt; your own toolchain and using that.<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 7:23 AM -0700, &quot;Brian Gesiak&quot; &lt;<br>&gt;&gt;&gt;&gt; modocache at gmail.com&gt; wrote:<br>&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt; Madhu,<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Thanks for the report!<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; The main difference between the build scripts (which use xcodebuild)<br>&gt;&gt;&gt;&gt;&gt; and using Xcode itself is the version of Swift that is used. The build<br>&gt;&gt;&gt;&gt;&gt; scripts build a Swift 3.0 compiler, then use that to build XCTest. When<br>&gt;&gt;&gt;&gt;&gt; using Xcode directly, you need to select a recent Swift toolchain yourself.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Which Swift toolchain are you using to compile XCTest in Xcode?<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Our tests only make sure apple/swift master works. If the latest Swift<br>&gt;&gt;&gt;&gt;&gt; toolchain from http://swift.org doesn&#39;t work, you may have to built<br>&gt;&gt;&gt;&gt;&gt; your own toolchain. You can do so using the `utils/build-toolchain` script<br>&gt;&gt;&gt;&gt;&gt; in the Swift repository.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Once you figure out your Swift toolchain version, let us know! You<br>&gt;&gt;&gt;&gt;&gt; should be able to find out in the preferences pane in Xcode.<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; - Brian Gesiak<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; On Sun, May 29, 2016 at 1:24 AM -0700, &quot;Madhu Samuel via<br>&gt;&gt;&gt;&gt;&gt; swift-corelibs-dev&quot; &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt; Hi All,<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; I am new to this forum.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; I am trying to build the xctest project. I followed the instructions<br>&gt;&gt;&gt;&gt;&gt;&gt; at https://github.com/apple/swift-corelibs-xctest<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; I am able to successfully build via the build scripts. But, if I<br>&gt;&gt;&gt;&gt;&gt;&gt; build XCTest using xcode using the SwiftXCTest scheme I am getting a few<br>&gt;&gt;&gt;&gt;&gt;&gt; errors.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; 1. swift-corelibs-foundation/Foundation/NSXMLDTDNode.swift:242:64:<br>&gt;&gt;&gt;&gt;&gt;&gt; error: cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;             let unmanaged =<br>&gt;&gt;&gt;&gt;&gt;&gt; Unmanaged&lt;NSXMLDTDNode&gt;.fromOpaque(privateData)<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; 2. swift-corelibs-foundation/Foundation/NSTimer.swift:14:47: error:<br>&gt;&gt;&gt;&gt;&gt;&gt; cannot convert value of type &#39;UnsafeMutablePointer&lt;Void&gt;&#39; (aka<br>&gt;&gt;&gt;&gt;&gt;&gt; &#39;UnsafeMutablePointer&lt;()&gt;&#39;) to expected argument type &#39;OpaquePointer&#39;<br>&gt;&gt;&gt;&gt;&gt;&gt;     let t = Unmanaged&lt;NSTimer&gt;.fromOpaque(info!).takeUnretainedValue()<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; etc.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; My dev environment,<br>&gt;&gt;&gt;&gt;&gt;&gt; OS: Mac OSX El Capitan 10.11.4 (15E65).<br>&gt;&gt;&gt;&gt;&gt;&gt; Xcode Version: Version 7.3.1 (7D1014)<br>&gt;&gt;&gt;&gt;&gt;&gt; XCode Toolchain: Swift Development Snapshot 2016-05-09 (a)<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Any help is appreciated.<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt; Regards,<br>&gt;&gt;&gt;&gt;&gt;&gt; Madhu<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160621/68142abb/attachment.html&gt;<br></p></div></li></ul></li></ul></li></ul></li><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/29d10607b31a26ae0c0768647561ca69?s=50"></div><header><strong>[XCTest] Cannot build using XCode</strong> from <string>Madhu Samuel</string> &lt;madhu.samuel at becollective.com&gt;<p>May 29, 2016 at 10:00:00pm</p></header><div class="content"><p>Wow, that was a quick response. Thanks Brian Gesiak and Brian Croom. <br></p><p>My first quick attempt using build-toolchain script to build my own tool chain failed. Anyway I will give it another try and let you know the status.<br> <br>-------------- next part --------------<br>A non-text attachment was scrubbed...<br>Name: smime.p7s<br>Type: application/pkcs7-signature<br>Size: 1424 bytes<br>Desc: not available<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160529/94c8f1b9/attachment.p7s&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js?vsn=d"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
