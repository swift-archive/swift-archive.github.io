<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css?vsn=d">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg?vsn=d" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/d53b7c5f9b5f5557b9082face9b632a0?s=50"></div><header><strong>smoke test not very smoky?</strong> from <string>Dave Abrahams</string> &lt;dabrahams at apple.com&gt;<p>October 19, 2016 at 09:00:00am</p></header><div class="content"><p>on Wed Oct 19 2016, Dave Abrahams &lt;swift-dev-AT-swift.org&gt; wrote:<br></p><p>&gt; It still seems like, for a smoke test, we&#39;re doing way too much work.<br>&gt; This appears to be much more than what I get from build-script -t when<br>&gt; I run tests locally.  Maybe I&#39;m misunderstanding the intended role of<br>&gt; our smoke tests, but since nobody is correcting me, I&#39;m betting not.<br></p><p><br>Someone wrote to me privately:<br></p><p>  &quot;buildbot_linux_1404&quot; preset used in Linux smoke test contains<br>  &quot;--long-test&quot;.<br></p><p>This seems wrong to me.  Can we fix it?<br></p><p>&gt;<br>&gt; Anyway, regardless of the explanation, what can be done about this?<br>&gt; Between a spurious failure in LLDB and the length of the smoke test it<br>&gt; took several hours to be able to merge something that could not<br>&gt; possibly break the build, which seems absurd.<br>&gt;<br>&gt;&gt; On Oct 18, 2016, at 11:44 PM, mishal_shah &lt;mishal_shah at apple.com&gt; wrote:<br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt;&gt; On Oct 18, 2016, at 8:29 PM, Michael Gottesman &lt;mgottesman at apple.com&gt; wrote:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; On Oct 18, 2016, at 6:40 PM, Dave Abrahams via swift-dev &lt;swift-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; I thought the smoke test was supposed to be a fairly quick test<br>&gt;&gt;&gt;&gt; that just covered the basics, but it seems to be doing plenty of *really<br>&gt;&gt;&gt;&gt; long* tests, for example:<br>&gt;&gt;&gt;&gt; https://ci.swift.org/job/swift-PR-Linux-smoke-test/1916/console<br>&gt;&gt;&gt;&gt; which has already been running for over 30 minutes.  Am I missing<br>&gt;&gt;&gt;&gt; something?<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; I think people have over time been adding more to the Linux tests. But I am not in the know. Mishal, do you know whats happening here?<br>&gt;&gt; <br>&gt;&gt; This is most likely due to number cores we have for Linux bots, the new Linux bots are 12 cores vs 48 cores and we are running multiple executors on it. <br>&gt;&gt; <br>&gt;&gt; Old  -  48 cores / 4 executors = 12 cores<br>&gt;&gt; New - 12 cores / 2 executors = 6 cores<br>&gt;&gt; <br>&gt;&gt; Thanks, <br>&gt;&gt; Mishal Shah<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Michael<br>&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; -- <br>&gt;&gt;&gt;&gt; -Dave<br>&gt;&gt;&gt;&gt; _______________________________________________<br>&gt;&gt;&gt;&gt; swift-dev mailing list<br>&gt;&gt;&gt;&gt; swift-dev at swift.org<br>&gt;&gt;&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-dev<br>&gt;&gt;&gt; <br>&gt;&gt; <br>&gt; _______________________________________________<br>&gt; swift-dev mailing list<br>&gt; swift-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-dev<br></p><p>-- <br>-Dave<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/c4fe988326eed161b989d0c5521cb105?s=50"></div><header><strong>smoke test not very smoky?</strong> from <string>Jordan Rose</string> &lt;jordan_rose at apple.com&gt;<p>October 19, 2016 at 10:00:00am</p></header><div class="content"><p>&gt; On Oct 19, 2016, at 9:44, Dave Abrahams via swift-dev &lt;swift-dev at swift.org&gt; wrote:<br>&gt; <br>&gt; <br>&gt; on Wed Oct 19 2016, Dave Abrahams &lt;swift-dev-AT-swift.org &lt;http://swift-dev-at-swift.org/&gt;&gt; wrote:<br>&gt; <br>&gt;&gt; It still seems like, for a smoke test, we&#39;re doing way too much work.<br>&gt;&gt; This appears to be much more than what I get from build-script -t when<br>&gt;&gt; I run tests locally.  Maybe I&#39;m misunderstanding the intended role of<br>&gt;&gt; our smoke tests, but since nobody is correcting me, I&#39;m betting not.<br></p><p>Even smoke tests should run the validation tests…<br></p><p><br>&gt; Someone wrote to me privately:<br>&gt; <br>&gt;  &quot;buildbot_linux_1404&quot; preset used in Linux smoke test contains<br>&gt;  &quot;--long-test&quot;.<br>&gt; <br>&gt; This seems wrong to me.  Can we fix it?<br></p><p>…but I could see &quot;long tests&quot; going either way.<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20161019/bf2c6b5a/attachment.html&gt;<br></p></div></li><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/12dd65fe648ab7baf7b432dd586a8388?s=50"></div><header><strong>smoke test not very smoky?</strong> from <string>mishal_shah</string> &lt;mishal_shah at apple.com&gt;<p>October 19, 2016 at 11:00:00am</p></header><div class="content"><p>Yes, I will fix it today by creating new preset for smoke test.<br></p><p>Mishal Shah<br></p><p>&gt; On Oct 19, 2016, at 9:44 AM, Dave Abrahams via swift-dev &lt;swift-dev at swift.org&gt; wrote:<br>&gt; <br>&gt; <br>&gt; on Wed Oct 19 2016, Dave Abrahams &lt;swift-dev-AT-swift.org &lt;http://swift-dev-at-swift.org/&gt;&gt; wrote:<br>&gt; <br>&gt;&gt; It still seems like, for a smoke test, we&#39;re doing way too much work.<br>&gt;&gt; This appears to be much more than what I get from build-script -t when<br>&gt;&gt; I run tests locally.  Maybe I&#39;m misunderstanding the intended role of<br>&gt;&gt; our smoke tests, but since nobody is correcting me, I&#39;m betting not.<br>&gt; <br>&gt; <br>&gt; Someone wrote to me privately:<br>&gt; <br>&gt;  &quot;buildbot_linux_1404&quot; preset used in Linux smoke test contains<br>&gt;  &quot;--long-test&quot;.<br>&gt; <br>&gt; This seems wrong to me.  Can we fix it?<br>&gt; <br>&gt;&gt; <br>&gt;&gt; Anyway, regardless of the explanation, what can be done about this?<br>&gt;&gt; Between a spurious failure in LLDB and the length of the smoke test it<br>&gt;&gt; took several hours to be able to merge something that could not<br>&gt;&gt; possibly break the build, which seems absurd.<br>&gt;&gt; <br>&gt;&gt;&gt; On Oct 18, 2016, at 11:44 PM, mishal_shah &lt;mishal_shah at apple.com&gt; wrote:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; On Oct 18, 2016, at 8:29 PM, Michael Gottesman &lt;mgottesman at apple.com&gt; wrote:<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt;&gt; On Oct 18, 2016, at 6:40 PM, Dave Abrahams via swift-dev &lt;swift-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt;&gt; I thought the smoke test was supposed to be a fairly quick test<br>&gt;&gt;&gt;&gt;&gt; that just covered the basics, but it seems to be doing plenty of *really<br>&gt;&gt;&gt;&gt;&gt; long* tests, for example:<br>&gt;&gt;&gt;&gt;&gt; https://ci.swift.org/job/swift-PR-Linux-smoke-test/1916/console<br>&gt;&gt;&gt;&gt;&gt; which has already been running for over 30 minutes.  Am I missing<br>&gt;&gt;&gt;&gt;&gt; something?<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; I think people have over time been adding more to the Linux tests. But I am not in the know. Mishal, do you know whats happening here?<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; This is most likely due to number cores we have for Linux bots, the new Linux bots are 12 cores vs 48 cores and we are running multiple executors on it. <br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Old  -  48 cores / 4 executors = 12 cores<br>&gt;&gt;&gt; New - 12 cores / 2 executors = 6 cores<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Thanks, <br>&gt;&gt;&gt; Mishal Shah<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt; Michael<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt;&gt;&gt; -- <br>&gt;&gt;&gt;&gt;&gt; -Dave<br>&gt;&gt;&gt;&gt;&gt; _______________________________________________<br>&gt;&gt;&gt;&gt;&gt; swift-dev mailing list<br>&gt;&gt;&gt;&gt;&gt; swift-dev at swift.org<br>&gt;&gt;&gt;&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-dev<br>&gt;&gt;&gt;&gt; <br>&gt;&gt;&gt; <br>&gt;&gt; _______________________________________________<br>&gt;&gt; swift-dev mailing list<br>&gt;&gt; swift-dev at swift.org &lt;mailto:swift-dev at swift.org&gt;<br>&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-dev &lt;https://lists.swift.org/mailman/listinfo/swift-dev&gt;<br>&gt; <br>&gt; -- <br>&gt; -Dave<br>&gt; <br>&gt; _______________________________________________<br>&gt; swift-dev mailing list<br>&gt; swift-dev at swift.org &lt;mailto:swift-dev at swift.org&gt;<br>&gt; https://lists.swift.org/mailman/listinfo/swift-dev &lt;https://lists.swift.org/mailman/listinfo/swift-dev&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20161019/d21f7f0d/attachment.html&gt;<br></p></div></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js?vsn=d"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
