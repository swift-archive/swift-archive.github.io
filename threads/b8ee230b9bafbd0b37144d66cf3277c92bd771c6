<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ea125c5cd93ba84769387c17c973e2b3?s=50"></div><header><strong>Stack dump of the compiler?</strong> from <string>rintaro ishizaki</string> &lt;fs.output at gmail.com&gt;<p>October 26, 2016 at 12:00:00pm</p></header><div class="content"><p>Hi all,<br>I&#39;ve noticed recent build of swift compiler doesn&#39;t show the stack dump on<br>crash.<br></p><p>Here is the result with October 25, 2016 snapshot.<br>https://gist.github.com/rintaro/cb694898821fbbe8b02734862eb69534<br></p><p>On macOS, the dump completely doesn&#39;t show up.<br>On Linux, the dump shows up, but without symbols.<br></p><p>As for Linux, I figured out that it&#39;s because of recent change in<br>CMakeList.txt<br>cmake_minimum_required(VERSION 3.4.3)<br>Specifically, the policy change of CMP0065<br>https://cmake.org/cmake/help/v3.4/policy/CMP0065.html<br>backtrace_symbols_fd() needs symbols exported.<br></p><p>As for macOS, I&#39;m not sure why.<br></p><p>I don&#39;t know what is the right way to fix this.<br>cmake_policy(SET CMP0065 OLD)<br>would fix the Linux build but ...<br></p><p>Any thought?<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20161026/b8ee71c6/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ef689a9f25009bea0126bb577a86c41f?s=50"></div><header><strong>Stack dump of the compiler?</strong> from <string>Flamedoge</string> &lt;code.kchoi at gmail.com&gt;<p>October 26, 2016 at 11:00:00am</p></header><div class="content"><p>&gt; Do not add flags to export symbols from executables without the<br>ENABLE_EXPORTS<br>&lt;https://cmake.org/cmake/help/v3.4/prop_tgt/ENABLE_EXPORTS.html#prop_tgt:ENABLE_EXPORTS&gt;<br>target<br>property.<br></p><p>set_target_properties(${swift_binaries} properties ENABLE_EXPORTS 1)  ?<br>I don&#39;t know if it&#39;s this simple though.<br></p><p>On Tue, Oct 25, 2016 at 8:51 PM, rintaro ishizaki via swift-dev &lt;<br>swift-dev at swift.org&gt; wrote:<br></p><p>&gt; Hi all,<br>&gt; I&#39;ve noticed recent build of swift compiler doesn&#39;t show the stack dump on<br>&gt; crash.<br>&gt;<br>&gt; Here is the result with October 25, 2016 snapshot.<br>&gt; https://gist.github.com/rintaro/cb694898821fbbe8b02734862eb69534<br>&gt;<br>&gt; On macOS, the dump completely doesn&#39;t show up.<br>&gt; On Linux, the dump shows up, but without symbols.<br>&gt;<br>&gt; As for Linux, I figured out that it&#39;s because of recent change in<br>&gt; CMakeList.txt<br>&gt; cmake_minimum_required(VERSION 3.4.3)<br>&gt; Specifically, the policy change of CMP0065<br>&gt; https://cmake.org/cmake/help/v3.4/policy/CMP0065.html<br>&gt; backtrace_symbols_fd() needs symbols exported.<br>&gt;<br>&gt; As for macOS, I&#39;m not sure why.<br>&gt;<br>&gt; I don&#39;t know what is the right way to fix this.<br>&gt; cmake_policy(SET CMP0065 OLD)<br>&gt; would fix the Linux build but ...<br>&gt;<br>&gt; Any thought?<br>&gt;<br>&gt; _______________________________________________<br>&gt; swift-dev mailing list<br>&gt; swift-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-dev<br>&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20161026/0cbf22ae/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/ea125c5cd93ba84769387c17c973e2b3?s=50"></div><header><strong>Stack dump of the compiler?</strong> from <string>rintaro ishizaki</string> &lt;fs.output at gmail.com&gt;<p>October 27, 2016 at 12:00:00pm</p></header><div class="content"><p>&gt; set_target_properties(${swift_binaries} properties ENABLE_EXPORTS 1)  ?<br>&gt; I don&#39;t know if it&#39;s this simple though.<br></p><p>Yeah, that should work as well.<br>But, I&#39;m not sure which tools should be `ENABLE_EXPORT`ed.<br></p><p><br>2016-10-27 3:04 GMT+09:00 Flamedoge &lt;code.kchoi at gmail.com&gt;:<br></p><p>&gt; &gt; Do not add flags to export symbols from executables without the<br>&gt; ENABLE_EXPORTS<br>&gt; &lt;https://cmake.org/cmake/help/v3.4/prop_tgt/ENABLE_EXPORTS.html#prop_tgt:ENABLE_EXPORTS&gt; target<br>&gt; property.<br>&gt;<br>&gt; set_target_properties(${swift_binaries} properties ENABLE_EXPORTS 1)  ?<br>&gt; I don&#39;t know if it&#39;s this simple though.<br>&gt;<br>&gt; On Tue, Oct 25, 2016 at 8:51 PM, rintaro ishizaki via swift-dev &lt;<br>&gt; swift-dev at swift.org&gt; wrote:<br>&gt;<br>&gt;&gt; Hi all,<br>&gt;&gt; I&#39;ve noticed recent build of swift compiler doesn&#39;t show the stack dump<br>&gt;&gt; on crash.<br>&gt;&gt;<br>&gt;&gt; Here is the result with October 25, 2016 snapshot.<br>&gt;&gt; https://gist.github.com/rintaro/cb694898821fbbe8b02734862eb69534<br>&gt;&gt;<br>&gt;&gt; On macOS, the dump completely doesn&#39;t show up.<br>&gt;&gt; On Linux, the dump shows up, but without symbols.<br>&gt;&gt;<br>&gt;&gt; As for Linux, I figured out that it&#39;s because of recent change in<br>&gt;&gt; CMakeList.txt<br>&gt;&gt; cmake_minimum_required(VERSION 3.4.3)<br>&gt;&gt; Specifically, the policy change of CMP0065<br>&gt;&gt; https://cmake.org/cmake/help/v3.4/policy/CMP0065.html<br>&gt;&gt; backtrace_symbols_fd() needs symbols exported.<br>&gt;&gt;<br>&gt;&gt; As for macOS, I&#39;m not sure why.<br>&gt;&gt;<br>&gt;&gt; I don&#39;t know what is the right way to fix this.<br>&gt;&gt; cmake_policy(SET CMP0065 OLD)<br>&gt;&gt; would fix the Linux build but ...<br>&gt;&gt;<br>&gt;&gt; Any thought?<br>&gt;&gt;<br>&gt;&gt; _______________________________________________<br>&gt;&gt; swift-dev mailing list<br>&gt;&gt; swift-dev at swift.org<br>&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-dev<br>&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20161027/91079b69/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/17d2af4afb70023e28e655d17471a018?s=50"></div><header><strong>Stack dump of the compiler?</strong> from <string>Michael Gottesman</string> &lt;mgottesman at apple.com&gt;<p>October 27, 2016 at 09:00:00am</p></header><div class="content"><p>Are you talking about the prettyprint stack dump?<br></p><p>I think that may have gone away after the recent update to the newer llvm/clang. I think there is a bug to look into what happened here, but no one has had the time to look into it.<br></p><p>Michael<br></p><p>&gt; On Oct 26, 2016, at 8:53 PM, rintaro ishizaki via swift-dev &lt;swift-dev at swift.org&gt; wrote:<br>&gt; <br>&gt; &gt; set_target_properties(${swift_binaries} properties ENABLE_EXPORTS 1)  ?<br>&gt; &gt; I don&#39;t know if it&#39;s this simple though.<br>&gt; <br>&gt; Yeah, that should work as well.<br>&gt; But, I&#39;m not sure which tools should be `ENABLE_EXPORT`ed.<br>&gt; <br>&gt; <br>&gt; 2016-10-27 3:04 GMT+09:00 Flamedoge &lt;code.kchoi at gmail.com &lt;mailto:code.kchoi at gmail.com&gt;&gt;:<br>&gt; &gt; Do not add flags to export symbols from executables without the ENABLE_EXPORTS &lt;https://cmake.org/cmake/help/v3.4/prop_tgt/ENABLE_EXPORTS.html#prop_tgt:ENABLE_EXPORTS&gt; target property.<br>&gt; <br>&gt; set_target_properties(${swift_binaries} properties ENABLE_EXPORTS 1)  ?<br>&gt; I don&#39;t know if it&#39;s this simple though.<br>&gt; <br>&gt; On Tue, Oct 25, 2016 at 8:51 PM, rintaro ishizaki via swift-dev &lt;swift-dev at swift.org &lt;mailto:swift-dev at swift.org&gt;&gt; wrote:<br>&gt; Hi all,<br>&gt; I&#39;ve noticed recent build of swift compiler doesn&#39;t show the stack dump on crash.<br>&gt; <br>&gt; Here is the result with October 25, 2016 snapshot.<br>&gt; https://gist.github.com/rintaro/cb694898821fbbe8b02734862eb69534 &lt;https://gist.github.com/rintaro/cb694898821fbbe8b02734862eb69534&gt;<br>&gt; <br>&gt; On macOS, the dump completely doesn&#39;t show up.<br>&gt; On Linux, the dump shows up, but without symbols.<br>&gt; <br>&gt; As for Linux, I figured out that it&#39;s because of recent change in CMakeList.txt<br>&gt; cmake_minimum_required(VERSION 3.4.3)<br>&gt; Specifically, the policy change of CMP0065<br>&gt; https://cmake.org/cmake/help/v3.4/policy/CMP0065.html &lt;https://cmake.org/cmake/help/v3.4/policy/CMP0065.html&gt;<br>&gt; backtrace_symbols_fd() needs symbols exported.<br>&gt; <br>&gt; As for macOS, I&#39;m not sure why.<br>&gt; <br>&gt; I don&#39;t know what is the right way to fix this.<br>&gt; cmake_policy(SET CMP0065 OLD)<br>&gt; would fix the Linux build but ...<br>&gt; <br>&gt; Any thought?<br>&gt; <br>&gt; _______________________________________________<br>&gt; swift-dev mailing list<br>&gt; swift-dev at swift.org &lt;mailto:swift-dev at swift.org&gt;<br>&gt; https://lists.swift.org/mailman/listinfo/swift-dev &lt;https://lists.swift.org/mailman/listinfo/swift-dev&gt;<br>&gt; <br>&gt; <br>&gt; <br>&gt; _______________________________________________<br>&gt; swift-dev mailing list<br>&gt; swift-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-dev<br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20161027/8c28fc6b/attachment.html&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
