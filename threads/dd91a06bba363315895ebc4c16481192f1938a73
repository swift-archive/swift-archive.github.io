<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/886f7902c986a59d5cc184425d513c36?s=50"></div><header><strong>Add a while clause to for loops</strong> from <string>Tim Vermeulen</string> &lt;tvermeulen at me.com&gt;<p>June  7, 2016 at 10:00:00am</p></header><div class="content"><p>I agree. `where` and `while` fit so well in for loops, IMO, because a for loop already loops over the elements - this is exactly what filter and prefix also do. You’ve even given the current element a name (for myElement in …) and it’s more natural to just use that name in a `where` clause or `whil`e clause, than to have to deal with $0 inside a closure.<br></p><p>&gt; I strongly disagree.<br>&gt; <br>&gt; Exchanging<br>&gt; <br>&gt; forresultinresultswhereresult.value != .Warningwhileresult.value != .Error {<br>&gt; /// ...<br>&gt; }<br>&gt; <br>&gt; <br>&gt; for either<br>&gt; <br>&gt; forresultinresults.filter({ $0.value != .Warning }).prefix(while: { $0.value != .Error })) {<br>&gt; /// ...<br>&gt; }<br>&gt; <br>&gt; <br>&gt; or<br>&gt; <br>&gt; forresultinresults {<br>&gt; ifresult.value == .Warning {continue}<br>&gt; ifresult.value == .Error {break}<br>&gt; <br>&gt; /// ...<br>&gt; }<br>&gt; <br>&gt; <br>&gt; Seems like an absolute step back. Not to mention filter(_:) doesn&#39;t return a lazy collection, but will recreate it, while the `where` will do on-the-fly check.<br>&gt; <br>&gt; &gt; On Jun 7, 2016, at 1:34 AM, Xiaodi Wu via swift-evolution&lt;swift-evolution at swift.org(mailto:swift-evolution at swift.org)&gt;wrote:<br>&gt; &gt; Personally, given this discussion and the one about `where` in if and while statements, I would not be opposed to elimination of `where` in control statements altogether.<br>&gt; &gt; <br>&gt; &gt; My reasoning would be that words like filter and prefix unambiguously indicate what happens to elements of a sequence for which the predicate returns false, whereas words like where and while are ambiguous.<br>&gt; &gt; <br>&gt; &gt; On Mon, Jun 6, 2016 at 17:52 Tim Vermeulen&lt;tvermeulen at me.com(mailto:tvermeulen at me.com)&gt;wrote:<br>&gt; &gt; &gt; I didn’t mean we should really get rid of the `where` clause, it’s great. I guess the point I was trying to make is that we can use a `where` clause with a `for` loop in Swift, despite the existence of the `filter` method. So despite `prefix(while:)` in Swift 3, there might be room for a `while` clause. I think it makes the code a lot more readable, much like how `where` can make a `for` loop a lot more readable than using `filter`.<br>&gt; &gt; &gt; <br>&gt; &gt; &gt; &gt;The burden of proof for adding new features is different from that for taking away existing features.<br>&gt; &gt; &gt; &gt;<br>&gt; &gt; &gt; &gt;If a feature doesn&#39;t yet exist, a successful proposal will show how it provides additional and non-trivial utility. If a feature already exists, a successful proposal to remove it will show how it is harmful to the language or contrary to the direction in which it is evolving.<br>&gt; &gt; &gt; &gt;<br>&gt; &gt; &gt; &gt;On Mon, Jun 6, 2016 at 15:38 Tim Vermeulen&lt;tvermeulen at me.com(mailto:tvermeulen at me.com)(mailto:tvermeulen at me.com)&gt;wrote:<br>&gt; &gt; &gt; &gt;&gt;The functionality of the `where` clause in `for` loops also already can be mimicked using `filter`. Wouldn’t we have to get ride of the `where` clause by that logic?<br>&gt; &gt; &gt; &gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;The functionality being asked for here is already accepted for inclusion to Swift as a method on Sequence named `prefix(while:)` (SE-0045):<br>&gt; &gt; &gt; &gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;`for element in array.prefix(while: { someCondition($0) }) { ... }`<br>&gt; &gt; &gt; &gt;&gt;&gt;On Mon, Jun 6, 2016 at 14:31 T.J. Usiyan via swift-evolution&lt;swift-evolution at swift.org(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)&gt;wrote:<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;(As I said, I can live with `while`. I am simply presenting a potential point of confusion.)<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;You aren&#39;t evaluating the statements in the loop &#39;while&#39; the condition isn&#39;t met. The first time that the condition isn&#39;t met, evaluation of the loop stops. I get that this is technically true for the `while` construct but I suggest that the only reason that it works there is that &#39;stopping the first time that the condition isn&#39;t met&#39; *is* the construct. Here, we have a loop that we execute for each thing and we&#39;re tacking on/intermingling the `while` construct.<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;On Mon, Jun 6, 2016 at 2:19 PM, Thorsten Seitz&lt;tseitz42 at icloud.com(mailto:tseitz42 at icloud.com)(mailto:tseitz42 at icloud.com)(mailto:tseitz42 at icloud.com)&gt;wrote:<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;Am 06.06.2016 um 19:43 schrieb Tim Vermeulen via swift-evolution&lt;swift-evolution at swift.org(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)&gt;:<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;I also considered `until`, but it would be a bit confusing that `where` makes sure a condition is met, while `until` makes sure the condition isn’t met. I think `while` makes more sense because it corresponds to `break` in the same way that `where` corresponds to `continue`.<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;That&#39;s a good argument! The only drawback is that `while` and `where` look quite similar at a glance.<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;-Thorsten<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;`while`, to me, actually reads like it should do what `where` does.<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;To me, `while` reads like it should stop the loop once the condition isn’t met, just like in a while loop.<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;I hadn&#39;t thought about `while` in this regard but wouldn&#39;t `until` make more sense? `while`, to me, actually reads like it should do what `where` does. In any case, whether it is `while` or `where`, this seems like a reasonable feature in my opinion.<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;TJ<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;On Mon, Jun 6, 2016 at 5:15 AM, Tim Vermeulen via swift-evolution&lt;swift-evolution at swift.org(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)&gt;wrote:<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;We can already use a where clause in a for loop like this:<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;for element in array where someCondition(element) {<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;// …<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;}<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;which basically acts like<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;for element in array {<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;guard someCondition(element) else { continue }<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;// …<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;}<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;Sometimes you want to break out of the loop when the condition isn’t met instead. I propose a while clause:<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;for element in array while someCondition(element) {<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;// …<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;}<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;which would be syntactic sugar for<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;for element in array {<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;guard someCondition(element) else { break }<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;…<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;}<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;I can see this particularly being useful if we have a sorted array and we already know that once the condition isn’t met, it won’t be met either for subsequent elements. Another use case could be an infinite sequence that we want to cut off somewhere (which is simply not possible using a where clause).<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;_______________________________________________<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;swift-evolution mailing list<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;swift-evolution at swift.org(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;https://lists.swift.org/mailman/listinfo/swift-evolution<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;_______________________________________________<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;swift-evolution mailing list<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;swift-evolution at swift.org(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;&gt;&gt;https://lists.swift.org/mailman/listinfo/swift-evolution<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;_______________________________________________<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;swift-evolution mailing list<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;swift-evolution at swift.org(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)(mailto:swift-evolution at swift.org)<br>&gt; &gt; &gt; &gt;&gt;&gt;&gt;https://lists.swift.org/mailman/listinfo/swift-evolution<br>&gt; &gt; &gt; &gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;<br>&gt; &gt; &gt; &gt;&gt;&gt;_______________________________________________<br>&gt; &gt; &gt; &gt;swift-evolution mailing list<br>&gt; &gt; &gt; &gt;swift-evolution at swift.org(mailto:swift-evolution at swift.org)<br>&gt; &gt; &gt; &gt;https://lists.swift.org/mailman/listinfo/swift-evolution<br>&gt; &gt; &gt; &gt;<br>&gt; &gt; &gt; &gt;<br>&gt; &gt; &gt; &gt;_______________________________________________<br>&gt; &gt; swift-evolution mailing list<br>&gt; &gt; swift-evolution at swift.org(mailto:swift-evolution at swift.org)<br>&gt; &gt; https://lists.swift.org/mailman/listinfo/swift-evolution<br>&gt; <br>&gt; <br>&gt;<br></p></div></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
