<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/835a02e14abc997b2c9c9a65f1d70732?s=50"></div><header><strong>Compiling corelibs-libdispatch</strong> from <string>Andrey Fidrya</string> &lt;af at zabiyaka.com&gt;<p>August  7, 2016 at 01:00:00pm</p></header><div class="content"><p>Hi,<br></p><p>I&#39;m trying to compile swift-3.0-branch of swift-corelibs-libdispatch on Ubuntu 14,<br>but swiftc crashes. Which Swift version should i use?<br></p><p>I&#39;m using 2016-07-25 binary snapshot.<br></p><p>$ swift --version<br>Swift version 3.0-dev (LLVM 440a472499, Clang e10506ae1c, Swift 395e967875)<br>Target: x86_64-unknown-linux-gnu<br></p><p>$ clang --version<br>clang version 3.8.0-2ubuntu3~trusty4 (tags/RELEASE_380/final)<br>Target: x86_64-unknown-linux-gnu<br>Thread model: posix<br>InstalledDir: /usr/bin<br>I&#39;ve tried swift-3.0-preview branches but they crash in the same place.<br>exeperimental/foundation branch builds succesfully.<br></p><p>Steps I&#39;ve done:<br></p><p>sudo apt-get install autoconf libtool libkqueue-dev libkqueue0 libcurl4-openssl-dev libbsd-dev libblocksruntime-dev<br>export SWIFT_HOME=~/.swiftenv/versions/DEVELOPMENT-SNAPSHOT-2016-07-25-a<br>git clone --recursive -b swift-3.0-branch https://github.com/apple/swift-corelibs-libdispatch.git<br>cd swift-corelibs-libdispatch<br>sh ./autogen.sh<br>./configure --with-swift-toolchain=$SWIFT_HOME/usr --prefix=$SWIFT_HOME/usr<br>make<br></p><p><br>Build log tail:<br></p><p>/home/user/.swiftenv/versions/DEVELOPMENT-SNAPSHOT-2016-07-25-a/usr/bin/swiftc -frontend -c /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Data.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Dispatch.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/IO.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Private.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Queue.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Source.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Time.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Wrapper.swift -primary-file /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.swift \<br>	-Xcc -fmodule-map-file=/home/user/dev/swift-corelibs-libdispatch/dispatch/module.modulemap -I/home/user/dev/swift-corelibs-libdispatch -Xcc -fblocks -O -module-name Dispatch -module-link-name dispatch \<br>	-o /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o -emit-module-path /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o.~partial.swiftmodule \<br>	-emit-module-doc-path /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o.~partial.swiftdoc -emit-dependencies-path /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o.d \<br>	-emit-reference-dependencies-path /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o.swiftdeps \<br>	-module-cache-path ..<br>swiftc: /home/buildnode/jenkins/workspace/oss-swift-package-linux-ubuntu-14_04/llvm/tools/clang/lib/Serialization/ASTWriter.cpp:2376: unsigned int clang::ASTWriter::getSubmoduleID(clang::Module *): Assertion `(ID || !Mod) &amp;&amp; &quot;asked for module ID for non-local, non-imported module&quot;&#39; failed.<br>0  swiftc          0x0000000003321058 llvm::sys::PrintStackTrace(llvm::raw_ostream&amp;) + 40<br>1  swiftc          0x000000000331f826 llvm::sys::RunSignalHandlers() + 54<br>2  swiftc          0x0000000003321b8a<br>3  libpthread.so.0 0x00002b3be0734330<br>4  libc.so.6       0x00002b3be1c02c37 gsignal + 55<br>5  libc.so.6       0x00002b3be1c06028 abort + 328<br>6  libc.so.6       0x00002b3be1bfbbf6<br>7  libc.so.6       0x00002b3be1bfbca2<br>8  swiftc          0x000000000168b436 clang::ASTWriter::WritePreprocessor(clang::Preprocessor const&amp;, bool) + 5974<br>9  swiftc          0x00000000016a6558 clang::ASTWriter::WriteASTCore(clang::Sema&amp;, llvm::StringRef, std::string const&amp;, clang::Module*) + 12488<br>10 swiftc          0x00000000016a344d clang::ASTWriter::WriteAST(clang::Sema&amp;, std::string const&amp;, clang::Module*, llvm::StringRef, bool) + 589<br>11 swiftc          0x00000000016dfa2b clang::PCHGenerator::HandleTranslationUnit(clang::ASTContext&amp;) + 91<br>12 swiftc          0x00000000014e983c clang::MultiplexConsumer::HandleTranslationUnit(clang::ASTContext&amp;) + 44<br>13 swiftc          0x00000000016ec726 clang::ParseAST(clang::Sema&amp;, bool, bool) + 614<br>14 swiftc          0x00000000014c5595 clang::FrontendAction::Execute() + 69<br>15 swiftc          0x000000000148e571 clang::CompilerInstance::ExecuteAction(clang::FrontendAction&amp;) + 1153<br>16 swiftc          0x00000000032befba llvm::CrashRecoveryContext::RunSafely(llvm::function_ref&lt;void ()&gt;) + 266<br>17 swiftc          0x00000000032bf144<br>18 swiftc          0x0000000003322aea<br>19 libpthread.so.0 0x00002b3be072c184<br>20 libc.so.6       0x00002b3be1cc637d clone + 109<br>Stack dump:<br>0.	&lt;eof&gt; parser at end of file<br>make[2]: *** [/home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o] Aborted (core dumped)<br>make[2]: Leaving directory `/home/user/dev/swift-corelibs-libdispatch/src&#39;<br>make[1]: *** [all] Error 2<br>make[1]: Leaving directory `/home/user/dev/swift-corelibs-libdispatch/src&#39;<br>make: *** [all-recursive] Error 1<br>user at smud:~/dev/swift-corelibs-libdispatch$ <br></p><p>Regards,<br>Andrey<br></p><p><br></p><p>Andrey Fidrya<br>af at zabiyaka.com<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/835a02e14abc997b2c9c9a65f1d70732?s=50"></div><header><strong>Compiling corelibs-libdispatch</strong> from <string>Andrey Fidrya</string> &lt;af at zabiyaka.com&gt;<p>August  8, 2016 at 12:00:00am</p></header><div class="content"><p>I was able to build it with 2016-08-04-a snapshot.<br></p><p>Regards,<br>Andrey<br></p><p>&gt; On 07 Aug 2016, at 13:43, Andrey Fidrya &lt;af at zabiyaka.com&gt; wrote:<br>&gt; <br>&gt; Hi,<br>&gt; <br>&gt; I&#39;m trying to compile swift-3.0-branch of swift-corelibs-libdispatch on Ubuntu 14,<br>&gt; but swiftc crashes. Which Swift version should i use?<br>&gt; <br>&gt; I&#39;m using 2016-07-25 binary snapshot.<br>&gt; <br>&gt; $ swift --version<br>&gt; Swift version 3.0-dev (LLVM 440a472499, Clang e10506ae1c, Swift 395e967875)<br>&gt; Target: x86_64-unknown-linux-gnu<br>&gt; <br>&gt; $ clang --version<br>&gt; clang version 3.8.0-2ubuntu3~trusty4 (tags/RELEASE_380/final)<br>&gt; Target: x86_64-unknown-linux-gnu<br>&gt; Thread model: posix<br>&gt; InstalledDir: /usr/bin<br>&gt; I&#39;ve tried swift-3.0-preview branches but they crash in the same place.<br>&gt; exeperimental/foundation branch builds succesfully.<br>&gt; <br>&gt; Steps I&#39;ve done:<br>&gt; <br>&gt; sudo apt-get install autoconf libtool libkqueue-dev libkqueue0 libcurl4-openssl-dev libbsd-dev libblocksruntime-dev<br>&gt; export SWIFT_HOME=~/.swiftenv/versions/DEVELOPMENT-SNAPSHOT-2016-07-25-a<br>&gt; git clone --recursive -b swift-3.0-branch https://github.com/apple/swift-corelibs-libdispatch.git<br>&gt; cd swift-corelibs-libdispatch<br>&gt; sh ./autogen.sh<br>&gt; ./configure --with-swift-toolchain=$SWIFT_HOME/usr --prefix=$SWIFT_HOME/usr<br>&gt; make<br>&gt; <br>&gt; <br>&gt; Build log tail:<br>&gt; <br>&gt; /home/user/.swiftenv/versions/DEVELOPMENT-SNAPSHOT-2016-07-25-a/usr/bin/swiftc -frontend -c /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Data.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Dispatch.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/IO.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Private.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Queue.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Source.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Time.swift /home/user/dev/swift-corelibs-libdispatch/src/swift/Wrapper.swift -primary-file /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.swift \<br>&gt; 	-Xcc -fmodule-map-file=/home/user/dev/swift-corelibs-libdispatch/dispatch/module.modulemap -I/home/user/dev/swift-corelibs-libdispatch -Xcc -fblocks -O -module-name Dispatch -module-link-name dispatch \<br>&gt; 	-o /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o -emit-module-path /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o.~partial.swiftmodule \<br>&gt; 	-emit-module-doc-path /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o.~partial.swiftdoc -emit-dependencies-path /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o.d \<br>&gt; 	-emit-reference-dependencies-path /home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o.swiftdeps \<br>&gt; 	-module-cache-path ..<br>&gt; swiftc: /home/buildnode/jenkins/workspace/oss-swift-package-linux-ubuntu-14_04/llvm/tools/clang/lib/Serialization/ASTWriter.cpp:2376: unsigned int clang::ASTWriter::getSubmoduleID(clang::Module *): Assertion `(ID || !Mod) &amp;&amp; &quot;asked for module ID for non-local, non-imported module&quot;&#39; failed.<br>&gt; 0  swiftc          0x0000000003321058 llvm::sys::PrintStackTrace(llvm::raw_ostream&amp;) + 40<br>&gt; 1  swiftc          0x000000000331f826 llvm::sys::RunSignalHandlers() + 54<br>&gt; 2  swiftc          0x0000000003321b8a<br>&gt; 3  libpthread.so.0 0x00002b3be0734330<br>&gt; 4  libc.so.6       0x00002b3be1c02c37 gsignal + 55<br>&gt; 5  libc.so.6       0x00002b3be1c06028 abort + 328<br>&gt; 6  libc.so.6       0x00002b3be1bfbbf6<br>&gt; 7  libc.so.6       0x00002b3be1bfbca2<br>&gt; 8  swiftc          0x000000000168b436 clang::ASTWriter::WritePreprocessor(clang::Preprocessor const&amp;, bool) + 5974<br>&gt; 9  swiftc          0x00000000016a6558 clang::ASTWriter::WriteASTCore(clang::Sema&amp;, llvm::StringRef, std::string const&amp;, clang::Module*) + 12488<br>&gt; 10 swiftc          0x00000000016a344d clang::ASTWriter::WriteAST(clang::Sema&amp;, std::string const&amp;, clang::Module*, llvm::StringRef, bool) + 589<br>&gt; 11 swiftc          0x00000000016dfa2b clang::PCHGenerator::HandleTranslationUnit(clang::ASTContext&amp;) + 91<br>&gt; 12 swiftc          0x00000000014e983c clang::MultiplexConsumer::HandleTranslationUnit(clang::ASTContext&amp;) + 44<br>&gt; 13 swiftc          0x00000000016ec726 clang::ParseAST(clang::Sema&amp;, bool, bool) + 614<br>&gt; 14 swiftc          0x00000000014c5595 clang::FrontendAction::Execute() + 69<br>&gt; 15 swiftc          0x000000000148e571 clang::CompilerInstance::ExecuteAction(clang::FrontendAction&amp;) + 1153<br>&gt; 16 swiftc          0x00000000032befba llvm::CrashRecoveryContext::RunSafely(llvm::function_ref&lt;void ()&gt;) + 266<br>&gt; 17 swiftc          0x00000000032bf144<br>&gt; 18 swiftc          0x0000000003322aea<br>&gt; 19 libpthread.so.0 0x00002b3be072c184<br>&gt; 20 libc.so.6       0x00002b3be1cc637d clone + 109<br>&gt; Stack dump:<br>&gt; 0.	&lt;eof&gt; parser at end of file<br>&gt; make[2]: *** [/home/user/dev/swift-corelibs-libdispatch/src/swift/Block.o] Aborted (core dumped)<br>&gt; make[2]: Leaving directory `/home/user/dev/swift-corelibs-libdispatch/src&#39;<br>&gt; make[1]: *** [all] Error 2<br>&gt; make[1]: Leaving directory `/home/user/dev/swift-corelibs-libdispatch/src&#39;<br>&gt; make: *** [all-recursive] Error 1<br>&gt; user at smud:~/dev/swift-corelibs-libdispatch$ <br>&gt; <br>&gt; Regards,<br>&gt; Andrey<br>&gt; <br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20160808/67829be4/attachment.html&gt;<br></p></div></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
