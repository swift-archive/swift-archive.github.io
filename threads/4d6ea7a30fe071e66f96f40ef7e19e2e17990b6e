<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/e2303da56647c283b6d8e58d5831faca?s=50"></div><header><strong>Unresolved enumeration symbols</strong> from <string>Joseph Bell</string> &lt;joe at iachieved.it&gt;<p>December 12, 2015 at 05:00:00pm</p></header><div class="content"><p>Howdy.<br></p><p>I&#39;m using the basic build instructions (checking out swift, llvm, clang,<br>etc.) and can successfully build a packaged release with<br></p><p>./swift/utils/build-script --preset=buildbot_linux_1404<br>install_destdir=${INSTALL_DIR} i<br>nstallable_package=${PACKAGE}<br></p><p>However, the resulting build output for Foundation is missing enumeration<br>types, and I noticed it in particular in the NSDateFormatter class:<br></p><p>➜  Foundation git:(master) ✗ nm NSDateFormatter.swift.o|grep Medium<br></p><p><br>Of course this results in the symbols not being included in libFoundation.so<br>➜  Foundation git:(master) ✗ nm -D libFoundation.so |grep Medium<br></p><p>Looking at my build from source I am missing about 200K of symbols that the<br>SNAPSHOT build is including:<br></p><p>  Foundation git:(master) ✗ nm -D<br>/opt/apple/swift-2.2-SNAPSHOT-2015-12-10-a-ubuntu14.04/usr/lib/swift/linux/libFoundation.so|grep<br>Medium<br>000000000034ab40 T<br>_TFO10Foundation20NSDateFormatterStyle11MediumStyleFMS0_S0_<br>00000000003944e0 T _TFO10Foundation21NSFormattingUnitStyle6MediumFMS0_S0_<br>000000000034b330 T<br>_TFO10Foundation28NSDateIntervalFormatterStyle11MediumStyleFMS0_S0_<br>00000000003f5820 T<br>_TFO10Foundation36NSPersonNameComponentsFormatterStyle6MediumFMS0_S0_<br></p><p>Thanks for any thoughts,<br>Joe<br></p><p>PS - I am using the master branch across all repositories.<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20151212/4d6e0b6e/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/be4c3c3b76631a155e1358db48066692?s=50"></div><header><strong>Unresolved enumeration symbols</strong> from <string>Tony Parker</string> &lt;anthony.parker at apple.com&gt;<p>December 12, 2015 at 05:00:00pm</p></header><div class="content"><p>Hi Joe,<br></p><p>I see you used the preset for linux, but I just wanted to double-check that you are indeed building on Linux.<br></p><p>- Tony<br></p><p>&gt; On Dec 12, 2015, at 3:48 PM, Joseph Bell via swift-corelibs-dev &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt; <br>&gt; Howdy.<br>&gt; <br>&gt; I&#39;m using the basic build instructions (checking out swift, llvm, clang, etc.) and can successfully build a packaged release with <br>&gt; <br>&gt; ./swift/utils/build-script --preset=buildbot_linux_1404 install_destdir=${INSTALL_DIR} i<br>&gt; nstallable_package=${PACKAGE}<br>&gt; <br>&gt; However, the resulting build output for Foundation is missing enumeration types, and I noticed it in particular in the NSDateFormatter class:<br>&gt; <br>&gt; ➜  Foundation git:(master) ✗ nm NSDateFormatter.swift.o|grep Medium<br>&gt; <br>&gt; <br>&gt; Of course this results in the symbols not being included in libFoundation.so<br>&gt; ➜  Foundation git:(master) ✗ nm -D libFoundation.so |grep Medium<br>&gt; <br>&gt; Looking at my build from source I am missing about 200K of symbols that the SNAPSHOT build is including:<br>&gt; <br>&gt;   Foundation git:(master) ✗ nm -D /opt/apple/swift-2.2-SNAPSHOT-2015-12-10-a-ubuntu14.04/usr/lib/swift/linux/libFoundation.so|grep Medium<br>&gt; 000000000034ab40 T _TFO10Foundation20NSDateFormatterStyle11MediumStyleFMS0_S0_<br>&gt; 00000000003944e0 T _TFO10Foundation21NSFormattingUnitStyle6MediumFMS0_S0_<br>&gt; 000000000034b330 T _TFO10Foundation28NSDateIntervalFormatterStyle11MediumStyleFMS0_S0_<br>&gt; 00000000003f5820 T _TFO10Foundation36NSPersonNameComponentsFormatterStyle6MediumFMS0_S0_<br>&gt; <br>&gt; Thanks for any thoughts,<br>&gt; Joe<br>&gt; <br>&gt; PS - I am using the master branch across all repositories.<br>&gt; <br>&gt;  _______________________________________________<br>&gt; swift-corelibs-dev mailing list<br>&gt; swift-corelibs-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-corelibs-dev<br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20151212/37d7ec54/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/e2303da56647c283b6d8e58d5831faca?s=50"></div><header><strong>Unresolved enumeration symbols</strong> from <string>Joseph Bell</string> &lt;joe at iachieved.it&gt;<p>December 12, 2015 at 07:00:00pm</p></header><div class="content"><p>Tony, yes, I&#39;m building on an Ubuntu 14.04 system.  I can provide any uname or kernel information if you need.<br></p><p>Joe<br></p><p>&gt; On Dec 12, 2015, at 7:17 PM, Tony Parker &lt;anthony.parker at apple.com&gt; wrote:<br>&gt; <br>&gt; Hi Joe,<br>&gt; <br>&gt; I see you used the preset for linux, but I just wanted to double-check that you are indeed building on Linux.<br>&gt; <br>&gt; - Tony<br>&gt; <br>&gt;&gt; On Dec 12, 2015, at 3:48 PM, Joseph Bell via swift-corelibs-dev &lt;swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt; <br>&gt;&gt; Howdy.<br>&gt;&gt; <br>&gt;&gt; I&#39;m using the basic build instructions (checking out swift, llvm, clang, etc.) and can successfully build a packaged release with <br>&gt;&gt; <br>&gt;&gt; ./swift/utils/build-script --preset=buildbot_linux_1404 install_destdir=${INSTALL_DIR} i<br>&gt;&gt; nstallable_package=${PACKAGE}<br>&gt;&gt; <br>&gt;&gt; However, the resulting build output for Foundation is missing enumeration types, and I noticed it in particular in the NSDateFormatter class:<br>&gt;&gt; <br>&gt;&gt; ➜  Foundation git:(master) ✗ nm NSDateFormatter.swift.o|grep Medium<br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; Of course this results in the symbols not being included in libFoundation.so<br>&gt;&gt; ➜  Foundation git:(master) ✗ nm -D libFoundation.so |grep Medium<br>&gt;&gt; <br>&gt;&gt; Looking at my build from source I am missing about 200K of symbols that the SNAPSHOT build is including:<br>&gt;&gt; <br>&gt;&gt;   Foundation git:(master) ✗ nm -D /opt/apple/swift-2.2-SNAPSHOT-2015-12-10-a-ubuntu14.04/usr/lib/swift/linux/libFoundation.so|grep Medium<br>&gt;&gt; 000000000034ab40 T _TFO10Foundation20NSDateFormatterStyle11MediumStyleFMS0_S0_<br>&gt;&gt; 00000000003944e0 T _TFO10Foundation21NSFormattingUnitStyle6MediumFMS0_S0_<br>&gt;&gt; 000000000034b330 T _TFO10Foundation28NSDateIntervalFormatterStyle11MediumStyleFMS0_S0_<br>&gt;&gt; 00000000003f5820 T _TFO10Foundation36NSPersonNameComponentsFormatterStyle6MediumFMS0_S0_<br>&gt;&gt; <br>&gt;&gt; Thanks for any thoughts,<br>&gt;&gt; Joe<br>&gt;&gt; <br>&gt;&gt; PS - I am using the master branch across all repositories.<br>&gt;&gt; <br>&gt;&gt;  _______________________________________________<br>&gt;&gt; swift-corelibs-dev mailing list<br>&gt;&gt; swift-corelibs-dev at swift.org<br>&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-corelibs-dev<br>&gt; <br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20151212/8da26b86/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/e2303da56647c283b6d8e58d5831faca?s=50"></div><header><strong>Unresolved enumeration symbols</strong> from <string>Joseph Bell</string> &lt;joe at iachieved.it&gt;<p>December 12, 2015 at 08:00:00pm</p></header><div class="content"><p>Information about the system I&#39;m building with, will note it doesn&#39;t have<br>anything else &quot;special&quot; i.e., no 4.x kernel or non-standard libc.  It is<br>really interesting, everything compiles okay, no errors thrown, etc.  I&#39;m<br>going to try a build on a 15.10 VM as well to see if I can reproduce.<br></p><p>uname -a<br>Linux darthvader 3.19.0-39-generic #44~14.04.1-Ubuntu SMP Wed Dec 2<br>10:00:35 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux<br></p><p>lsb_release -a<br>No LSB modules are available.<br>Distributor ID: Ubuntu<br>Description: Ubuntu 14.04.3 LTS<br>Release: 14.04<br>Codename: trusty<br></p><p>clang --version<br>Ubuntu clang version 3.6.0-2ubuntu1~trusty1 (tags/RELEASE_360/final) (based<br>on LLVM 3.6.0)<br>Target: x86_64-pc-linux-gnu<br>Thread model: posix<br></p><p>cat /proc/cpuinfo<br>processor       : 0<br>vendor_id       : AuthenticAMD<br>cpu family      : 21<br>model           : 1<br>model name      : AMD FX(tm)-8120 Eight-Core Processor<br>stepping        : 2<br>microcode       : 0x6000626<br>cpu MHz         : 1400.000<br>cache size      : 2048 KB<br>physical id     : 0<br>siblings        : 8<br>core id         : 0<br>cpu cores       : 4<br>apicid          : 16<br>initial apicid  : 0<br>fpu             : yes<br>fpu_exception   : yes<br>cpuid level     : 13<br>wp              : yes<br>flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca<br>cmov pat pse3<br>6 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm<br>constant_tsc<br> rep_good nopl nonstop_tsc extd_apicid aperfmperf pni pclmulqdq monitor<br>ssse3 cx16 sse4_<br>1 sse4_2 popcnt aes xsave avx lahf_lm cmp_legacy svm extapic cr8_legacy abm<br>sse4a misali<br>gnsse 3dnowprefetch osvw ibs xop skinit wdt lwp fma4 nodeid_msr topoext<br>perfctr_core per<br>fctr_nb arat cpb hw_pstate npt lbrv svm_lock nrip_save tsc_scale vmcb_clean<br>flushbyasid<br>decodeassists pausefilter pfthreshold vmmcall<br>bugs            : fxsave_leak<br>bogomips        : 6228.24<br>TLB size        : 1536 4K pages<br>clflush size    : 64<br>cache_alignment : 64<br>address sizes   : 48 bits physical, 48 bits virtual<br>power management: ts ttp tm 100mhzsteps hwpstate cpb<br></p><p><br></p><p>On Sat, Dec 12, 2015 at 7:24 PM, Joe Bell &lt;joe at iachieved.it&gt; wrote:<br></p><p>&gt; Tony, yes, I&#39;m building on an Ubuntu 14.04 system.  I can provide any<br>&gt; uname or kernel information if you need.<br>&gt;<br>&gt; Joe<br>&gt;<br>&gt; On Dec 12, 2015, at 7:17 PM, Tony Parker &lt;anthony.parker at apple.com&gt; wrote:<br>&gt;<br>&gt; Hi Joe,<br>&gt;<br>&gt; I see you used the preset for linux, but I just wanted to double-check<br>&gt; that you are indeed building on Linux.<br>&gt;<br>&gt; - Tony<br>&gt;<br>&gt; On Dec 12, 2015, at 3:48 PM, Joseph Bell via swift-corelibs-dev &lt;<br>&gt; swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;<br>&gt; Howdy.<br>&gt;<br>&gt; I&#39;m using the basic build instructions (checking out swift, llvm, clang,<br>&gt; etc.) and can successfully build a packaged release with<br>&gt;<br>&gt; ./swift/utils/build-script --preset=buildbot_linux_1404<br>&gt; install_destdir=${INSTALL_DIR} i<br>&gt; nstallable_package=${PACKAGE}<br>&gt;<br>&gt; However, the resulting build output for Foundation is missing enumeration<br>&gt; types, and I noticed it in particular in the NSDateFormatter class:<br>&gt;<br>&gt; ➜  Foundation git:(master) ✗ nm NSDateFormatter.swift.o|grep Medium<br>&gt;<br>&gt;<br>&gt; Of course this results in the symbols not being included in<br>&gt; libFoundation.so<br>&gt; ➜  Foundation git:(master) ✗ nm -D libFoundation.so |grep Medium<br>&gt;<br>&gt; Looking at my build from source I am missing about 200K of symbols that<br>&gt; the SNAPSHOT build is including:<br>&gt;<br>&gt;   Foundation git:(master) ✗ nm -D<br>&gt; /opt/apple/swift-2.2-SNAPSHOT-2015-12-10-a-ubuntu14.04/usr/lib/swift/linux/libFoundation.so|grep<br>&gt; Medium<br>&gt; 000000000034ab40 T<br>&gt; _TFO10Foundation20NSDateFormatterStyle11MediumStyleFMS0_S0_<br>&gt; 00000000003944e0 T _TFO10Foundation21NSFormattingUnitStyle6MediumFMS0_S0_<br>&gt; 000000000034b330 T<br>&gt; _TFO10Foundation28NSDateIntervalFormatterStyle11MediumStyleFMS0_S0_<br>&gt; 00000000003f5820 T<br>&gt; _TFO10Foundation36NSPersonNameComponentsFormatterStyle6MediumFMS0_S0_<br>&gt;<br>&gt; Thanks for any thoughts,<br>&gt; Joe<br>&gt;<br>&gt; PS - I am using the master branch across all repositories.<br>&gt;<br>&gt; _______________________________________________<br>&gt; swift-corelibs-dev mailing list<br>&gt; swift-corelibs-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-corelibs-dev<br>&gt;<br>&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20151212/01cbf578/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/e2303da56647c283b6d8e58d5831faca?s=50"></div><header><strong>Unresolved enumeration symbols</strong> from <string>Joseph Bell</string> &lt;joe at iachieved.it&gt;<p>December 12, 2015 at 10:00:00pm</p></header><div class="content"><p>Installing Ubuntu 15.10 on a VM, bringing in all of the prerequisites, I<br>get the same result.  The build completes successfully but libFoundation.so<br>is not including the enumerations in NSDateFormatter.<br></p><p>public enum NSDateFormatterStyle : UInt {<br>    case NoStyle<br>    case ShortStyle<br>    case MediumStyle<br>    case LongStyle<br>    case FullStyle<br>}<br></p><p>For grins, I searched through libFoundation.so with nm -D looking for<br>another enum, say one of the NSNumber format styles:<br></p><p>$ nm -D libFoundation.so |grep CurrencyStyle<br>$ nm -D libFoundation.so |grep PercentStyle<br></p><p>No dice, Chicago.<br></p><p>I can&#39;t say all enumerations are missing but these definitely are.<br></p><p>I&#39;ve also posted what I use to prep and build at<br>https://github.com/iachievedit/package-swift; hoping there isn&#39;t an<br>embarrassing oversight.<br></p><p>Joe<br></p><p><br>On Sat, Dec 12, 2015 at 8:00 PM, Joseph Bell &lt;joe at iachieved.it&gt; wrote:<br></p><p>&gt; Information about the system I&#39;m building with, will note it doesn&#39;t have<br>&gt; anything else &quot;special&quot; i.e., no 4.x kernel or non-standard libc.  It is<br>&gt; really interesting, everything compiles okay, no errors thrown, etc.  I&#39;m<br>&gt; going to try a build on a 15.10 VM as well to see if I can reproduce.<br>&gt;<br>&gt; uname -a<br>&gt; Linux darthvader 3.19.0-39-generic #44~14.04.1-Ubuntu SMP Wed Dec 2<br>&gt; 10:00:35 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux<br>&gt;<br>&gt; lsb_release -a<br>&gt; No LSB modules are available.<br>&gt; Distributor ID: Ubuntu<br>&gt; Description: Ubuntu 14.04.3 LTS<br>&gt; Release: 14.04<br>&gt; Codename: trusty<br>&gt;<br>&gt; clang --version<br>&gt; Ubuntu clang version 3.6.0-2ubuntu1~trusty1 (tags/RELEASE_360/final)<br>&gt; (based on LLVM 3.6.0)<br>&gt; Target: x86_64-pc-linux-gnu<br>&gt; Thread model: posix<br>&gt;<br>&gt; cat /proc/cpuinfo<br>&gt; processor       : 0<br>&gt; vendor_id       : AuthenticAMD<br>&gt; cpu family      : 21<br>&gt; model           : 1<br>&gt; model name      : AMD FX(tm)-8120 Eight-Core Processor<br>&gt; stepping        : 2<br>&gt; microcode       : 0x6000626<br>&gt; cpu MHz         : 1400.000<br>&gt; cache size      : 2048 KB<br>&gt; physical id     : 0<br>&gt; siblings        : 8<br>&gt; core id         : 0<br>&gt; cpu cores       : 4<br>&gt; apicid          : 16<br>&gt; initial apicid  : 0<br>&gt; fpu             : yes<br>&gt; fpu_exception   : yes<br>&gt; cpuid level     : 13<br>&gt; wp              : yes<br>&gt; flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca<br>&gt; cmov pat pse3<br>&gt; 6 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp<br>&gt; lm constant_tsc<br>&gt;  rep_good nopl nonstop_tsc extd_apicid aperfmperf pni pclmulqdq monitor<br>&gt; ssse3 cx16 sse4_<br>&gt; 1 sse4_2 popcnt aes xsave avx lahf_lm cmp_legacy svm extapic cr8_legacy<br>&gt; abm sse4a misali<br>&gt; gnsse 3dnowprefetch osvw ibs xop skinit wdt lwp fma4 nodeid_msr topoext<br>&gt; perfctr_core per<br>&gt; fctr_nb arat cpb hw_pstate npt lbrv svm_lock nrip_save tsc_scale<br>&gt; vmcb_clean flushbyasid<br>&gt; decodeassists pausefilter pfthreshold vmmcall<br>&gt; bugs            : fxsave_leak<br>&gt; bogomips        : 6228.24<br>&gt; TLB size        : 1536 4K pages<br>&gt; clflush size    : 64<br>&gt; cache_alignment : 64<br>&gt; address sizes   : 48 bits physical, 48 bits virtual<br>&gt; power management: ts ttp tm 100mhzsteps hwpstate cpb<br>&gt;<br>&gt;<br>&gt;<br>&gt; On Sat, Dec 12, 2015 at 7:24 PM, Joe Bell &lt;joe at iachieved.it&gt; wrote:<br>&gt;<br>&gt;&gt; Tony, yes, I&#39;m building on an Ubuntu 14.04 system.  I can provide any<br>&gt;&gt; uname or kernel information if you need.<br>&gt;&gt;<br>&gt;&gt; Joe<br>&gt;&gt;<br>&gt;&gt; On Dec 12, 2015, at 7:17 PM, Tony Parker &lt;anthony.parker at apple.com&gt;<br>&gt;&gt; wrote:<br>&gt;&gt;<br>&gt;&gt; Hi Joe,<br>&gt;&gt;<br>&gt;&gt; I see you used the preset for linux, but I just wanted to double-check<br>&gt;&gt; that you are indeed building on Linux.<br>&gt;&gt;<br>&gt;&gt; - Tony<br>&gt;&gt;<br>&gt;&gt; On Dec 12, 2015, at 3:48 PM, Joseph Bell via swift-corelibs-dev &lt;<br>&gt;&gt; swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;<br>&gt;&gt; Howdy.<br>&gt;&gt;<br>&gt;&gt; I&#39;m using the basic build instructions (checking out swift, llvm, clang,<br>&gt;&gt; etc.) and can successfully build a packaged release with<br>&gt;&gt;<br>&gt;&gt; ./swift/utils/build-script --preset=buildbot_linux_1404<br>&gt;&gt; install_destdir=${INSTALL_DIR} i<br>&gt;&gt; nstallable_package=${PACKAGE}<br>&gt;&gt;<br>&gt;&gt; However, the resulting build output for Foundation is missing enumeration<br>&gt;&gt; types, and I noticed it in particular in the NSDateFormatter class:<br>&gt;&gt;<br>&gt;&gt; ➜  Foundation git:(master) ✗ nm NSDateFormatter.swift.o|grep Medium<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; Of course this results in the symbols not being included in<br>&gt;&gt; libFoundation.so<br>&gt;&gt; ➜  Foundation git:(master) ✗ nm -D libFoundation.so |grep Medium<br>&gt;&gt;<br>&gt;&gt; Looking at my build from source I am missing about 200K of symbols that<br>&gt;&gt; the SNAPSHOT build is including:<br>&gt;&gt;<br>&gt;&gt;   Foundation git:(master) ✗ nm -D<br>&gt;&gt; /opt/apple/swift-2.2-SNAPSHOT-2015-12-10-a-ubuntu14.04/usr/lib/swift/linux/libFoundation.so|grep<br>&gt;&gt; Medium<br>&gt;&gt; 000000000034ab40 T<br>&gt;&gt; _TFO10Foundation20NSDateFormatterStyle11MediumStyleFMS0_S0_<br>&gt;&gt; 00000000003944e0 T _TFO10Foundation21NSFormattingUnitStyle6MediumFMS0_S0_<br>&gt;&gt; 000000000034b330 T<br>&gt;&gt; _TFO10Foundation28NSDateIntervalFormatterStyle11MediumStyleFMS0_S0_<br>&gt;&gt; 00000000003f5820 T<br>&gt;&gt; _TFO10Foundation36NSPersonNameComponentsFormatterStyle6MediumFMS0_S0_<br>&gt;&gt;<br>&gt;&gt; Thanks for any thoughts,<br>&gt;&gt; Joe<br>&gt;&gt;<br>&gt;&gt; PS - I am using the master branch across all repositories.<br>&gt;&gt;<br>&gt;&gt; _______________________________________________<br>&gt;&gt; swift-corelibs-dev mailing list<br>&gt;&gt; swift-corelibs-dev at swift.org<br>&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-corelibs-dev<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20151212/fc88b055/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/e2303da56647c283b6d8e58d5831faca?s=50"></div><header><strong>Unresolved enumeration symbols</strong> from <string>Joseph Bell</string> &lt;joe at iachieved.it&gt;<p>December 13, 2015 at 11:00:00am</p></header><div class="content"><p>Tony, all:<br></p><p>I went back to basics and used the following to build:<br></p><p>./swift/utils/build-script -R --xctest --foundation -t<br></p><p>Unfortunately I get the same result - missing symbols for enumerations in<br>libFoundation.so.  Once again I&#39;m building against the master branch for<br>all repositories.<br></p><p>I&#39;m going to build the debug configuration now and see - I would be curious<br>to know if anyone can reproduce this, I&#39;d be happy to write up a Dockerfile<br>or something to at least have someone confirm the reproducibility.<br></p><p>Joe<br></p><p><br>On Sat, Dec 12, 2015 at 10:27 PM, Joseph Bell &lt;joe at iachieved.it&gt; wrote:<br></p><p>&gt; Installing Ubuntu 15.10 on a VM, bringing in all of the prerequisites, I<br>&gt; get the same result.  The build completes successfully but libFoundation.so<br>&gt; is not including the enumerations in NSDateFormatter.<br>&gt;<br>&gt; public enum NSDateFormatterStyle : UInt {<br>&gt;     case NoStyle<br>&gt;     case ShortStyle<br>&gt;     case MediumStyle<br>&gt;     case LongStyle<br>&gt;     case FullStyle<br>&gt; }<br>&gt;<br>&gt; For grins, I searched through libFoundation.so with nm -D looking for<br>&gt; another enum, say one of the NSNumber format styles:<br>&gt;<br>&gt; $ nm -D libFoundation.so |grep CurrencyStyle<br>&gt; $ nm -D libFoundation.so |grep PercentStyle<br>&gt;<br>&gt; No dice, Chicago.<br>&gt;<br>&gt; I can&#39;t say all enumerations are missing but these definitely are.<br>&gt;<br>&gt; I&#39;ve also posted what I use to prep and build at<br>&gt; https://github.com/iachievedit/package-swift; hoping there isn&#39;t an<br>&gt; embarrassing oversight.<br>&gt;<br>&gt; Joe<br>&gt;<br>&gt;<br>&gt; On Sat, Dec 12, 2015 at 8:00 PM, Joseph Bell &lt;joe at iachieved.it&gt; wrote:<br>&gt;<br>&gt;&gt; Information about the system I&#39;m building with, will note it doesn&#39;t have<br>&gt;&gt; anything else &quot;special&quot; i.e., no 4.x kernel or non-standard libc.  It is<br>&gt;&gt; really interesting, everything compiles okay, no errors thrown, etc.  I&#39;m<br>&gt;&gt; going to try a build on a 15.10 VM as well to see if I can reproduce.<br>&gt;&gt;<br>&gt;&gt; uname -a<br>&gt;&gt; Linux darthvader 3.19.0-39-generic #44~14.04.1-Ubuntu SMP Wed Dec 2<br>&gt;&gt; 10:00:35 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux<br>&gt;&gt;<br>&gt;&gt; lsb_release -a<br>&gt;&gt; No LSB modules are available.<br>&gt;&gt; Distributor ID: Ubuntu<br>&gt;&gt; Description: Ubuntu 14.04.3 LTS<br>&gt;&gt; Release: 14.04<br>&gt;&gt; Codename: trusty<br>&gt;&gt;<br>&gt;&gt; clang --version<br>&gt;&gt; Ubuntu clang version 3.6.0-2ubuntu1~trusty1 (tags/RELEASE_360/final)<br>&gt;&gt; (based on LLVM 3.6.0)<br>&gt;&gt; Target: x86_64-pc-linux-gnu<br>&gt;&gt; Thread model: posix<br>&gt;&gt;<br>&gt;&gt; cat /proc/cpuinfo<br>&gt;&gt; processor       : 0<br>&gt;&gt; vendor_id       : AuthenticAMD<br>&gt;&gt; cpu family      : 21<br>&gt;&gt; model           : 1<br>&gt;&gt; model name      : AMD FX(tm)-8120 Eight-Core Processor<br>&gt;&gt; stepping        : 2<br>&gt;&gt; microcode       : 0x6000626<br>&gt;&gt; cpu MHz         : 1400.000<br>&gt;&gt; cache size      : 2048 KB<br>&gt;&gt; physical id     : 0<br>&gt;&gt; siblings        : 8<br>&gt;&gt; core id         : 0<br>&gt;&gt; cpu cores       : 4<br>&gt;&gt; apicid          : 16<br>&gt;&gt; initial apicid  : 0<br>&gt;&gt; fpu             : yes<br>&gt;&gt; fpu_exception   : yes<br>&gt;&gt; cpuid level     : 13<br>&gt;&gt; wp              : yes<br>&gt;&gt; flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge<br>&gt;&gt; mca cmov pat pse3<br>&gt;&gt; 6 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp<br>&gt;&gt; lm constant_tsc<br>&gt;&gt;  rep_good nopl nonstop_tsc extd_apicid aperfmperf pni pclmulqdq monitor<br>&gt;&gt; ssse3 cx16 sse4_<br>&gt;&gt; 1 sse4_2 popcnt aes xsave avx lahf_lm cmp_legacy svm extapic cr8_legacy<br>&gt;&gt; abm sse4a misali<br>&gt;&gt; gnsse 3dnowprefetch osvw ibs xop skinit wdt lwp fma4 nodeid_msr topoext<br>&gt;&gt; perfctr_core per<br>&gt;&gt; fctr_nb arat cpb hw_pstate npt lbrv svm_lock nrip_save tsc_scale<br>&gt;&gt; vmcb_clean flushbyasid<br>&gt;&gt; decodeassists pausefilter pfthreshold vmmcall<br>&gt;&gt; bugs            : fxsave_leak<br>&gt;&gt; bogomips        : 6228.24<br>&gt;&gt; TLB size        : 1536 4K pages<br>&gt;&gt; clflush size    : 64<br>&gt;&gt; cache_alignment : 64<br>&gt;&gt; address sizes   : 48 bits physical, 48 bits virtual<br>&gt;&gt; power management: ts ttp tm 100mhzsteps hwpstate cpb<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt;<br>&gt;&gt; On Sat, Dec 12, 2015 at 7:24 PM, Joe Bell &lt;joe at iachieved.it&gt; wrote:<br>&gt;&gt;<br>&gt;&gt;&gt; Tony, yes, I&#39;m building on an Ubuntu 14.04 system.  I can provide any<br>&gt;&gt;&gt; uname or kernel information if you need.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Joe<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Dec 12, 2015, at 7:17 PM, Tony Parker &lt;anthony.parker at apple.com&gt;<br>&gt;&gt;&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Hi Joe,<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; I see you used the preset for linux, but I just wanted to double-check<br>&gt;&gt;&gt; that you are indeed building on Linux.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; - Tony<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; On Dec 12, 2015, at 3:48 PM, Joseph Bell via swift-corelibs-dev &lt;<br>&gt;&gt;&gt; swift-corelibs-dev at swift.org&gt; wrote:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Howdy.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; I&#39;m using the basic build instructions (checking out swift, llvm, clang,<br>&gt;&gt;&gt; etc.) and can successfully build a packaged release with<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; ./swift/utils/build-script --preset=buildbot_linux_1404<br>&gt;&gt;&gt; install_destdir=${INSTALL_DIR} i<br>&gt;&gt;&gt; nstallable_package=${PACKAGE}<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; However, the resulting build output for Foundation is missing<br>&gt;&gt;&gt; enumeration types, and I noticed it in particular in the NSDateFormatter<br>&gt;&gt;&gt; class:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; ➜  Foundation git:(master) ✗ nm NSDateFormatter.swift.o|grep Medium<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Of course this results in the symbols not being included in<br>&gt;&gt;&gt; libFoundation.so<br>&gt;&gt;&gt; ➜  Foundation git:(master) ✗ nm -D libFoundation.so |grep Medium<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Looking at my build from source I am missing about 200K of symbols that<br>&gt;&gt;&gt; the SNAPSHOT build is including:<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;   Foundation git:(master) ✗ nm -D<br>&gt;&gt;&gt; /opt/apple/swift-2.2-SNAPSHOT-2015-12-10-a-ubuntu14.04/usr/lib/swift/linux/libFoundation.so|grep<br>&gt;&gt;&gt; Medium<br>&gt;&gt;&gt; 000000000034ab40 T<br>&gt;&gt;&gt; _TFO10Foundation20NSDateFormatterStyle11MediumStyleFMS0_S0_<br>&gt;&gt;&gt; 00000000003944e0 T _TFO10Foundation21NSFormattingUnitStyle6MediumFMS0_S0_<br>&gt;&gt;&gt; 000000000034b330 T<br>&gt;&gt;&gt; _TFO10Foundation28NSDateIntervalFormatterStyle11MediumStyleFMS0_S0_<br>&gt;&gt;&gt; 00000000003f5820 T<br>&gt;&gt;&gt; _TFO10Foundation36NSPersonNameComponentsFormatterStyle6MediumFMS0_S0_<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; Thanks for any thoughts,<br>&gt;&gt;&gt; Joe<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; PS - I am using the master branch across all repositories.<br>&gt;&gt;&gt;<br>&gt;&gt;&gt; _______________________________________________<br>&gt;&gt;&gt; swift-corelibs-dev mailing list<br>&gt;&gt;&gt; swift-corelibs-dev at swift.org<br>&gt;&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-corelibs-dev<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;&gt;<br>&gt;&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20151213/1dea19d2/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/be4c3c3b76631a155e1358db48066692?s=50"></div><header><strong>Unresolved enumeration symbols</strong> from <string>Tony Parker</string> &lt;anthony.parker at apple.com&gt;<p>December 13, 2015 at 09:00:00am</p></header><div class="content"><p>I’m curious why it’s these particular enums are different. If you try to build a sample app that actually uses these enum values, does it fail to link?<br></p><p>- Tony<br></p><p>&gt; On Dec 13, 2015, at 9:19 AM, Joseph Bell &lt;joe at iachieved.it&gt; wrote:<br>&gt; <br>&gt; Tony, all:<br>&gt; <br>&gt; I went back to basics and used the following to build:<br>&gt; <br>&gt; ./swift/utils/build-script -R --xctest --foundation -t<br>&gt; <br>&gt; Unfortunately I get the same result - missing symbols for enumerations in libFoundation.so.  Once again I&#39;m building against the master branch for all repositories.<br>&gt; <br>&gt; I&#39;m going to build the debug configuration now and see - I would be curious to know if anyone can reproduce this, I&#39;d be happy to write up a Dockerfile or something to at least have someone confirm the reproducibility.<br>&gt; <br>&gt; Joe<br>&gt; <br>&gt; <br>&gt; On Sat, Dec 12, 2015 at 10:27 PM, Joseph Bell &lt;joe at iachieved.it &lt;mailto:joe at iachieved.it&gt;&gt; wrote:<br>&gt; Installing Ubuntu 15.10 on a VM, bringing in all of the prerequisites, I get the same result.  The build completes successfully but libFoundation.so is not including the enumerations in NSDateFormatter.<br>&gt; <br>&gt; public enum NSDateFormatterStyle : UInt {<br>&gt;     case NoStyle<br>&gt;     case ShortStyle<br>&gt;     case MediumStyle<br>&gt;     case LongStyle<br>&gt;     case FullStyle<br>&gt; }<br>&gt; For grins, I searched through libFoundation.so with nm -D looking for another enum, say one of the NSNumber format styles:<br>&gt; <br>&gt; $ nm -D libFoundation.so |grep CurrencyStyle<br>&gt; $ nm -D libFoundation.so |grep PercentStyle<br>&gt; <br>&gt; No dice, Chicago.<br>&gt; <br>&gt; I can&#39;t say all enumerations are missing but these definitely are.<br>&gt; <br>&gt; I&#39;ve also posted what I use to prep and build at https://github.com/iachievedit/package-swift &lt;https://github.com/iachievedit/package-swift&gt;; hoping there isn&#39;t an embarrassing oversight.<br>&gt; <br>&gt; Joe<br>&gt; <br>&gt; <br>&gt; On Sat, Dec 12, 2015 at 8:00 PM, Joseph Bell &lt;joe at iachieved.it &lt;mailto:joe at iachieved.it&gt;&gt; wrote:<br>&gt; Information about the system I&#39;m building with, will note it doesn&#39;t have anything else &quot;special&quot; i.e., no 4.x kernel or non-standard libc.  It is really interesting, everything compiles okay, no errors thrown, etc.  I&#39;m going to try a build on a 15.10 VM as well to see if I can reproduce. <br>&gt; <br>&gt; uname -a<br>&gt; Linux darthvader 3.19.0-39-generic #44~14.04.1-Ubuntu SMP Wed Dec 2 10:00:35 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux<br>&gt; <br>&gt; lsb_release -a<br>&gt; No LSB modules are available.<br>&gt; Distributor ID:	Ubuntu<br>&gt; Description:	Ubuntu 14.04.3 LTS<br>&gt; Release:	14.04<br>&gt; Codename:	trusty<br>&gt; <br>&gt; clang --version<br>&gt; Ubuntu clang version 3.6.0-2ubuntu1~trusty1 (tags/RELEASE_360/final) (based on LLVM 3.6.0)<br>&gt; Target: x86_64-pc-linux-gnu<br>&gt; Thread model: posix<br>&gt; <br>&gt; cat /proc/cpuinfo<br>&gt; processor       : 0<br>&gt; vendor_id       : AuthenticAMD<br>&gt; cpu family      : 21<br>&gt; model           : 1<br>&gt; model name      : AMD FX(tm)-8120 Eight-Core Processor<br>&gt; stepping        : 2<br>&gt; microcode       : 0x6000626<br>&gt; cpu MHz         : 1400.000<br>&gt; cache size      : 2048 KB<br>&gt; physical id     : 0<br>&gt; siblings        : 8<br>&gt; core id         : 0<br>&gt; cpu cores       : 4<br>&gt; apicid          : 16<br>&gt; initial apicid  : 0<br>&gt; fpu             : yes<br>&gt; fpu_exception   : yes<br>&gt; cpuid level     : 13<br>&gt; wp              : yes<br>&gt; flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse3<br>&gt; 6 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc<br>&gt;  rep_good nopl nonstop_tsc extd_apicid aperfmperf pni pclmulqdq monitor ssse3 cx16 sse4_<br>&gt; 1 sse4_2 popcnt aes xsave avx lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misali<br>&gt; gnsse 3dnowprefetch osvw ibs xop skinit wdt lwp fma4 nodeid_msr topoext perfctr_core per<br>&gt; fctr_nb arat cpb hw_pstate npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid<br>&gt; decodeassists pausefilter pfthreshold vmmcall<br>&gt; bugs            : fxsave_leak<br>&gt; bogomips        : 6228.24<br>&gt; TLB size        : 1536 4K pages<br>&gt; clflush size    : 64<br>&gt; cache_alignment : 64<br>&gt; address sizes   : 48 bits physical, 48 bits virtual<br>&gt; power management: ts ttp tm 100mhzsteps hwpstate cpb<br>&gt; <br>&gt; <br>&gt; <br>&gt; On Sat, Dec 12, 2015 at 7:24 PM, Joe Bell &lt;joe at iachieved.it &lt;mailto:joe at iachieved.it&gt;&gt; wrote:<br>&gt; Tony, yes, I&#39;m building on an Ubuntu 14.04 system.  I can provide any uname or kernel information if you need.<br>&gt; <br>&gt; Joe<br>&gt; <br>&gt; On Dec 12, 2015, at 7:17 PM, Tony Parker &lt;anthony.parker at apple.com &lt;mailto:anthony.parker at apple.com&gt;&gt; wrote:<br>&gt; <br>&gt;&gt; Hi Joe,<br>&gt;&gt; <br>&gt;&gt; I see you used the preset for linux, but I just wanted to double-check that you are indeed building on Linux.<br>&gt;&gt; <br>&gt;&gt; - Tony<br>&gt;&gt; <br>&gt;&gt;&gt; On Dec 12, 2015, at 3:48 PM, Joseph Bell via swift-corelibs-dev &lt;swift-corelibs-dev at swift.org &lt;mailto:swift-corelibs-dev at swift.org&gt;&gt; wrote:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Howdy.<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; I&#39;m using the basic build instructions (checking out swift, llvm, clang, etc.) and can successfully build a packaged release with <br>&gt;&gt;&gt; <br>&gt;&gt;&gt; ./swift/utils/build-script --preset=buildbot_linux_1404 install_destdir=${INSTALL_DIR} i<br>&gt;&gt;&gt; nstallable_package=${PACKAGE}<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; However, the resulting build output for Foundation is missing enumeration types, and I noticed it in particular in the NSDateFormatter class:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; ➜  Foundation git:(master) ✗ nm NSDateFormatter.swift.o|grep Medium<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Of course this results in the symbols not being included in libFoundation.so<br>&gt;&gt;&gt; ➜  Foundation git:(master) ✗ nm -D libFoundation.so |grep Medium<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Looking at my build from source I am missing about 200K of symbols that the SNAPSHOT build is including:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt;   Foundation git:(master) ✗ nm -D /opt/apple/swift-2.2-SNAPSHOT-2015-12-10-a-ubuntu14.04/usr/lib/swift/linux/libFoundation.so|grep Medium<br>&gt;&gt;&gt; 000000000034ab40 T _TFO10Foundation20NSDateFormatterStyle11MediumStyleFMS0_S0_<br>&gt;&gt;&gt; 00000000003944e0 T _TFO10Foundation21NSFormattingUnitStyle6MediumFMS0_S0_<br>&gt;&gt;&gt; 000000000034b330 T _TFO10Foundation28NSDateIntervalFormatterStyle11MediumStyleFMS0_S0_<br>&gt;&gt;&gt; 00000000003f5820 T _TFO10Foundation36NSPersonNameComponentsFormatterStyle6MediumFMS0_S0_<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; Thanks for any thoughts,<br>&gt;&gt;&gt; Joe<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; PS - I am using the master branch across all repositories.<br>&gt;&gt;&gt; <br>&gt;&gt;&gt;  _______________________________________________<br>&gt;&gt;&gt; swift-corelibs-dev mailing list<br>&gt;&gt;&gt; swift-corelibs-dev at swift.org &lt;mailto:swift-corelibs-dev at swift.org&gt;<br>&gt;&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-corelibs-dev &lt;https://lists.swift.org/mailman/listinfo/swift-corelibs-dev&gt;<br>&gt;&gt; <br>&gt; <br>&gt; <br>&gt; <br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-corelibs-dev/attachments/20151213/2b08e2a4/attachment.html&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
