<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css?vsn=d">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg?vsn=d" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3a6c94632d8c82a2f077bbabbdd412f6?s=50"></div><header><strong>Postfix operators that start with ? or !</strong> from <string>Toni Suter</string> &lt;tonisuter at me.com&gt;<p>November  1, 2016 at 03:00:00pm</p></header><div class="content"><p>Hi,<br></p><p>In Swift 3, I can declare a postfix operator that starts with a ? or a !, but as far as I can tell, there&#39;s no way to actually use such an operator:<br></p><p>postfix operator ?**<br>postfix func ?**(x: Int) -&gt; Int { return x }<br>let x = 12<br>x?**			// error: use of unresolved operator &#39;**&#39;<br></p><p>postfix operator !**<br>postfix func !**(x: Int) -&gt; Int { return x }<br>let x = 12<br>x!**			// error: use of unresolved operator &#39;**&#39;<br></p><p>It makes sense to me, why that happens. There&#39;s no way for the parser to know, whether ?** is the end of an optional chaining expression<br>followed by a postfix operator ** or whether it&#39;s a single postfix operator ?**. Similarly, !** could refer to a forced-value expression followed<br>by a postfix operator ** or a single postfix operator !**.<br></p><p>Even with semantic knowledge, it is unclear, what should happen. For example, in the following situation either parsing decisions would<br>result in a valid program:<br></p><p>postfix operator ++<br>postfix operator ?++<br>postfix func ++(x: inout Int) {<br>    x += 1<br>}<br>postfix func ?++(x: Int?) -&gt; Int? {<br>    return x<br>}<br>var x: Int? = 0<br>x?++		// what should happen here? Swift 3 chooses optional chaining expression followed by ++ operator<br></p><p>I think it would probably be best to disallow postfix operators that start with a question mark or an exclamation mark.<br>At the moment it is possible to declare them, but not to use them. That&#39;s not very user-friendly. <br></p><p>By the way, infix operators have a similar problem. Infix operators that start with a ? or a ! must be surrounded by whitespace whereas<br>other infix operators don&#39;t have to be:<br></p><p>let x: Int? = 0<br>x ?? 10 	// fine<br>x??0 		// error<br>2 + 10		// fine<br>2+10		// fine<br></p><p>I think this is less of an issue, because you can at least use such infix operators if you add the necessary whitespace.<br></p><p>What do you think about this? Would it make sense to disallow postfix operators that start with a question mark or an exclamation mark?<br></p><p>Thanks and best regards,<br>Toni<br></p><p><br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-evolution/attachments/20161101/de52a54f/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/8aa3a9da9a32d3e98805b4a5409e4cee?s=50"></div><header><strong>Postfix operators that start with ? or !</strong> from <string>Anton Zhilin</string> &lt;antonyzhilin at gmail.com&gt;<p>November  1, 2016 at 07:00:00pm</p></header><div class="content"><p>Hello Tony,<br>Feel free to file a bug report. If there are no spaces between operator<br>characters, then they should be parsed as a single operator.<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-evolution/attachments/20161101/808e397c/attachment.html&gt;<br></p></div></li><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/23bb59b802aac41afdf8ffffae1040d5?s=50"></div><header><strong>Postfix operators that start with ? or !</strong> from <string>Alex Martini</string> &lt;amartini at apple.com&gt;<p>November  1, 2016 at 09:00:00am</p></header><div class="content"><p>&gt; On Nov 1, 2016, at 7:23 AM, Toni Suter via swift-evolution &lt;swift-evolution at swift.org&gt; wrote:<br>&gt; <br>&gt; In Swift 3, I can declare a postfix operator that starts with a ? or a !, but as far as I can tell, there&#39;s no way to actually use such an operator:<br>&gt; <br>&gt; I think it would probably be best to disallow postfix operators that start with a question mark or an exclamation mark.<br>&gt; At the moment it is possible to declare them, but not to use them. That&#39;s not very user-friendly. <br></p><p><br>This looks like a bug — the documentation and the behavior disagree.  The docs say:<br></p><p>&gt; Although you can define custom operators that contain a question mark (?), they can’t consist of a single question mark character only. Additionally, although operators can contain an exclamation mark (!), postfix operators cannot begin with either a question mark or an exclamation mark.<br></p><p>https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/LexicalStructure.html#//apple_ref/doc/uid/TP40014097-CH30-ID418<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3a6c94632d8c82a2f077bbabbdd412f6?s=50"></div><header><strong>Postfix operators that start with ? or !</strong> from <string>Toni Suter</string> &lt;tonisuter at me.com&gt;<p>November  1, 2016 at 06:00:00pm</p></header><div class="content"><p>Oh, I didn&#39;t see that, thanks! I&#39;ll write a bug report. <br></p><p>&gt; Am 01.11.2016 um 17:52 schrieb Alex Martini &lt;amartini at apple.com&gt;:<br>&gt; <br>&gt; <br>&gt;&gt; On Nov 1, 2016, at 7:23 AM, Toni Suter via swift-evolution &lt;swift-evolution at swift.org&gt; wrote:<br>&gt;&gt; <br>&gt;&gt; In Swift 3, I can declare a postfix operator that starts with a ? or a !, but as far as I can tell, there&#39;s no way to actually use such an operator:<br>&gt;&gt; <br>&gt;&gt; I think it would probably be best to disallow postfix operators that start with a question mark or an exclamation mark.<br>&gt;&gt; At the moment it is possible to declare them, but not to use them. That&#39;s not very user-friendly. <br>&gt; <br>&gt; <br>&gt; This looks like a bug — the documentation and the behavior disagree.  The docs say:<br>&gt; <br>&gt;&gt; Although you can define custom operators that contain a question mark (?), they can’t consist of a single question mark character only. Additionally, although operators can contain an exclamation mark (!), postfix operators cannot begin with either a question mark or an exclamation mark.<br>&gt; <br>&gt; https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/LexicalStructure.html#//apple_ref/doc/uid/TP40014097-CH30-ID418<br>&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/3a6c94632d8c82a2f077bbabbdd412f6?s=50"></div><header><strong>Postfix operators that start with ? or !</strong> from <string>Toni Suter</string> &lt;tonisuter at me.com&gt;<p>November  1, 2016 at 08:00:00pm</p></header><div class="content"><p>I have filed a bug: https://bugs.swift.org/browse/SR-3104 &lt;https://bugs.swift.org/browse/SR-3104&gt;<br></p><p>&gt; Am 01.11.2016 um 18:08 schrieb Toni Suter via swift-evolution &lt;swift-evolution at swift.org&gt;:<br>&gt; <br>&gt; Oh, I didn&#39;t see that, thanks! I&#39;ll write a bug report. <br>&gt; <br>&gt;&gt; Am 01.11.2016 um 17:52 schrieb Alex Martini &lt;amartini at apple.com&gt;:<br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt;&gt; On Nov 1, 2016, at 7:23 AM, Toni Suter via swift-evolution &lt;swift-evolution at swift.org&gt; wrote:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; In Swift 3, I can declare a postfix operator that starts with a ? or a !, but as far as I can tell, there&#39;s no way to actually use such an operator:<br>&gt;&gt;&gt; <br>&gt;&gt;&gt; I think it would probably be best to disallow postfix operators that start with a question mark or an exclamation mark.<br>&gt;&gt;&gt; At the moment it is possible to declare them, but not to use them. That&#39;s not very user-friendly. <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; This looks like a bug — the documentation and the behavior disagree.  The docs say:<br>&gt;&gt; <br>&gt;&gt;&gt; Although you can define custom operators that contain a question mark (?), they can’t consist of a single question mark character only. Additionally, although operators can contain an exclamation mark (!), postfix operators cannot begin with either a question mark or an exclamation mark.<br>&gt;&gt; <br>&gt;&gt; https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/LexicalStructure.html#//apple_ref/doc/uid/TP40014097-CH30-ID418<br>&gt;&gt; <br>&gt; <br>&gt; _______________________________________________<br>&gt; swift-evolution mailing list<br>&gt; swift-evolution at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-evolution<br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-evolution/attachments/20161101/9f7cea6e/attachment.html&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js?vsn=d"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
