<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css?vsn=d">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg?vsn=d" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/a838c63b9093a77fb88231d65effa3b3?s=50"></div><header><strong>build failure: DISPATCH_QUEUE_OVERCOMMIT</strong> from <string>Drew Crawford</string> &lt;drew at sealedabstract.com&gt;<p>February 26, 2016 at 09:00:00am</p></header><div class="content"><p>Not sure where to post this, but I&#39;m having trouble building CoreFoundation in  swift-DEVELOPMENT-SNAPSHOT-2016-02-25-due to some kind of libdispatch issue.<br></p><p>The exact error is<br></p><p>FAILED: mkdir -p `dirname ../build/buildbot_linux/foundation-linux-x86_64/Foundation/CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c.o`; /swift-dev/build/buildbot_linux/llvm-linux-x86_64/bin/clang -fcolor-diagnostics -fdollars-in-identifiers -fblocks -fobjc-runtime=macosx-10.11 -fintegrated-as -fPIC --target=x86_64-linux-gnu -O2   -Ibootstrap/common/usr/include -Ibootstrap/common/usr/local/include   -Ibootstrap/x86_64-linux-gnu/usr/include -Ibootstrap/x86_64-linux-gnu/usr/local/include  -I../build/buildbot_linux/foundation-linux-x86_64/Foundation -I../build/buildbot_linux/foundation-linux-x86_64 -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation -DDEPLOYMENT_TARGET_LINUX -D_GNU_SOURCE -DU_SHOW_DRAFT_API -DCF_BUILDING_CF -DDEPLOYMENT_RUNTIME_SWIFT -fconstant-cfstrings -fexceptions -Wno-shorten-64-to-32 -Wno-deprecated-declarations -Wno-unreachable-code -Wno-conditional-uninitialized -Wno-unused-variable -Wno-int-conversion -Wno-unused-function -I/usr/include/libxml2 -I./ -DDEPLOYMENT_ENABLE_LIBDISPATCH -I/swift-dev/swift-corelibs-libdispatch -I/swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests -include CoreFoundation/Base.subproj/CoreFoundation_Prefix.h  -c CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c -o ../build/buildbot_linux/foundation-linux-x86_64/Foundation/CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c.o<br>In file included from CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c:16:<br>In file included from CoreFoundation/PlugIn.subproj/CFBundle_Internal.h:22:<br>In file included from ../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation/CFInternal.h:854:<br>In file included from /swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests/dispatch/private.h:55:<br>/swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests/dispatch/queue_private.h:45:2: error: expected identifier<br>        DISPATCH_QUEUE_OVERCOMMIT = 0x2ull,<br>        ^<br>../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation/CFInternal.h:811:35: note: expanded from macro &#39;DISPATCH_QUEUE_OVERCOMMIT&#39;<br>#define DISPATCH_QUEUE_OVERCOMMIT 2<br>                                  ^<br>1 error generated.<br></p><p>Using this preset:<br></p><p>./utils/build-script: using preset &#39;drew&#39;, which expands to ./utils/build-script --assertions --no-swift-stdlib-assertions --llbuild --swiftpm --xctest --build-subdir=buildbot_linux --lldb --release --test --validation-test --foundation --libdispatch -- --swift-enable-ast-verifier=0 --install-swift --install-lldb --install-llbuild --install-swiftpm --install-xctest --install-prefix=/usr &#39;--swift-install-components=compiler;clang-builtin-headers;stdlib;sdk-overlay;license&#39; --build-swift-static-stdlib=1 --build-swift-stdlib-unittest-extra=1 --skip-test-lldb=1 --test-installable-package=1 --install-destdir=/tmp/install/ --installable-package=/tmp/swift.tar.gz --install-foundation --reconfigure --install-libdispatch=1 --skip-test-libdispatch=1 --skip-test-foundation=1<br>./utils/build-script: command terminated with a non-zero exit status 1, aborting<br>The command &#39;/bin/sh -c ./utils/build-script --preset=drew --preset-file=presets.ini --preset-file=utils/build-presets.ini installable_package=&quot;/tmp/swift.tar.gz&quot; install_destdir=&quot;/tmp/install/&quot;&#39; returned a non-zero code: 1<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20160226/79879554/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/2ddf7419fbdd69635522af227c08327c?s=50"></div><header><strong>build failure: DISPATCH_QUEUE_OVERCOMMIT</strong> from <string>David P Grove</string> &lt;groved at us.ibm.com&gt;<p>February 26, 2016 at 12:00:00pm</p></header><div class="content"><p>Hi Drew,<br></p><p>	I suspect you are getting caught in some work-in-progress to enable<br>CoreFoundation for using libdispatch on Linux.    If both --foundation and<br>--libdispatch are given to the invocation of build-script (or are in the<br>same preset), then the build attempts to build CoreFoundation with<br>libdispatch dependent functionality enabled.   Right now, this doesn&#39;t<br>compile, so the build fails.<br></p><p>	As a workaround, in swift-corelibs-foundation/build.py around line 66<br>disable this block:<br></p><p>if &quot;LIBDISPATCH_SOURCE_DIR&quot; in Configuration.current.variables:<br>        foundation.CFLAGS += &quot; &quot;+&quot; &quot;.join([<br>                &#39;-DDEPLOYMENT_ENABLE_LIBDISPATCH&#39;,<br>                &#39;-I&#39;+Configuration.current.variables[<br>&quot;LIBDISPATCH_SOURCE_DIR&quot;],<br>                &#39;-I&#39;+Configuration.current.variables[<br>&quot;LIBDISPATCH_BUILD_DIR&quot;]+&#39;/tests&#39;  # for include of dispatch/private.h in<br>CF<br>        ])<br></p><p><br>	Sorry this caught you; it has taken longer to get this done than<br>expected.  Blocked on<br>https://github.com/apple/swift-corelibs-libdispatch/pull/46  and likely<br>some follow up changes on both the foundation and dispatch side.<br></p><p>--dave<br></p><p><br></p><p><br></p><p>From:	Drew Crawford via swift-dev &lt;swift-dev at swift.org&gt;<br>To:	swift-dev &lt;swift-dev at swift.org&gt;<br>Date:	02/26/2016 10:06 AM<br>Subject:	[swift-dev] build failure: DISPATCH_QUEUE_OVERCOMMIT<br>Sent by:	swift-dev-bounces at swift.org<br></p><p><br></p><p>Not sure where to post this, but I&#39;m having trouble building CoreFoundation<br>in  swift-DEVELOPMENT-SNAPSHOT-2016-02-25-due to some kind of libdispatch<br>issue.<br></p><p>The exact error is<br></p><p>     FAILED: mkdir -p<br>     `dirname ../build/buildbot_linux/foundation-linux-x86_64/Foundation/CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c.o`; /swift-dev/build/buildbot_linux/llvm-linux-x86_64/bin/clang<br> -fcolor-diagnostics -fdollars-in-identifiers -fblocks<br>     -fobjc-runtime=macosx-10.11 -fintegrated-as -fPIC<br>     --target=x86_64-linux-gnu -O2   -Ibootstrap/common/usr/include<br>     -Ibootstrap/common/usr/local/include<br>     -Ibootstrap/x86_64-linux-gnu/usr/include<br>     -Ibootstrap/x86_64-linux-gnu/usr/local/include<br>     -I../build/buildbot_linux/foundation-linux-x86_64/Foundation<br>     -I../build/buildbot_linux/foundation-linux-x86_64<br>     -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift<br> -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation<br> -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation<br> -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation<br> -DDEPLOYMENT_TARGET_LINUX -D_GNU_SOURCE -DU_SHOW_DRAFT_API<br>     -DCF_BUILDING_CF -DDEPLOYMENT_RUNTIME_SWIFT -fconstant-cfstrings<br>     -fexceptions -Wno-shorten-64-to-32 -Wno-deprecated-declarations<br>     -Wno-unreachable-code -Wno-conditional-uninitialized<br>     -Wno-unused-variable -Wno-int-conversion -Wno-unused-function<br>     -I/usr/include/libxml2 -I./ -DDEPLOYMENT_ENABLE_LIBDISPATCH<br>     -I/swift-dev/swift-corelibs-libdispatch<br>     -I/swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests<br>     -include CoreFoundation/Base.subproj/CoreFoundation_Prefix.h  -c<br>     CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c<br>     -o ../build/buildbot_linux/foundation-linux-x86_64/Foundation/CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c.o<br>     In file included from<br>     CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c:16:<br>     In file included from<br>     CoreFoundation/PlugIn.subproj/CFBundle_Internal.h:22:<br>     In file included<br>     from ../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation/CFInternal.h:854:<br>     In file included<br>     from /swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests/dispatch/private.h:55:<br>     /swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests/dispatch/queue_private.h:45:2:<br> error: expected identifier<br>             DISPATCH_QUEUE_OVERCOMMIT = 0x2ull,<br>             ^<br>     ../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation/CFInternal.h:811:35:<br> note: expanded from macro &#39;DISPATCH_QUEUE_OVERCOMMIT&#39;<br>     #define DISPATCH_QUEUE_OVERCOMMIT 2<br>                                       ^<br>     1 error generated.<br></p><p>Using this preset:<br></p><p>     ./utils/build-script: using preset &#39;drew&#39;, which expands<br>     to ./utils/build-script --assertions --no-swift-stdlib-assertions<br>     --llbuild --swiftpm --xctest --build-subdir=buildbot_linux --lldb<br>     --release --test --validation-test --foundation --libdispatch --<br>     --swift-enable-ast-verifier=0 --install-swift --install-lldb<br>     --install-llbuild --install-swiftpm --install-xctest<br>     --install-prefix=/usr<br>     &#39;--swift-install-components=compiler;clang-builtin-headers;stdlib;sdk-overlay;license&#39;<br> --build-swift-static-stdlib=1 --build-swift-stdlib-unittest-extra=1<br>     --skip-test-lldb=1 --test-installable-package=1<br>     --install-destdir=/tmp/install/<br>     --installable-package=/tmp/swift.tar.gz --install-foundation<br>     --reconfigure --install-libdispatch=1 --skip-test-libdispatch=1<br>     --skip-test-foundation=1<br>     ./utils/build-script: command terminated with a non-zero exit status<br>     1, aborting<br>     The command &#39;/bin/sh -c ./utils/build-script --preset=drew<br>     --preset-file=presets.ini --preset-file=utils/build-presets.ini<br>     installable_package=&quot;/tmp/swift.tar.gz&quot;<br>     install_destdir=&quot;/tmp/install/&quot;&#39; returned a non-zero code: 1<br>     _______________________________________________<br>     swift-dev mailing list<br>     swift-dev at swift.org<br>     https://lists.swift.org/mailman/listinfo/swift-dev<br></p><p><br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20160226/8dd22e34/attachment.html&gt;<br>-------------- next part --------------<br>A non-text attachment was scrubbed...<br>Name: graycol.gif<br>Type: image/gif<br>Size: 105 bytes<br>Desc: not available<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20160226/8dd22e34/attachment.gif&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/00f9939846257c9db8ddc42ce61ec6d1?s=50"></div><header><strong>build failure: DISPATCH_QUEUE_OVERCOMMIT</strong> from <string>Philippe Hausler</string> &lt;phausler at apple.com&gt;<p>February 27, 2016 at 11:00:00am</p></header><div class="content"><p>Do we need to disable this in swift-corelibs-foundation until we have everything for dispatch landed?<br></p><p>&gt; On Feb 26, 2016, at 9:00 AM, David P Grove via swift-dev &lt;swift-dev at swift.org&gt; wrote:<br>&gt; <br>&gt; Hi Drew,<br>&gt; <br>&gt; I suspect you are getting caught in some work-in-progress to enable CoreFoundation for using libdispatch on Linux. If both --foundation and --libdispatch are given to the invocation of build-script (or are in the same preset), then the build attempts to build CoreFoundation with libdispatch dependent functionality enabled. Right now, this doesn&#39;t compile, so the build fails. <br>&gt; <br>&gt; As a workaround, in swift-corelibs-foundation/build.py around line 66 disable this block:<br>&gt; <br>&gt; if &quot;LIBDISPATCH_SOURCE_DIR&quot; in Configuration.current.variables:<br>&gt; foundation.CFLAGS += &quot; &quot;+&quot; &quot;.join([<br>&gt; &#39;-DDEPLOYMENT_ENABLE_LIBDISPATCH&#39;,<br>&gt; &#39;-I&#39;+Configuration.current.variables[&quot;LIBDISPATCH_SOURCE_DIR&quot;],<br>&gt; &#39;-I&#39;+Configuration.current.variables[&quot;LIBDISPATCH_BUILD_DIR&quot;]+&#39;/tests&#39; # for include of dispatch/private.h in CF <br>&gt; ])<br>&gt; <br>&gt; <br>&gt; Sorry this caught you; it has taken longer to get this done than expected. Blocked on https://github.com/apple/swift-corelibs-libdispatch/pull/46 &lt;https://github.com/apple/swift-corelibs-libdispatch/pull/46&gt; and likely some follow up changes on both the foundation and dispatch side.<br>&gt; <br>&gt; --dave<br>&gt; <br>&gt; <br>&gt; <br>&gt; &lt;graycol.gif&gt;Drew Crawford via swift-dev ---02/26/2016 10:06:52 AM---Not sure where to post this, but I&#39;m having trouble building CoreFoundation in swift-DEVELOPMENT-SN<br>&gt; <br>&gt; From: Drew Crawford via swift-dev &lt;swift-dev at swift.org&gt;<br>&gt; To: swift-dev &lt;swift-dev at swift.org&gt;<br>&gt; Date: 02/26/2016 10:06 AM<br>&gt; Subject: [swift-dev] build failure: DISPATCH_QUEUE_OVERCOMMIT<br>&gt; Sent by: swift-dev-bounces at swift.org<br>&gt; <br>&gt; <br>&gt; <br>&gt; <br>&gt; Not sure where to post this, but I&#39;m having trouble building CoreFoundation in swift-DEVELOPMENT-SNAPSHOT-2016-02-25-due to some kind of libdispatch issue.<br>&gt; <br>&gt; The exact error is<br>&gt; FAILED: mkdir -p `dirname ../build/buildbot_linux/foundation-linux-x86_64/Foundation/CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c.o`; /swift-dev/build/buildbot_linux/llvm-linux-x86_64/bin/clang -fcolor-diagnostics -fdollars-in-identifiers -fblocks -fobjc-runtime=macosx-10.11 -fintegrated-as -fPIC --target=x86_64-linux-gnu -O2 -Ibootstrap/common/usr/include -Ibootstrap/common/usr/local/include -Ibootstrap/x86_64-linux-gnu/usr/include -Ibootstrap/x86_64-linux-gnu/usr/local/include -I../build/buildbot_linux/foundation-linux-x86_64/Foundation -I../build/buildbot_linux/foundation-linux-x86_64 -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation -DDEPLOYMENT_TARGET_LINUX -D_GNU_SOURCE -DU_SHOW_DRAFT_API -DCF_BUILDING_CF -DDEPLOYMENT_RUNTIME_SWIFT -fconstant-cfstrings -fexceptions -Wno-shorten-64-to-32 -Wno-deprecated-declarations -Wno-unreachable-code -Wno-conditional-uninitialized -Wno-unused-variable -Wno-int-conversion -Wno-unused-function -I/usr/include/libxml2 -I./ -DDEPLOYMENT_ENABLE_LIBDISPATCH -I/swift-dev/swift-corelibs-libdispatch -I/swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests -include CoreFoundation/Base.subproj/CoreFoundation_Prefix.h -c CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c -o ../build/buildbot_linux/foundation-linux-x86_64/Foundation/CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c.o<br>&gt; In file included from CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c:16:<br>&gt; In file included from CoreFoundation/PlugIn.subproj/CFBundle_Internal.h:22:<br>&gt; In file included from ../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation/CFInternal.h:854:<br>&gt; In file included from /swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests/dispatch/private.h:55:<br>&gt; /swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests/dispatch/queue_private.h:45:2: error: expected identifier<br>&gt; DISPATCH_QUEUE_OVERCOMMIT = 0x2ull,<br>&gt; ^<br>&gt; ../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation/CFInternal.h:811:35: note: expanded from macro &#39;DISPATCH_QUEUE_OVERCOMMIT&#39;<br>&gt; #define DISPATCH_QUEUE_OVERCOMMIT 2<br>&gt; ^<br>&gt; 1 error generated.<br>&gt; <br>&gt; Using this preset:<br>&gt; ./utils/build-script: using preset &#39;drew&#39;, which expands to ./utils/build-script --assertions --no-swift-stdlib-assertions --llbuild --swiftpm --xctest --build-subdir=buildbot_linux --lldb --release --test --validation-test --foundation --libdispatch -- --swift-enable-ast-verifier=0 --install-swift --install-lldb --install-llbuild --install-swiftpm --install-xctest --install-prefix=/usr &#39;--swift-install-components=compiler;clang-builtin-headers;stdlib;sdk-overlay;license&#39; --build-swift-static-stdlib=1 --build-swift-stdlib-unittest-extra=1 --skip-test-lldb=1 --test-installable-package=1 --install-destdir=/tmp/install/ --installable-package=/tmp/swift.tar.gz --install-foundation --reconfigure --install-libdispatch=1 --skip-test-libdispatch=1 --skip-test-foundation=1<br>&gt; ./utils/build-script: command terminated with a non-zero exit status 1, aborting<br>&gt; The command &#39;/bin/sh -c ./utils/build-script --preset=drew --preset-file=presets.ini --preset-file=utils/build-presets.ini installable_package=&quot;/tmp/swift.tar.gz&quot; install_destdir=&quot;/tmp/install/&quot;&#39; returned a non-zero code: 1_______________________________________________<br>&gt; swift-dev mailing list<br>&gt; swift-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-dev &lt;https://lists.swift.org/mailman/listinfo/swift-dev&gt;<br>&gt; <br>&gt; <br>&gt; <br>&gt; _______________________________________________<br>&gt; swift-dev mailing list<br>&gt; swift-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-dev<br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20160227/52459ffd/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/2ddf7419fbdd69635522af227c08327c?s=50"></div><header><strong>build failure: DISPATCH_QUEUE_OVERCOMMIT</strong> from <string>David P Grove</string> &lt;groved at us.ibm.com&gt;<p>February 27, 2016 at 02:00:00pm</p></header><div class="content"><p>It would probably be simplest to disable it until it is really ready.<br></p><p>I hadn&#39;t really thought anyone would be trying to build dispatch and<br>foundation together who wasn&#39;t working on fixing it.  Just commenting out<br>that block in build.py would do it.<br></p><p>--dave<br></p><p><br></p><p>From:	Philippe Hausler &lt;phausler at apple.com&gt;<br>To:	David P Grove/Watson/IBM at IBMUS<br>Cc:	Drew Crawford &lt;drew at sealedabstract.com&gt;, swift-dev<br>            &lt;swift-dev at swift.org&gt;<br>Date:	02/27/2016 02:06 PM<br>Subject:	Re: [swift-dev] build failure: DISPATCH_QUEUE_OVERCOMMIT<br>Sent by:	phausler at apple.com<br></p><p><br></p><p>Do we need to disable this in swift-corelibs-foundation until we have<br>everything for dispatch landed?<br></p><p>      On Feb 26, 2016, at 9:00 AM, David P Grove via swift-dev &lt;<br>      swift-dev at swift.org&gt; wrote:<br></p><p><br></p><p>      Hi Drew,<br></p><p>      I suspect you are getting caught in some work-in-progress to enable<br>      CoreFoundation for using libdispatch on Linux. If both --foundation<br>      and --libdispatch are given to the invocation of build-script (or are<br>      in the same preset), then the build attempts to build CoreFoundation<br>      with libdispatch dependent functionality enabled. Right now, this<br>      doesn&#39;t compile, so the build fails.<br></p><p>      As a workaround, in swift-corelibs-foundation/build.py around line 66<br>      disable this block:<br></p><p>      if &quot;LIBDISPATCH_SOURCE_DIR&quot; in Configuration.current.variables:<br>      foundation.CFLAGS += &quot; &quot;+&quot; &quot;.join([<br>      &#39;-DDEPLOYMENT_ENABLE_LIBDISPATCH&#39;,<br>      &#39;-I&#39;+Configuration.current.variables[&quot;LIBDISPATCH_SOURCE_DIR&quot;],<br>      &#39;-I&#39;+Configuration.current.variables[&quot;LIBDISPATCH_BUILD_DIR&quot;]+<br>      &#39;/tests&#39; # for include of dispatch/private.h in CF<br>      ])<br></p><p><br>      Sorry this caught you; it has taken longer to get this done than<br>      expected. Blocked on<br>      https://github.com/apple/swift-corelibs-libdispatch/pull/46 and<br>      likely some follow up changes on both the foundation and dispatch<br>      side.<br></p><p>      --dave<br></p><p><br></p><p>      &lt;graycol.gif&gt;Drew Crawford via swift-dev ---02/26/2016 10:06:52<br>      AM---Not sure where to post this, but I&#39;m having trouble building<br>      CoreFoundation in swift-DEVELOPMENT-SN<br></p><p>      From: Drew Crawford via swift-dev &lt;swift-dev at swift.org&gt;<br>      To: swift-dev &lt;swift-dev at swift.org&gt;<br>      Date: 02/26/2016 10:06 AM<br>      Subject: [swift-dev] build failure: DISPATCH_QUEUE_OVERCOMMIT<br>      Sent by: swift-dev-bounces at swift.org<br></p><p><br></p><p><br></p><p>      Not sure where to post this, but I&#39;m having trouble building<br>      CoreFoundation in swift-DEVELOPMENT-SNAPSHOT-2016-02-25-due to some<br>      kind of libdispatch issue.<br></p><p>      The exact error is<br>                  FAILED: mkdir -p<br>                  `dirname ../build/buildbot_linux/foundation-linux-x86_64/Foundation/CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c.o`; /swift-dev/build/buildbot_linux/llvm-linux-x86_64/bin/clang<br> -fcolor-diagnostics -fdollars-in-identifiers -fblocks<br>                  -fobjc-runtime=macosx-10.11 -fintegrated-as -fPIC<br>                  --target=x86_64-linux-gnu -O2<br>                  -Ibootstrap/common/usr/include<br>                  -Ibootstrap/common/usr/local/include<br>                  -Ibootstrap/x86_64-linux-gnu/usr/include<br>                  -Ibootstrap/x86_64-linux-gnu/usr/local/include<br>                  -I../build/buildbot_linux/foundation-linux-x86_64/Foundation<br> -I../build/buildbot_linux/foundation-linux-x86_64<br>                  -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift<br> -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation<br> -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation<br> -I../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation<br> -DDEPLOYMENT_TARGET_LINUX -D_GNU_SOURCE -DU_SHOW_DRAFT_API<br>                  -DCF_BUILDING_CF -DDEPLOYMENT_RUNTIME_SWIFT<br>                  -fconstant-cfstrings -fexceptions -Wno-shorten-64-to-32<br>                  -Wno-deprecated-declarations -Wno-unreachable-code<br>                  -Wno-conditional-uninitialized -Wno-unused-variable<br>                  -Wno-int-conversion -Wno-unused-function<br>                  -I/usr/include/libxml2 -I./<br>                  -DDEPLOYMENT_ENABLE_LIBDISPATCH<br>                  -I/swift-dev/swift-corelibs-libdispatch<br>                  -I/swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests<br> -include CoreFoundation/Base.subproj/CoreFoundation_Prefix.h -c<br>                  CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c<br>                  -o ../build/buildbot_linux/foundation-linux-x86_64/Foundation/CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c.o<br></p><p>                  In file included from<br>                  CoreFoundation/PlugIn.subproj/CFPlugIn_PlugIn.c:16:<br>                  In file included from<br>                  CoreFoundation/PlugIn.subproj/CFBundle_Internal.h:22:<br>                  In file included<br>                  from ../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation/CFInternal.h:854:<br></p><p>                  In file included<br>                  from /swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests/dispatch/private.h:55:<br></p><p>                  /swift-dev/build/buildbot_linux/libdispatch-linux-x86_64/tests/dispatch/queue_private.h:45:2:<br> error: expected identifier<br>                  DISPATCH_QUEUE_OVERCOMMIT = 0x2ull,<br>                  ^<br>                  ../build/buildbot_linux/foundation-linux-x86_64/Foundation/usr/lib/swift/CoreFoundation/CFInternal.h:811:35:<br> note: expanded from macro &#39;DISPATCH_QUEUE_OVERCOMMIT&#39;<br>                  #define DISPATCH_QUEUE_OVERCOMMIT 2<br>                  ^<br>                  1 error generated.<br></p><p>      Using this preset:<br>                  ./utils/build-script: using preset &#39;drew&#39;, which expands<br>                  to ./utils/build-script --assertions<br>                  --no-swift-stdlib-assertions --llbuild --swiftpm --xctest<br>                  --build-subdir=buildbot_linux --lldb --release --test<br>                  --validation-test --foundation --libdispatch --<br>                  --swift-enable-ast-verifier=0 --install-swift<br>                  --install-lldb --install-llbuild --install-swiftpm<br>                  --install-xctest --install-prefix=/usr<br>                  &#39;--swift-install-components=compiler;clang-builtin-headers;stdlib;sdk-overlay;license&#39;<br> --build-swift-static-stdlib=1 --build-swift-stdlib-unittest-extra=1<br>                  --skip-test-lldb=1 --test-installable-package=1<br>                  --install-destdir=/tmp/install/<br>                  --installable-package=/tmp/swift.tar.gz<br>                  --install-foundation --reconfigure<br>                  --install-libdispatch=1 --skip-test-libdispatch=1<br>                  --skip-test-foundation=1<br>                  ./utils/build-script: command terminated with a non-zero<br>                  exit status 1, aborting<br>                  The command &#39;/bin/sh -c ./utils/build-script<br>                  --preset=drew --preset-file=presets.ini<br>                  --preset-file=utils/build-presets.ini<br>                  installable_package=&quot;/tmp/swift.tar.gz&quot;<br>                  install_destdir=&quot;/tmp/install/&quot;&#39; returned a non-zero<br>                  code: 1_______________________________________________<br>                  swift-dev mailing list<br>                  swift-dev at swift.org<br>                  https://lists.swift.org/mailman/listinfo/swift-dev<br></p><p><br></p><p>      _______________________________________________<br>      swift-dev mailing list<br>      swift-dev at swift.org<br>      https://lists.swift.org/mailman/listinfo/swift-dev<br></p><p><br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20160227/860d149a/attachment.html&gt;<br>-------------- next part --------------<br>A non-text attachment was scrubbed...<br>Name: graycol.gif<br>Type: image/gif<br>Size: 105 bytes<br>Desc: not available<br>URL: &lt;https://lists.swift.org/pipermail/swift-dev/attachments/20160227/860d149a/attachment.gif&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js?vsn=d"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
