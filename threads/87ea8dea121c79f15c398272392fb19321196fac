<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css?vsn=d">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg?vsn=d" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/a9a3863e5d65369aacc65a74bf6083db?s=50"></div><header><strong>Linux Swift: Strange bug found in a simple arithmetic</strong> from <string>louislepegue</string> &lt;louislepegue at gmail.com&gt;<p>September  7, 2016 at 10:00:00am</p></header><div class="content"><p>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160907/87ea6fac/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/4c60436f08b7b107f0bb0848c31297fa?s=50"></div><header><strong>Linux Swift: Strange bug found in a simple arithmetic</strong> from <string>Alex Blewitt</string> &lt;alblue at apple.com&gt;<p>September  7, 2016 at 03:00:00pm</p></header><div class="content"><p>On 7 Sep 2016, at 15:11, louislepegue via swift-users &lt;swift-users at swift.org&gt; wrote:<br>&gt; <br>&gt; let simpleTest = Float(abs(11 - -3) + abs(4.5 - -4))  //!<br>&gt; print (&quot;simpleTest:  \(Simpletest)&quot;)<br>&gt; <br></p><p>Aside from the fact that the case-sensitivity of simpleTest is important, the delay is in the compilation of this script rather than the runtime performance of the script. You can compile it with swiftc (which takes around 20s) but then when running it the performance is fine.<br></p><p>It&#39;s certainly an interesting compiler issue, probably to do with the type analysis rather than the complexity of the abs function or the Float cast directly. It&#39;s still worth raising a bug at https://bugs.swift.org &lt;https://bugs.swift.org/&gt; with the snippet though.<br></p><p>Alex<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160907/051e7836/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/a9a3863e5d65369aacc65a74bf6083db?s=50"></div><header><strong>Linux Swift: Strange bug found in a simple arithmetic</strong> from <string>louislepegue</string> &lt;louislepegue at gmail.com&gt;<p>September  7, 2016 at 10:00:00am</p></header><div class="content"><p>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160907/7f500303/attachment.html&gt;<br></p></div></li><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/b397983c72fc0400927bd578212b8b5e?s=50"></div><header><strong>Linux Swift: Strange bug found in a simple arithmetic</strong> from <string>Lou Zell</string> &lt;lzell11 at gmail.com&gt;<p>September  7, 2016 at 07:00:00am</p></header><div class="content"><p>&gt;<br>&gt; It&#39;s certainly an interesting compiler issue, probably to do with the type<br>&gt; analysis<br></p><p><br>I&#39;ve for sure hit this before and now see with a little help to the<br>compiler the compile time drops dramatically:​<br></p><p>Float(abs(Double(0) - Double(0)))<br>repl.swift:50:1: error: expression was too complex to be solved in<br>reasonable time; consider breaking up the expression into distinct<br>sub-expressions<br></p><p>Float(abs(Double(0 as Int) - Double(0 as Int)))<br>// Compiles instantly!<br></p><p>It makes the code ugly though, so we&#39;re probably better-off busting it into<br>subexpressions like the error above states.<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160907/e2a9312f/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/b397983c72fc0400927bd578212b8b5e?s=50"></div><header><strong>Linux Swift: Strange bug found in a simple arithmetic</strong> from <string>Lou Zell</string> &lt;lzell11 at gmail.com&gt;<p>September  7, 2016 at 08:00:00am</p></header><div class="content"><p>Also hoping someone more knowledgeable can explain why these seemingly<br>simple cases do in fact take so long! :)<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160907/e15b228b/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/44b9c3e92a40313850fdbc2cb0abdef7?s=50"></div><header><strong>Linux Swift: Strange bug found in a simple arithmetic</strong> from <string>Jon Shier</string> &lt;jon at jonshier.com&gt;<p>September  7, 2016 at 11:00:00am</p></header><div class="content"><p>It’s related to this: http://www.cocoawithlove.com/blog/2016/07/12/type-checker-issues.html<br></p><p><br>Jon<br></p><p>&gt; On Sep 7, 2016, at 11:32 AM, Lou Zell via swift-users &lt;swift-users at swift.org&gt; wrote:<br>&gt; <br>&gt; Also hoping someone more knowledgeable can explain why these seemingly simple cases do in fact take so long! :)<br>&gt; _______________________________________________<br>&gt; swift-users mailing list<br>&gt; swift-users at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-users<br></p></div></li><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/d0efc09d023fa0569a2479c9dcfd4620?s=50"></div><header><strong>Linux Swift: Strange bug found in a simple arithmetic</strong> from <string>Ole Begemann</string> &lt;ole at oleb.net&gt;<p>September  7, 2016 at 05:00:00pm</p></header><div class="content"><p>&gt; Also hoping someone more knowledgeable can explain why these seemingly<br>&gt; simple cases do in fact take so long! :)<br></p><p>Matt Gallagher wrote an excellent article where he explained how <br>seemingly simple expressions can sometimes cause an enormous amount of <br>work for the type checker because it has so many overloads to consider:<br></p><p>   &quot;Exponential time complexity in the Swift type checker&quot;<br>   http://www.cocoawithlove.com/blog/2016/07/12/type-checker-issues.html<br></p><p>It&#39;s a great read.<br></p><p>For what it&#39;s worth, on my Mac with Xcode 8b6 the snippet takes about 3 <br>seconds to compile (which is still a long time).<br></p><p>Ole<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/a9a3863e5d65369aacc65a74bf6083db?s=50"></div><header><strong>Linux Swift: Strange bug found in a simple arithmetic</strong> from <string>louislepegue</string> &lt;louislepegue at gmail.com&gt;<p>September  7, 2016 at 03:00:00pm</p></header><div class="content"><p>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160907/2f00b9bd/attachment.html&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js?vsn=d"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
