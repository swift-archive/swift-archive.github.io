<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=50"></div><header><strong>[Bug] Foundation.URL should support semicolon(; ) appearing in URL path</strong> from <string>Jacob Bandes-Storch</string> &lt;jtbandes at gmail.com&gt;<p>October 26, 2016 at 11:00:00pm</p></header><div class="content"><p>Sorry for fake threading, the original message was sent before I subscribed<br>to this list.<br></p><p>http://host/book;id=1/page;2/<br>&gt; this URL is a valid URL, but URLComponents will ruin it with %3B<br>&gt; http://host/book%3Bid=1/page%3B2/<br>&gt; Since Swift Server is coming out, this bug should be solved.<br></p><p><br>Just wanted to point out some related bugs that I have filed in the past:<br></p><p>- https://bugs.swift.org/browse/SR-21<br></p><p>- rdar://23241861  &quot;NSFont fontWithDescriptor:size: fails when passed a URL<br>with a semicolon in it&quot; (marked as dupe of rdar://22424272)<br></p><p><br>Jacob<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-server-dev/attachments/20161026/abb22b55/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/8d00f5acbaa7d24e0900e5045462e008?s=50"></div><header><strong>[Bug] Foundation.URL should support semicolon(; ) appearing in URL path</strong> from <string>Chris Bailey</string> &lt;BAILEYC at uk.ibm.com&gt;<p>October 27, 2016 at 10:00:00am</p></header><div class="content"><p>Hi Jacob:<br></p><p>This should really be posted to swift-corelibs-dev, which covers the <br>Foundation library which covers URL and URLComponents - there&#39;s more <br>people on that list that are likely to pick this up.<br></p><p>Chris<br></p><p><br></p><p><br>From:   Jacob Bandes-Storch via swift-server-dev <br>&lt;swift-server-dev at swift.org&gt;<br>To:     swift-server-dev at swift.org<br>Date:   27/10/2016 07:24<br>Subject:        Re: [swift-server-dev] [Bug] Foundation.URL should support <br>semicolon(; ) appearing in URL path<br>Sent by:        swift-server-dev-bounces at swift.org<br></p><p><br></p><p>Sorry for fake threading, the original message was sent before I <br>subscribed to this list.<br></p><p>http://host/book;id=1/page;2/<br>this URL is a valid URL, but URLComponents will ruin it with %3B<br>http://host/book%3Bid=1/page%3B2/<br>Since Swift Server is coming out, this bug should be solved.<br></p><p>Just wanted to point out some related bugs that I have filed in the past:<br></p><p>- https://bugs.swift.org/browse/SR-21<br></p><p>- rdar://23241861  &quot;NSFont fontWithDescriptor:size: fails when passed a <br>URL with a semicolon in it&quot; (marked as dupe of rdar://22424272)<br></p><p><br>Jacob_______________________________________________<br>swift-server-dev mailing list<br>swift-server-dev at swift.org<br>https://lists.swift.org/mailman/listinfo/swift-server-dev<br></p><p><br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-server-dev/attachments/20161027/429c3eaf/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/be4c3c3b76631a155e1358db48066692?s=50"></div><header><strong>[Bug] Foundation.URL should support semicolon(; ) appearing in URL path</strong> from <string>Tony Parker</string> &lt;anthony.parker at apple.com&gt;<p>October 27, 2016 at 09:00:00am</p></header><div class="content"><p>For what it’s worth, we had this discussion in a PR already:<br></p><p>https://github.com/apple/swift-corelibs-foundation/pull/664 &lt;https://github.com/apple/swift-corelibs-foundation/pull/664&gt;<br></p><p>&gt; The issue here is that the compatibility API in question is NSURL/URL, and we want to maintain compatibility between it and NSURLComponents/URLComponents. Therefore this code chooses to percent encode the ;.<br>&gt; <br>&gt; If/when we change the behavior of NSURL/URL itself (which we have to do carefully, as many apps out there rely on its nuances), then we can change this one as well. This code is shared on all of our platforms so we can&#39;t forget about the consequences for darwin API as well.<br>&gt; <br>&gt; I think the best place for this patch right now is in a JIRA, so we can track updating these together in the future.<br></p><p>It’s not impossible to change, but we still want to maintain cross-platform behavior so we would need to change it in Darwin as well. And to change it there, we want it to be consistent behavior between NSURL and NSURLComponents. And to change NSURL we have to be careful about the consequences of changing the behavior under all existing apps. We have first hand experience with changes in NSURL causing strange behavior in other apps.<br></p><p>- Tony<br></p><p>&gt; On Oct 27, 2016, at 2:24 AM, Chris Bailey via swift-server-dev &lt;swift-server-dev at swift.org&gt; wrote:<br>&gt; <br>&gt; Hi Jacob: <br>&gt; <br>&gt; This should really be posted to swift-corelibs-dev, which covers the Foundation library which covers URL and URLComponents - there&#39;s more people on that list that are likely to pick this up. <br>&gt; <br>&gt; Chris<br>&gt; <br>&gt; <br>&gt; <br>&gt; <br>&gt; From:        Jacob Bandes-Storch via swift-server-dev &lt;swift-server-dev at swift.org&gt; <br>&gt; To:        swift-server-dev at swift.org <br>&gt; Date:        27/10/2016 07:24 <br>&gt; Subject:        Re: [swift-server-dev] [Bug] Foundation.URL should support semicolon(; ) appearing in URL path <br>&gt; Sent by:        swift-server-dev-bounces at swift.org <br>&gt; <br>&gt; <br>&gt; <br>&gt; Sorry for fake threading, the original message was sent before I subscribed to this list. <br>&gt; <br>&gt; http://host/book;id=1/page;2/ &lt;http://host/book;id=1/page;2/&gt;<br>&gt; this URL is a valid URL, but URLComponents will ruin it with %3B<br>&gt; http://host/book%3Bid=1/page%3B2/ &lt;http://host/book%3Bid=1/page%3B2/&gt;<br>&gt; Since Swift Server is coming out, this bug should be solved. <br>&gt; <br>&gt; Just wanted to point out some related bugs that I have filed in the past: <br>&gt; <br>&gt; - https://bugs.swift.org/browse/SR-21 &lt;https://bugs.swift.org/browse/SR-21&gt; <br>&gt; <br>&gt; - rdar://23241861  &quot;NSFont fontWithDescriptor:size: fails when passed a URL with a semicolon in it&quot; (marked as dupe of rdar://22424272) <br>&gt; <br>&gt; <br>&gt; Jacob_______________________________________________<br>&gt; swift-server-dev mailing list<br>&gt; swift-server-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-server-dev &lt;https://lists.swift.org/mailman/listinfo/swift-server-dev&gt;<br>&gt; <br>&gt; <br>&gt; _______________________________________________<br>&gt; swift-server-dev mailing list<br>&gt; swift-server-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-server-dev<br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-server-dev/attachments/20161027/bbd33a98/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=50"></div><header><strong>[Bug] Foundation.URL should support semicolon(; ) appearing in URL path</strong> from <string>Jacob Bandes-Storch</string> &lt;jtbandes at gmail.com&gt;<p>October 27, 2016 at 04:00:00pm</p></header><div class="content"><p>Another option might be to introduce a separate type, such as &quot;URI&quot;, which<br>uses only the new behavior.<br>On Thu, Oct 27, 2016 at 9:05 AM Tony Parker &lt;anthony.parker at apple.com&gt;<br>wrote:<br></p><p>&gt; For what it’s worth, we had this discussion in a PR already:<br>&gt;<br>&gt; https://github.com/apple/swift-corelibs-foundation/pull/664<br>&gt;<br>&gt; The issue here is that the compatibility API in question is NSURL/URL, and<br>&gt; we want to maintain compatibility between it and<br>&gt; NSURLComponents/URLComponents. Therefore this code chooses to percent<br>&gt; encode the ;.<br>&gt;<br>&gt; If/when we change the behavior of NSURL/URL itself (which we have to do<br>&gt; carefully, as many apps out there rely on its nuances), then we can change<br>&gt; this one as well. This code is shared on all of our platforms so we can&#39;t<br>&gt; forget about the consequences for darwin API as well.<br>&gt; I think the best place for this patch right now is in a JIRA, so we can<br>&gt; track updating these together in the future.<br>&gt;<br>&gt;<br>&gt; It’s not impossible to change, but we still want to maintain<br>&gt; cross-platform behavior so we would need to change it in Darwin as well.<br>&gt; And to change it there, we want it to be consistent behavior between NSURL<br>&gt; and NSURLComponents. And to change NSURL we have to be careful about the<br>&gt; consequences of changing the behavior under all existing apps. We have<br>&gt; first hand experience with changes in NSURL causing strange behavior in<br>&gt; other apps.<br>&gt;<br>&gt; - Tony<br>&gt;<br>&gt; On Oct 27, 2016, at 2:24 AM, Chris Bailey via swift-server-dev &lt;<br>&gt; swift-server-dev at swift.org&gt; wrote:<br>&gt;<br>&gt; Hi Jacob:<br>&gt;<br>&gt; This should really be posted to swift-corelibs-dev, which covers the<br>&gt; Foundation library which covers URL and URLComponents - there&#39;s more people<br>&gt; on that list that are likely to pick this up.<br>&gt;<br>&gt; Chris<br>&gt;<br>&gt;<br>&gt;<br>&gt;<br>&gt; From:        Jacob Bandes-Storch via swift-server-dev &lt;<br>&gt; swift-server-dev at swift.org&gt;<br>&gt; To:        swift-server-dev at swift.org<br>&gt; Date:        27/10/2016 07:24<br>&gt; Subject:        Re: [swift-server-dev] [Bug] Foundation.URL should<br>&gt; support semicolon(; ) appearing in URL path<br>&gt; Sent by:        swift-server-dev-bounces at swift.org<br>&gt; ------------------------------<br>&gt;<br>&gt;<br>&gt;<br>&gt; Sorry for fake threading, the original message was sent before I<br>&gt; subscribed to this list.<br>&gt;<br>&gt; *http://host/book;id=1/page;2/* &lt;http://host/book;id=1/page;2/&gt;<br>&gt; this URL is a valid URL, but URLComponents will ruin it with %3B<br>&gt; *http://host/book%3Bid=1/page%3B2/* &lt;http://host/book%3Bid=1/page%3B2/&gt;<br>&gt; Since Swift Server is coming out, this bug should be solved.<br>&gt;<br>&gt; Just wanted to point out some related bugs that I have filed in the past:<br>&gt;<br>&gt; - *https://bugs.swift.org/browse/SR-21*<br>&gt; &lt;https://bugs.swift.org/browse/SR-21&gt;<br>&gt;<br>&gt; - rdar://23241861  &quot;NSFont fontWithDescriptor:size: fails when passed a<br>&gt; URL with a semicolon in it&quot; (marked as dupe of rdar://22424272)<br>&gt;<br>&gt;<br>&gt; Jacob_______________________________________________<br>&gt; swift-server-dev mailing list<br>&gt; swift-server-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-server-dev<br>&gt;<br>&gt;<br>&gt; _______________________________________________<br>&gt; swift-server-dev mailing list<br>&gt; swift-server-dev at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-server-dev<br>&gt;<br>&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-server-dev/attachments/20161027/7bb94c63/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/be4c3c3b76631a155e1358db48066692?s=50"></div><header><strong>[Bug] Foundation.URL should support semicolon(; ) appearing in URL path</strong> from <string>Tony Parker</string> &lt;anthony.parker at apple.com&gt;<p>October 27, 2016 at 09:00:00am</p></header><div class="content"><p>In general we want to encourage the use of “common currency” types across the SDK. Introducing new types that are almost the same as existing ones but with a subtle behavior difference has a tendency to cause forking of APIs and introduce what we like to call impedance mismatch. Callers would end up having to convert back and forth for very little reason.<br></p><p>Like I said, I think we can resolve this with URL itself. We just need some time to figure out the consequences on Darwin. We’re looking into it.<br></p><p>- Tony<br></p><p>&gt; On Oct 27, 2016, at 9:09 AM, Jacob Bandes-Storch &lt;jtbandes at gmail.com&gt; wrote:<br>&gt; <br>&gt; Another option might be to introduce a separate type, such as &quot;URI&quot;, which uses only the new behavior.<br>&gt; On Thu, Oct 27, 2016 at 9:05 AM Tony Parker &lt;anthony.parker at apple.com &lt;mailto:anthony.parker at apple.com&gt;&gt; wrote:<br>&gt; For what it’s worth, we had this discussion in a PR already:<br>&gt; <br>&gt; https://github.com/apple/swift-corelibs-foundation/pull/664 &lt;https://github.com/apple/swift-corelibs-foundation/pull/664&gt;<br>&gt; <br>&gt;&gt; The issue here is that the compatibility API in question is NSURL/URL, and we want to maintain compatibility between it and NSURLComponents/URLComponents. Therefore this code chooses to percent encode the ;.<br>&gt;&gt; <br>&gt;&gt; If/when we change the behavior of NSURL/URL itself (which we have to do carefully, as many apps out there rely on its nuances), then we can change this one as well. This code is shared on all of our platforms so we can&#39;t forget about the consequences for darwin API as well.<br>&gt;&gt; <br>&gt;&gt; I think the best place for this patch right now is in a JIRA, so we can track updating these together in the future.<br>&gt; <br>&gt; It’s not impossible to change, but we still want to maintain cross-platform behavior so we would need to change it in Darwin as well. And to change it there, we want it to be consistent behavior between NSURL and NSURLComponents. And to change NSURL we have to be careful about the consequences of changing the behavior under all existing apps. We have first hand experience with changes in NSURL causing strange behavior in other apps.<br>&gt; <br>&gt; - Tony<br>&gt; <br>&gt;&gt; On Oct 27, 2016, at 2:24 AM, Chris Bailey via swift-server-dev &lt;swift-server-dev at swift.org &lt;mailto:swift-server-dev at swift.org&gt;&gt; wrote:<br>&gt;&gt; <br>&gt;&gt; Hi Jacob: <br>&gt;&gt; <br>&gt;&gt; This should really be posted to swift-corelibs-dev, which covers the Foundation library which covers URL and URLComponents - there&#39;s more people on that list that are likely to pick this up. <br>&gt;&gt; <br>&gt;&gt; Chris<br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; From:        Jacob Bandes-Storch via swift-server-dev &lt;swift-server-dev at swift.org &lt;mailto:swift-server-dev at swift.org&gt;&gt; <br>&gt;&gt; To:        swift-server-dev at swift.org &lt;mailto:swift-server-dev at swift.org&gt; <br>&gt;&gt; Date:        27/10/2016 07:24 <br>&gt;&gt; Subject:        Re: [swift-server-dev] [Bug] Foundation.URL should support semicolon(; ) appearing in URL path <br>&gt;&gt; Sent by:        swift-server-dev-bounces at swift.org &lt;mailto:swift-server-dev-bounces at swift.org&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; Sorry for fake threading, the original message was sent before I subscribed to this list. <br>&gt;&gt; <br>&gt;&gt; http://host/book;id=1/page;2/ &lt;http://host/book;id=1/page;2/&gt;<br>&gt;&gt; this URL is a valid URL, but URLComponents will ruin it with %3B<br>&gt;&gt; http://host/book%3Bid=1/page%3B2/ &lt;http://host/book%3Bid=1/page%3B2/&gt;<br>&gt;&gt; Since Swift Server is coming out, this bug should be solved. <br>&gt;&gt; <br>&gt;&gt; Just wanted to point out some related bugs that I have filed in the past: <br>&gt;&gt; <br>&gt;&gt; - https://bugs.swift.org/browse/SR-21 &lt;https://bugs.swift.org/browse/SR-21&gt; <br>&gt;&gt; <br>&gt;&gt; - rdar://23241861 &lt;&gt;  &quot;NSFont fontWithDescriptor:size: fails when passed a URL with a semicolon in it&quot; (marked as dupe of rdar://22424272 &lt;&gt;) <br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; Jacob_______________________________________________<br>&gt;&gt; swift-server-dev mailing list<br>&gt;&gt; swift-server-dev at swift.org &lt;mailto:swift-server-dev at swift.org&gt;<br>&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-server-dev &lt;https://lists.swift.org/mailman/listinfo/swift-server-dev&gt;<br>&gt;&gt; <br>&gt;&gt; <br>&gt;&gt; _______________________________________________<br>&gt;&gt; swift-server-dev mailing list<br>&gt;&gt; swift-server-dev at swift.org &lt;mailto:swift-server-dev at swift.org&gt;<br>&gt;&gt; https://lists.swift.org/mailman/listinfo/swift-server-dev &lt;https://lists.swift.org/mailman/listinfo/swift-server-dev&gt;<br>&gt; <br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-server-dev/attachments/20161027/e4a39a8f/attachment.html&gt;<br></p></div></li></ul></li></ul></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
