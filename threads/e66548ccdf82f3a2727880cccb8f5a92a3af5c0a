<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Swift Mailing List Archive</title>
    <link rel="stylesheet" href="/css/app-13f065ae5e595562a5022c544e3b976c.css?vsn=d">
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img src="/images/swift-d0237fc716ba0932a940049990beba1b.svg?vsn=d" height="70">
      </header>

      <p class="alert alert-info" role="alert"></p>
      <p class="alert alert-danger" role="alert"></p>

    </div> <!-- /container -->
    <main role="main">
<div class="comment-wrapper"><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/175ad9e0827a836bfb3d1d06fe3182ec?s=50"></div><header><strong>Long compilation times</strong> from <string>Diego S치nchez</string> &lt;diego.sanchezr at gmail.com&gt;<p>August 20, 2016 at 02:00:00am</p></header><div class="content"><p>Hi all,<br></p><p>We&#39;re suffering from very long Swift compilation times in our project. Each<br>file takes ~1 second to compile (-Onone), (measured with xctool -jobs 1),<br>which is hitting our development experience as we keep adding swift code<br>(~350 .swift files) :(<br></p><p>I&#39;ve gone through all the googling already and the<br>debug-time-function-bodies thing, but I didn&#39;t find any particular function<br>taking too long. However, I did notice:<br> a) Each file takes more or less the same amount of time to compile (~1<br>second), even for very simple files.<br> b) Each &quot;swift -frontend -c&quot; command with the debug-time-function-bodies<br>dumps basically the same info for each file, which is around 1500 lines.<br>Most of the times are 0.0ms, and the total sum for a random choice gave me<br>167.3 ms, far away from 1 second<br></p><p>&gt;From a) and b) looks like the same heavy operation is being performed for<br>each file (type checking?) and that this heavy operation grows with the<br>size of the project. Would it be possible to do this upfront and not pay<br>for it in every file? Basically, if I have 3 classes in one file it will<br>take 1 second to compile them but if I do 1 file per class then it will be<br>3 seconds :(<br></p><p>I&#39;d like some input to whether my assumption is correct and suggestions on<br>how to improve the compilation time, apart from splitting the code into<br>smaller frameworks. Can I expect improvements with Swift 3 or future<br>releases? (I tried migrating a small framework to Swift 3 and didn&#39;t see a<br>big difference)<br></p><p>Cheers,<br>Diego<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160820/e6655c0a/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/17d2af4afb70023e28e655d17471a018?s=50"></div><header><strong>Long compilation times</strong> from <string>Michael Gottesman</string> &lt;mgottesman at apple.com&gt;<p>August 22, 2016 at 04:00:00pm</p></header><div class="content"><p>&gt; On Aug 19, 2016, at 9:23 PM, Diego S치nchez via swift-users &lt;swift-users at swift.org&gt; wrote:<br>&gt; <br>&gt; Hi all,<br>&gt; <br>&gt; We&#39;re suffering from very long Swift compilation times in our project. Each file takes ~1 second to compile (-Onone), (measured with xctool -jobs 1), which is hitting our development experience as we keep adding swift code (~350 .swift files) :(<br>&gt; <br>&gt; I&#39;ve gone through all the googling already and the debug-time-function-bodies thing, but I didn&#39;t find any particular function taking too long. However, I did notice:<br>&gt;  a) Each file takes more or less the same amount of time to compile (~1 second), even for very simple files.<br>&gt;  b) Each &quot;swift -frontend -c&quot; command with the debug-time-function-bodies dumps basically the same info for each file, which is around 1500 lines. Most of the times are 0.0ms, and the total sum for a random choice gave me 167.3 ms, far away from 1 second<br>&gt; <br>&gt; From a) and b) looks like the same heavy operation is being performed for each file (type checking?) and that this heavy operation grows with the size of the project. Would it be possible to do this upfront and not pay for it in every file? Basically, if I have 3 classes in one file it will take 1 second to compile them but if I do 1 file per class then it will be 3 seconds :(<br>&gt; <br>&gt; I&#39;d like some input to whether my assumption is correct and suggestions on how to improve the compilation time, apart from splitting the code into smaller frameworks. Can I expect improvements with Swift 3 or future releases? (I tried migrating a small framework to Swift 3 and didn&#39;t see a big difference)<br></p><p>Do you have a small example of this? Can you file a bug on bugs.swift.org &lt;http://bugs.swift.org/&gt;?<br></p><p>Then we can look at your specific example.<br></p><p>&gt; <br>&gt; Cheers,<br>&gt; Diego<br>&gt; <br>&gt; <br>&gt; _______________________________________________<br>&gt; swift-users mailing list<br>&gt; swift-users at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-users<br></p><p>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160822/e9b79cb4/attachment.html&gt;<br></p></div><ul class="comments"><li class="comment"><div class="avatar"><img src="https://www.gravatar.com/avatar/175ad9e0827a836bfb3d1d06fe3182ec?s=50"></div><header><strong>Long compilation times</strong> from <string>Diego S치nchez</string> &lt;diego.sanchezr at gmail.com&gt;<p>August 23, 2016 at 02:00:00pm</p></header><div class="content"><p>I haven&#39;t been able to synthesise a project where this reproduces that<br>badly *yet*. Anyways I&#39;ve filled https://bugs.swift.org/browse/SR-2461 with<br>some more info in case it helps.<br></p><p>Thanks!<br></p><p>2016-08-22 21:47 GMT+01:00 Michael Gottesman &lt;mgottesman at apple.com&gt;:<br></p><p>&gt;<br>&gt; On Aug 19, 2016, at 9:23 PM, Diego S치nchez via swift-users &lt;<br>&gt; swift-users at swift.org&gt; wrote:<br>&gt;<br>&gt; Hi all,<br>&gt;<br>&gt; We&#39;re suffering from very long Swift compilation times in our project.<br>&gt; Each file takes ~1 second to compile (-Onone), (measured with xctool -jobs<br>&gt; 1), which is hitting our development experience as we keep adding swift<br>&gt; code (~350 .swift files) :(<br>&gt;<br>&gt; I&#39;ve gone through all the googling already and the<br>&gt; debug-time-function-bodies thing, but I didn&#39;t find any particular function<br>&gt; taking too long. However, I did notice:<br>&gt;  a) Each file takes more or less the same amount of time to compile (~1<br>&gt; second), even for very simple files.<br>&gt;  b) Each &quot;swift -frontend -c&quot; command with the debug-time-function-bodies<br>&gt; dumps basically the same info for each file, which is around 1500 lines.<br>&gt; Most of the times are 0.0ms, and the total sum for a random choice gave me<br>&gt; 167.3 ms, far away from 1 second<br>&gt;<br>&gt; From a) and b) looks like the same heavy operation is being performed for<br>&gt; each file (type checking?) and that this heavy operation grows with the<br>&gt; size of the project. Would it be possible to do this upfront and not pay<br>&gt; for it in every file? Basically, if I have 3 classes in one file it will<br>&gt; take 1 second to compile them but if I do 1 file per class then it will be<br>&gt; 3 seconds :(<br>&gt;<br>&gt; I&#39;d like some input to whether my assumption is correct and suggestions on<br>&gt; how to improve the compilation time, apart from splitting the code into<br>&gt; smaller frameworks. Can I expect improvements with Swift 3 or future<br>&gt; releases? (I tried migrating a small framework to Swift 3 and didn&#39;t see a<br>&gt; big difference)<br>&gt;<br>&gt;<br>&gt; Do you have a small example of this? Can you file a bug on bugs.swift.org?<br>&gt;<br>&gt; Then we can look at your specific example.<br>&gt;<br>&gt;<br>&gt; Cheers,<br>&gt; Diego<br>&gt;<br>&gt;<br>&gt; _______________________________________________<br>&gt; swift-users mailing list<br>&gt; swift-users at swift.org<br>&gt; https://lists.swift.org/mailman/listinfo/swift-users<br>&gt;<br>&gt;<br>&gt;<br>-------------- next part --------------<br>An HTML attachment was scrubbed...<br>URL: &lt;https://lists.swift.org/pipermail/swift-users/attachments/20160823/ed399913/attachment.html&gt;<br></p></div></li></ul></li></ul></li></ul></div>    </main>
    <script src="/js/app-c283ee129de63ad743722e9511e67a5d.js?vsn=d"></script>
  </body>
  <footer>
    <p>Swift and the Swift logo are trademarks of Apple Inc.</p>
  </footer>
</html>
